
> agentic-sdlc@0.1.0 orchestrator:dev
> pnpm --filter @agentic-sdlc/orchestrator dev


> @agentic-sdlc/orchestrator@0.1.0 dev /Users/Greg/Projects/apps/zyp/agent-sdlc/packages/orchestrator
> tsx watch src/index.ts

üì¶ @agentic-sdlc/shared-types loaded (Phase 5)
üîñ Version: 1.0.0
prisma:info Starting a postgresql pool with 29 connections.
{"ts":"2025-11-18T00:19:55.658Z","scope":"bootstrap","msg":"Initializing container","level":"INFO","redisUrl":"redis://localhost:6380","redisNamespace":"agentic-sdlc"}
{"ts":"2025-11-18T00:19:55.659Z","scope":"redis-suite","msg":"Creating Redis suite","level":"INFO","url":"redis://localhost:6380"}
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36mStarting Agentic SDLC Orchestrator...[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36mDatabase connected successfully[39m
{"ts":"2025-11-18T00:19:55.672Z","scope":"redis-suite","msg":"pub-client connected","level":"INFO","status":"ready"}
{"ts":"2025-11-18T00:19:55.672Z","scope":"redis-suite","msg":"base-client connected","level":"INFO","status":"ready"}
{"ts":"2025-11-18T00:19:55.672Z","scope":"redis-suite","msg":"sub-client connected","level":"INFO","status":"ready"}
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-3] Initializing OrchestratorContainer[39m
{"ts":"2025-11-18T00:19:55.672Z","scope":"redis-suite","msg":"pub-client health check passed","level":"INFO","pong":"PONG"}
{"ts":"2025-11-18T00:19:55.673Z","scope":"redis-suite","msg":"base-client health check passed","level":"INFO","pong":"PONG"}
{"ts":"2025-11-18T00:19:55.673Z","scope":"redis-suite","msg":"sub-client health check passed","level":"INFO","pong":"PONG"}
{"ts":"2025-11-18T00:19:55.673Z","scope":"redis-suite","msg":"Redis suite created successfully","level":"INFO"}
{"ts":"2025-11-18T00:19:55.673Z","scope":"redis-bus","msg":"Bus initialized with node-redis v4","level":"INFO"}
{"ts":"2025-11-18T00:19:55.673Z","scope":"redis-bus","msg":"Starting pSubscribe listener for all patterns","level":"INFO"}
{"ts":"2025-11-18T00:19:55.673Z","scope":"redis-kv","msg":"KV store initialized","level":"INFO","namespace":"agentic-sdlc"}
{"ts":"2025-11-18T00:19:55.677Z","scope":"bootstrap","msg":"Container initialized successfully","level":"INFO","busHealth":{"ok":true,"latencyMs":1,"details":{"pubConnected":true,"subConnected":true,"subscriptions":0}},"kvHealth":true}
[DEBUG-STATE-MACHINE-CONSTRUCTOR] About to call setupAutonomousEventHandling
[DEBUG-STATE-MACHINE-INIT] Setting up state machine result handler subscription
[DEBUG-STATE-MACHINE-INIT] About to subscribe to: orchestrator:results
{"ts":"2025-11-18T00:19:55.687Z","scope":"redis-bus","msg":"Subscribed","level":"INFO","topic":"orchestrator:results"}
prisma:query SELECT "public"."Platform"."id", "public"."Platform"."name", "public"."Platform"."layer"::text, "public"."Platform"."description", "public"."Platform"."config", "public"."Platform"."enabled", "public"."Platform"."created_at", "public"."Platform"."updated_at" FROM "public"."Platform" WHERE 1=1 ORDER BY "public"."Platform"."created_at" DESC OFFSET $1
[DEBUG-STREAM-INIT] Consumer group already exists (good - will continue from last position) {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group'
}
[DEBUG-STREAM-INIT] Stream consumer loop STARTED {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425195687',
  topic: 'orchestrator:results'
}
{"ts":"2025-11-18T00:19:55.688Z","scope":"redis-bus","msg":"[PHASE-3] Starting stream consumer","level":"INFO","streamKey":"stream:orchestrator:results","consumerGroup":"orchestrator-group","consumerName":"consumer-1763425195687"}
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425195687'
}
{"ts":"2025-11-18T00:19:55.688Z","scope":"redis-bus","msg":"Handler registered","level":"INFO","topic":"orchestrator:results","count":1}
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-3] OrchestratorContainer initialized successfully[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-3] Extracting dependencies from container[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-3] Extracted dependencies from container[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-3] WorkflowStateManager initialized[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] Setting up autonomous state machine event handling[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-6] WorkflowStateMachineService initialized with state persistence[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-3] WorkflowService created with messageBus[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[WF:CONSTRUCTOR:START] WorkflowService instance created[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-2] WorkflowService initialized with required messageBus[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[WF:SETUP_HANDLERS] Registering event handlers[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[WF:SUBSCRIBING] Subscribing to TASK_COMPLETED[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] WorkflowService constructor complete - task orchestration delegated to state machine[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Task creator callback registered with state machine[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Task creator registered with state machine[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36mDashboard services initialized (StatsService, TraceService)[39m
[00:19:55 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36mPlatform services initialized (PlatformRegistry with 0 platforms)[39m
[00:19:55 UTC] [33mWARN[39m (orchestrator): [36mFailed to load policy gates, using defaults[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36mLoaded default quality gates[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] Autonomous state machine event handling initialized[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #79] Recovering paused executions from database[39m
prisma:query SELECT "public"."PipelineExecution"."id", "public"."PipelineExecution"."pipeline_id", "public"."PipelineExecution"."workflow_id", "public"."PipelineExecution"."status"::text, "public"."PipelineExecution"."current_stage", "public"."PipelineExecution"."started_at", "public"."PipelineExecution"."paused_at", "public"."PipelineExecution"."resumed_at", "public"."PipelineExecution"."completed_at", "public"."PipelineExecution"."failed_at", "public"."PipelineExecution"."error_message", "public"."PipelineExecution"."created_at", "public"."PipelineExecution"."updated_at", "public"."PipelineExecution"."version" FROM "public"."PipelineExecution" WHERE "public"."PipelineExecution"."status" = CAST($1::text AS "public"."WorkflowStatus") ORDER BY "public"."PipelineExecution"."created_at" DESC OFFSET $2
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[EB:REDIS_SUBSCRIBED] Subscribed to Redis channel[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[EB:HANDLER_REGISTERED] Handler registered for event[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[EB:REDIS_SUBSCRIBED] Subscribed to Redis channel[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[EB:HANDLER_REGISTERED] Handler registered for event[39m
[00:19:55 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
=================== SERVER START ERROR ===================
Error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3051
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3051
}
Message: listen EADDRINUSE: address already in use 0.0.0.0:3051
Stack: Error: listen EADDRINUSE: address already in use 0.0.0.0:3051
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
==========================================================
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #79] Retrieved pipeline executions by status[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #79] Recovered paused executions from database[39m
[00:19:55 UTC] [32mINFO[39m (orchestrator): [36mPipeline service initialized with pause/resume persistence (Session #79)[39m
[00:19:55 UTC] [METRIC] http_requests_total{method="GET",path="/api/v1/workflows"}: 1
(node:55384) [FSTDEP017] DeprecationWarning: You are accessing the deprecated "request.routerPath" property. Use "request.routeOptions.url" instead. Property "req.routerPath" will be removed in `fastify@5`.
(Use `node --trace-deprecation ...` to show where the warning was created)
prisma:query/Users/Greg/Projects/apps/zyp/agent-sdlc/packages/orchestrator:
‚ÄâERR_PNPM_RECURSIVE_RUN_FIRST_FAIL‚Äâ @agentic-sdlc/orchestrator@0.1.0 dev: `tsx watch src/index.ts`
Exit status 15
low"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE 1=1 ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) OFFSET $13
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows",status_code="200"}: 23
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows"}: 4896
(node:55384) [FSTDEP020] DeprecationWarning: You are using the deprecated "reply.getResponseTime()" method. Use the "reply.elapsedTime" property instead. Method "reply.getResponseTime()" will be removed in `fastify@5`.
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:19:57 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "42fe7f26-91b4-4358-a026-f50ed8b520a4"
    trace_id: "d6eb6ca5-9bc6-4595-94c8-c0ec0396f2f5"
    span_id: "31e4d89517ca4382"
[00:19:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:19:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:19:57 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "42fe7f26-91b4-4358-a026-f50ed8b520a4"
    trace_id: "d6eb6ca5-9bc6-4595-94c8-c0ec0396f2f5"
    span_id: "31e4d89517ca4382"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows"}: 1
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE 1=1 ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) OFFSET $13
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows"}: 4896
[00:20:02 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "b5e595ac-5b1d-4e19-aab5-77caabcaa680"
    trace_id: "b9a34128-db0c-40e8-aedd-4b5822213a7b"
    span_id: "19aea2d801ec2f0d"
[00:20:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:02 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "b5e595ac-5b1d-4e19-aab5-77caabcaa680"
    trace_id: "b9a34128-db0c-40e8-aedd-4b5822213a7b"
    span_id: "19aea2d801ec2f0d"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE 1=1 ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) OFFSET $13
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows",status_code="200"}: 11
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows"}: 4896
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/health"}: 1
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/health",status_code="200"}: 1
[METRIC] http_responses_total{method="GET",path="/api/v1/health",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/health"}: 59
[00:20:07 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "32ecee78-058a-4939-9110-db9695414fa5"
    trace_id: "f720f8e7-dc6c-4c6b-9c1a-a75090488a72"
    span_id: "0bdb223520ac5176"
[00:20:07 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:07 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:07 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:07 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "32ecee78-058a-4939-9110-db9695414fa5"
    trace_id: "f720f8e7-dc6c-4c6b-9c1a-a75090488a72"
    span_id: "0bdb223520ac5176"
[00:20:07 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "5467d765-c093-4b8c-b100-154f1ba62ae9"
    trace_id: "932faadb-c88c-4455-8524-f715eb2ece3d"
    span_id: "a1afa8c0ecbf3bba"
[00:20:07 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "5467d765-c093-4b8c-b100-154f1ba62ae9"
    trace_id: "932faadb-c88c-4455-8524-f715eb2ece3d"
    span_id: "a1afa8c0ecbf3bba"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE 1=1 ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) OFFSET $13
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows"}: 4896
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:20:12 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "3cd7cc57-c166-4232-a7e8-ca927740e30f"
    trace_id: "96323f12-69c6-454f-91fe-2e4f30016074"
    span_id: "5a9b48793c16b26e"
[00:20:12 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:12 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:12 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "3cd7cc57-c166-4232-a7e8-ca927740e30f"
    trace_id: "96323f12-69c6-454f-91fe-2e4f30016074"
    span_id: "5a9b48793c16b26e"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE 1=1 ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) OFFSET $13
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows",status_code="200"}: 3
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows"}: 4896
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="POST",path="/api/v1/workflows"}: 1
prisma:query BEGIN
prisma:query INSERT INTO "public"."Workflow" ("id","type","name","description","requirements","status","current_stage","priority","progress","version","stage_outputs","trace_id","current_span_id","created_at","updated_at","created_by") VALUES ($1,CAST($2::text AS "public"."WorkflowType"),$3,$4,$5,CAST($6::text AS "public"."WorkflowStatus"),$7,CAST($8::text AS "public"."Priority"),$9,$10,$11,$12,$13,$14,$15,$16) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query INSERT INTO "public"."WorkflowEvent" ("id","workflow_id","event_type","payload","timestamp","trace_id") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id"
prisma:query INSERT INTO "public"."WorkflowStage" ("status","workflow_id","name","id","retry_count") VALUES (CAST($1::text AS "public"."StageStatus"),$2,$3,$4,$5), (CAST($6::text AS "public"."StageStatus"),$7,$8,$9,$10), (CAST($11::text AS "public"."StageStatus"),$12,$13,$14,$15), (CAST($16::text AS "public"."StageStatus"),$17,$18,$19,$20), (CAST($21::text AS "public"."StageStatus"),$22,$23,$24,$25), (CAST($26::text AS "public"."StageStatus"),$27,$28,$29,$30), (CAST($31::text AS "public"."StageStatus"),$32,$33,$34,$35)
prisma:query COMMIT
{"ts":"2025-11-18T00:20:17.879Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:2af61467-1348-4c7f-9c8a-4516fd0c6af6","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:20:17.879Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"2af61467-1348-4c7f-9c8a-4516fd0c6af6","current_stage":"initialization","status":"running","progress":0}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "status" = CAST($1::text AS "public"."WorkflowStatus"), "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:error 
Invalid `this.prisma.workflow.update()` invocation in
/Users/Greg/Projects/apps/zyp/agent-sdlc/packages/orchestrator/src/repositories/workflow.repository.ts:173:52

  170 const currentVersion = existing.version;
  171 
  172 try {
‚Üí 173   const updated = await this.prisma.workflow.update(
An operation failed because it depends on one or more records that were required but not found. Record to update not found.
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query INSERT INTO "public"."AgentTask" ("id","task_id","workflow_id","agent_type","status","priority","payload","trace_id","span_id","parent_span_id","assigned_at","retry_count","max_retries","timeout_ms") VALUES ($1,$2,$3,CAST($4::text AS "public"."AgentType"),CAST($5::text AS "public"."TaskStatus"),CAST($6::text AS "public"."Priority"),$7,$8,$9,$10,$11,$12,$13,$14) RETURNING "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms"
[00:20:17 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "b16ec20b-26e8-4634-9bc8-a059fbd4a208"
    trace_id: "00c7e84c-063c-4ca6-8896-16dab5e2658f"
    span_id: "040557990295334b"
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "b16ec20b-26e8-4634-9bc8-a059fbd4a208"
    trace_id: "00c7e84c-063c-4ca6-8896-16dab5e2658f"
    span_id: "040557990295334b"
[00:20:17 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "99d00468-82ca-470f-9d84-154f5e45c389"
    trace_id: "d9cdc1ed-aeb8-4867-8b2a-8cc1bd7384aa"
    span_id: "41e2072a54ea1091"
[00:20:17 UTC] [32mINFO[39m (orchestrator): [36mCreating workflow - Full request details[39m
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [32mINFO[39m (orchestrator): [36mWorkflow created[39m
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [32mINFO[39m (orchestrator): [36mWorkflow state transition[39m
[00:20:17 UTC] [32mINFO[39m (orchestrator): [36m[EB:PUBLISHED] Event published to Redis[39m
[00:20:17 UTC] [32mINFO[39m (orchestrator): [36müîç [WORKFLOW-TRACE] Workflow created[39m
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 CAS] Workflow updated successfully (CAS check passed)[39m
[00:20:17 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #79] Workflow status updated to running[39m
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [33mWARN[39m (orchestrator): [36m[SESSION #64 CAS] Optimistic lock failure - concurrent update detected[39m
[00:20:17 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 RETRY] Retrying after concurrency conflict[39m
[00:20:17 UTC] [32mINFO[39m (orchestrator): [36müîç [SESSION #65] Building AgentEnvelope v2.0.0[39m
[00:20:17 UTC] [32mINFO[39m (orchestrator): [36m[DEBUG] Built envelope - pre-publish verification[39m
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Agent envelope created[39m
[00:20:17 UTC] [32mINFO[39m (orchestrator): [36m[EB:PUBLISHED] Event published to Redis[39m
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
[00:20:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:17 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 CAS] Workflow updated successfully (CAS check passed)[39m
[00:20:17 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #26] Workflow stage updated successfully[39m
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE 1=1 ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13) OFFSET $14
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows",status_code="200"}: 10
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows"}: 5314
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
{"ts":"2025-11-18T00:20:22.805Z","scope":"redis-bus","msg":"Mirrored to stream","level":"INFO","topic":"agent:scaffold:tasks","stream":"stream:agent:scaffold:tasks"}
{"ts":"2025-11-18T00:20:22.805Z","scope":"redis-bus","msg":"[SESSION #63] Published to stream only (pub/sub disabled)","level":"INFO","topic":"agent:scaffold:tasks","stream":"stream:agent:scaffold:tasks"}
[METRIC] workflow.creation{type="app"}: 4940
[METRIC] workflows.created{type="app"}: 1
[METRIC] http_request_duration_ms{method="POST",path="/api/v1/workflows",status_code="200"}: 4950
[METRIC] http_responses_total{method="POST",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="POST",path="/api/v1/workflows"}: 451
[00:20:22 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "6f2550ff-0cf8-4bd2-84e1-2acd4f3c8481"
    trace_id: "64ae56a1-8e50-4c0c-88b3-ec1aad64bc2d"
    span_id: "08f6f6850a59bd12"
[00:20:22 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:22 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:22 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "6f2550ff-0cf8-4bd2-84e1-2acd4f3c8481"
    trace_id: "64ae56a1-8e50-4c0c-88b3-ec1aad64bc2d"
    span_id: "08f6f6850a59bd12"
[00:20:22 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-3] Task dispatched via message bus[39m
[00:20:22 UTC] [32mINFO[39m (orchestrator): [36müîç [WORKFLOW-TRACE] Task created and published[39m
[00:20:22 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "99d00468-82ca-470f-9d84-154f5e45c389"
    trace_id: "d9cdc1ed-aeb8-4867-8b2a-8cc1bd7384aa"
    span_id: "41e2072a54ea1091"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE 1=1 ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13) OFFSET $14
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows",status_code="200"}: 9
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows"}: 5314
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:20:27 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "b0d70ad5-bcb8-40b1-b7ae-52d64476e884"
    trace_id: "ef49b3a4-1aac-4829-97c2-b82b054121c2"
    span_id: "4e83f972001ad334"
[00:20:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:27 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "b0d70ad5-bcb8-40b1-b7ae-52d64476e884"
    trace_id: "ef49b3a4-1aac-4829-97c2-b82b054121c2"
    span_id: "4e83f972001ad334"
[METRIC] http_requests_total{method="POST",path="/api/v1/workflows"}: 1
prisma:query BEGIN
prisma:query INSERT INTO "public"."Workflow" ("id","type","name","description","requirements","status","current_stage","priority","progress","version","stage_outputs","trace_id","current_span_id","created_at","updated_at","created_by") VALUES ($1,CAST($2::text AS "public"."WorkflowType"),$3,$4,$5,CAST($6::text AS "public"."WorkflowStatus"),$7,CAST($8::text AS "public"."Priority"),$9,$10,$11,$12,$13,$14,$15,$16) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query INSERT INTO "public"."WorkflowEvent" ("id","workflow_id","event_type","payload","timestamp","trace_id") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id"
prisma:query INSERT INTO "public"."WorkflowStage" ("status","retry_count","name","id","workflow_id") VALUES (CAST($1::text AS "public"."StageStatus"),$2,$3,$4,$5), (CAST($6::text AS "public"."StageStatus"),$7,$8,$9,$10), (CAST($11::text AS "public"."StageStatus"),$12,$13,$14,$15), (CAST($16::text AS "public"."StageStatus"),$17,$18,$19,$20), (CAST($21::text AS "public"."StageStatus"),$22,$23,$24,$25), (CAST($26::text AS "public"."StageStatus"),$27,$28,$29,$30), (CAST($31::text AS "public"."StageStatus"),$32,$33,$34,$35)
prisma:query COMMIT
{"ts":"2025-11-18T00:20:32.413Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:5c42767e-353b-42d8-9e32-467b40a78774","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:20:32.413Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"5c42767e-353b-42d8-9e32-467b40a78774","current_stage":"initialization","status":"running","progress":0}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query UPDATE "public"."Workflow" SET "status" = CAST($1::text AS "public"."WorkflowStatus"), "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:error 
Invalid `this.prisma.workflow.update()` invocation in
/Users/Greg/Projects/apps/zyp/agent-sdlc/packages/orchestrator/src/repositories/workflow.repository.ts:173:52

  170 const currentVersion = existing.version;
  171 
  172 try {
‚Üí 173   const updated = await this.prisma.workflow.update(
An operation failed because it depends on one or more records that were required but not found. Record to update not found.
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query INSERT INTO "public"."AgentTask" ("id","task_id","workflow_id","agent_type","status","priority","payload","trace_id","span_id","parent_span_id","assigned_at","retry_count","max_retries","timeout_ms") VALUES ($1,$2,$3,CAST($4::text AS "public"."AgentType"),CAST($5::text AS "public"."TaskStatus"),CAST($6::text AS "public"."Priority"),$7,$8,$9,$10,$11,$12,$13,$14) RETURNING "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE 1=1 ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14) OFFSET $15
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows",status_code="200"}: 11
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows"}: 5712
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
{"ts":"2025-11-18T00:20:32.906Z","scope":"redis-bus","msg":"Mirrored to stream","level":"INFO","topic":"agent:scaffold:tasks","stream":"stream:agent:scaffold:tasks"}
{"ts":"2025-11-18T00:20:32.907Z","scope":"redis-bus","msg":"[SESSION #63] Published to stream only (pub/sub disabled)","level":"INFO","topic":"agent:scaffold:tasks","stream":"stream:agent:scaffold:tasks"}
[METRIC] workflow.creation{type="app"}: 503
[METRIC] workflows.created{type="app"}: 1
[METRIC] http_request_duration_ms{method="POST",path="/api/v1/workflows",status_code="200"}: 505
[METRIC] http_responses_total{method="POST",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="POST",path="/api/v1/workflows"}: 431
[DEBUG-STREAM] XREADGROUP returned { hasResults: true, resultsLength: 1, resultsType: 'object' }
[DEBUG-STREAM] Processing results { count: 1 }
{"ts":"2025-11-18T00:20:32.912Z","scope":"redis-bus","msg":"[PHASE-3] Processing message from stream","level":"INFO","streamKey":"stream:orchestrator:results","messageId":"1763425232910-0","unwrapPath":"messageData.payload.msg","workflow_id":"2af61467-1348-4c7f-9c8a-4516fd0c6af6","task_id":"12368f4a-dcb6-476f-862b-a5d517fde00e","messageKeys":"task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage"}
[DEBUG-STREAM] Checking handlers {
  topic: 'orchestrator:results',
  hasHandlers: true,
  handlerCount: 1,
  subscriptionsKeys: 'orchestrator:results'
}
[DEBUG-STREAM] About to invoke handlers { count: 1 }
[DEBUG-STATE-MACHINE-1] Raw message received from orchestrator:results {
  message_type: 'object',
  message_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage',
  has_workflow_id: true,
  has_stage: true,
  has_success: true
}
[DEBUG-STATE-MACHINE-2] AgentResult structure {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  task_id: '12368f4a-dcb6-476f-862b-a5d517fde00e',
  agent_id: 'scaffold-fb881bdb',
  success: true,
  status: 'success',
  stage: 'initialization',
  has_result: true,
  all_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage'
}
[DEBUG-STATE-MACHINE-3] Looking up state machine {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  machines_count: 2,
  machine_exists: true
}
[DEBUG-STATE-MACHINE-4] State machine found, checking success {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  success: true,
  status: 'success'
}
[DEBUG-STATE-MACHINE-5] Result is successful, preparing STAGE_COMPLETE {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  stage_from_message: 'initialization',
  task_id: '12368f4a-dcb6-476f-862b-a5d517fde00e'
}
[DEBUG-TASK-CREATE-1] taskCreator exists, attempting to create next task {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  completed_stage: 'initialization'
}
[DEBUG-TASK-CREATE-2] Calling waitForStageTransition {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  completed_stage: 'initialization'
}
{"ts":"2025-11-18T00:20:32.916Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:2af61467-1348-4c7f-9c8a-4516fd0c6af6","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:20:32.916Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"2af61467-1348-4c7f-9c8a-4516fd0c6af6","current_stage":"initialization","status":"running","progress":15}
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
{"ts":"2025-11-18T00:20:32.926Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:2af61467-1348-4c7f-9c8a-4516fd0c6af6","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:20:32.926Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"2af61467-1348-4c7f-9c8a-4516fd0c6af6","current_stage":"scaffolding","status":"running","progress":15}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[DEBUG-TASK-CREATE-3] waitForStageTransition returned {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  workflow_found: true,
  current_stage: 'scaffolding',
  status: 'running'
}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query INSERT INTO "public"."AgentTask" ("id","task_id","workflow_id","agent_type","status","priority","payload","trace_id","span_id","parent_span_id","assigned_at","retry_count","max_retries","timeout_ms") VALUES ($1,$2,$3,CAST($4::text AS "public"."AgentType"),CAST($5::text AS "public"."TaskStatus"),CAST($6::text AS "public"."Priority"),$7,$8,$9,$10,$11,$12,$13,$14) RETURNING "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms"
{"ts":"2025-11-18T00:20:33.026Z","scope":"redis-bus","msg":"Mirrored to stream","level":"INFO","topic":"agent:scaffold:tasks","stream":"stream:agent:scaffold:tasks"}
{"ts":"2025-11-18T00:20:33.026Z","scope":"redis-bus","msg":"[SESSION #63] Published to stream only (pub/sub disabled)","level":"INFO","topic":"agent:scaffold:tasks","stream":"stream:agent:scaffold:tasks"}
[DEBUG-STREAM] Handlers completed successfully
[DEBUG-STREAM] Message ACKed { messageId: '1763425232910-0' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "78ebdc92-f6d0-4624-a9e0-bbfe3de823cd"
    trace_id: "863157c5-86d3-46bc-aa13-b489d14e97b8"
    span_id: "5455bb00cda4fcda"
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36mCreating workflow - Full request details[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36mWorkflow created[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36mWorkflow state transition[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36m[EB:PUBLISHED] Event published to Redis[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36müîç [WORKFLOW-TRACE] Workflow created[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 CAS] Workflow updated successfully (CAS check passed)[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #79] Workflow status updated to running[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [33mWARN[39m (orchestrator): [36m[SESSION #64 CAS] Optimistic lock failure - concurrent update detected[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 RETRY] Retrying after concurrency conflict[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36müîç [SESSION #65] Building AgentEnvelope v2.0.0[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36m[DEBUG] Built envelope - pre-publish verification[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Agent envelope created[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36m[EB:PUBLISHED] Event published to Redis[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 CAS] Workflow updated successfully (CAS check passed)[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #26] Workflow stage updated successfully[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "9a4604a5-fd50-4dab-90af-d55c9207b13e"
    trace_id: "1992e97b-2e65-404c-814d-b014daa773f3"
    span_id: "c75f66253a5f04c4"
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "9a4604a5-fd50-4dab-90af-d55c9207b13e"
    trace_id: "1992e97b-2e65-404c-814d-b014daa773f3"
    span_id: "c75f66253a5f04c4"
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-3] Task dispatched via message bus[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36müîç [WORKFLOW-TRACE] Task created and published[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "78ebdc92-f6d0-4624-a9e0-bbfe3de823cd"
    trace_id: "863157c5-86d3-46bc-aa13-b489d14e97b8"
    span_id: "5455bb00cda4fcda"
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine received agent result[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] Sending STAGE_COMPLETE to state machine[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36mStage completed[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mComputing next stage from current stage[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36mStage transition computed[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Evaluating state entered (nextStage pre-computed)[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service executing[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service completed[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Transitioning to next stage (ABSOLUTE assignment)[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Context updated in memory (ABSOLUTE)[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 CAS] Workflow updated successfully (CAS check passed)[39m
[00:20:32 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Database persisted[39m
[00:20:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:33 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Stage transition detected[39m
[00:20:33 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Creating task for next stage after STAGE_COMPLETE[39m
[00:20:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:33 UTC] [32mINFO[39m (orchestrator): [36müîç [SESSION #65] Building AgentEnvelope v2.0.0[39m
[00:20:33 UTC] [32mINFO[39m (orchestrator): [36m[DEBUG] Built envelope - pre-publish verification[39m
[00:20:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:33 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Agent envelope created[39m
[00:20:33 UTC] [32mINFO[39m (orchestrator): [36m[EB:PUBLISHED] Event published to Redis[39m
[00:20:33 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-3] Task dispatched via message bus[39m
[00:20:33 UTC] [32mINFO[39m (orchestrator): [36müîç [WORKFLOW-TRACE] Task created and published[39m
[00:20:33 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Task created successfully for next stage[39m
[00:20:33 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine event sent autonomously[39m
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE 1=1 ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14) OFFSET $15
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows",status_code="200"}: 3
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows"}: 5709
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:20:37 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "61469505-55d0-45ef-8e64-5a688b99f73b"
    trace_id: "813c60b6-9574-46c3-8061-0e37b8be9f00"
    span_id: "fd1d1a5fd59ad1d0"
[00:20:37 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:37 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:37 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "61469505-55d0-45ef-8e64-5a688b99f73b"
    trace_id: "813c60b6-9574-46c3-8061-0e37b8be9f00"
    span_id: "fd1d1a5fd59ad1d0"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 397
[00:20:38 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "3d564b3a-f6ec-4170-a3c1-0bfdfc32ec36"
    trace_id: "4a39b59a-ba6b-4ca4-a8cd-f44196337ab2"
    span_id: "cc380cf67609836c"
[00:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:38 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "3d564b3a-f6ec-4170-a3c1-0bfdfc32ec36"
    trace_id: "4a39b59a-ba6b-4ca4-a8cd-f44196337ab2"
    span_id: "cc380cf67609836c"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 397
[00:20:41 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "8049e2bd-824e-4b97-9afa-0e622683fe9d"
    trace_id: "7d88a17f-2fff-44b1-b91b-1399f20e7f90"
    span_id: "3ba306fd61143b9f"
[00:20:41 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:41 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:41 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:41 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:41 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "8049e2bd-824e-4b97-9afa-0e622683fe9d"
    trace_id: "7d88a17f-2fff-44b1-b91b-1399f20e7f90"
    span_id: "3ba306fd61143b9f"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE 1=1 ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14) OFFSET $15
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows"}: 5709
[DEBUG-STREAM] XREADGROUP returned { hasResults: true, resultsLength: 1, resultsType: 'object' }
[DEBUG-STREAM] Processing results { count: 1 }
{"ts":"2025-11-18T00:20:43.022Z","scope":"redis-bus","msg":"[PHASE-3] Processing message from stream","level":"INFO","streamKey":"stream:orchestrator:results","messageId":"1763425243019-0","unwrapPath":"messageData.payload.msg","workflow_id":"5c42767e-353b-42d8-9e32-467b40a78774","task_id":"eeb8216a-2bbd-4ab9-810d-8a51119869d7","messageKeys":"task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage"}
[DEBUG-STREAM] Checking handlers {
  topic: 'orchestrator:results',
  hasHandlers: true,
  handlerCount: 1,
  subscriptionsKeys: 'orchestrator:results'
}
[DEBUG-STREAM] About to invoke handlers { count: 1 }
[DEBUG-STATE-MACHINE-1] Raw message received from orchestrator:results {
  message_type: 'object',
  message_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage',
  has_workflow_id: true,
  has_stage: true,
  has_success: true
}
[DEBUG-STATE-MACHINE-2] AgentResult structure {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  task_id: 'eeb8216a-2bbd-4ab9-810d-8a51119869d7',
  agent_id: 'scaffold-fb881bdb',
  success: true,
  status: 'success',
  stage: 'initialization',
  has_result: true,
  all_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage'
}
[DEBUG-STATE-MACHINE-3] Looking up state machine {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  machines_count: 2,
  machine_exists: true
}
[DEBUG-STATE-MACHINE-4] State machine found, checking success {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  success: true,
  status: 'success'
}
[DEBUG-STATE-MACHINE-5] Result is successful, preparing STAGE_COMPLETE {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  stage_from_message: 'initialization',
  task_id: 'eeb8216a-2bbd-4ab9-810d-8a51119869d7'
}
[DEBUG-TASK-CREATE-1] taskCreator exists, attempting to create next task {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  completed_stage: 'initialization'
}
[DEBUG-TASK-CREATE-2] Calling waitForStageTransition {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  completed_stage: 'initialization'
}
{"ts":"2025-11-18T00:20:43.029Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:5c42767e-353b-42d8-9e32-467b40a78774","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:20:43.029Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"5c42767e-353b-42d8-9e32-467b40a78774","current_stage":"initialization","status":"running","progress":15}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
{"ts":"2025-11-18T00:20:43.039Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:5c42767e-353b-42d8-9e32-467b40a78774","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:20:43.039Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"5c42767e-353b-42d8-9e32-467b40a78774","current_stage":"scaffolding","status":"running","progress":15}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[DEBUG-TASK-CREATE-3] waitForStageTransition returned {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  workflow_found: true,
  current_stage: 'scaffolding',
  status: 'running'
}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query INSERT INTO "public"."AgentTask" ("id","task_id","workflow_id","agent_type","status","priority","payload","trace_id","span_id","parent_span_id","assigned_at","retry_count","max_retries","timeout_ms") VALUES ($1,$2,$3,CAST($4::text AS "public"."AgentType"),CAST($5::text AS "public"."TaskStatus"),CAST($6::text AS "public"."Priority"),$7,$8,$9,$10,$11,$12,$13,$14) RETURNING "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms"
{"ts":"2025-11-18T00:20:43.155Z","scope":"redis-bus","msg":"Mirrored to stream","level":"INFO","topic":"agent:scaffold:tasks","stream":"stream:agent:scaffold:tasks"}
{"ts":"2025-11-18T00:20:43.155Z","scope":"redis-bus","msg":"[SESSION #63] Published to stream only (pub/sub disabled)","level":"INFO","topic":"agent:scaffold:tasks","stream":"stream:agent:scaffold:tasks"}
[DEBUG-STREAM] Handlers completed successfully
[DEBUG-STREAM] Message ACKed { messageId: '1763425243019-0' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 394
[00:20:42 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "d0c905fb-1ac0-4130-a5d5-6804215a6730"
    trace_id: "3f26d2ac-3fb3-413b-b2eb-897700a85625"
    span_id: "089eb00a1905d0c0"
[00:20:42 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:42 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:42 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "d0c905fb-1ac0-4130-a5d5-6804215a6730"
    trace_id: "3f26d2ac-3fb3-413b-b2eb-897700a85625"
    span_id: "089eb00a1905d0c0"
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine received agent result[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] Sending STAGE_COMPLETE to state machine[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36mStage completed[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mComputing next stage from current stage[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36mStage transition computed[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Evaluating state entered (nextStage pre-computed)[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service executing[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service completed[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Transitioning to next stage (ABSOLUTE assignment)[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Context updated in memory (ABSOLUTE)[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 CAS] Workflow updated successfully (CAS check passed)[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Database persisted[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Stage transition detected[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Creating task for next stage after STAGE_COMPLETE[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36müîç [SESSION #65] Building AgentEnvelope v2.0.0[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36m[DEBUG] Built envelope - pre-publish verification[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Agent envelope created[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36m[EB:PUBLISHED] Event published to Redis[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-3] Task dispatched via message bus[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36müîç [WORKFLOW-TRACE] Task created and published[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Task created successfully for next stage[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine event sent autonomously[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "900d250b-6b0b-4ccf-a3c2-cd121644098e"
    trace_id: "e24507fe-617a-4923-8a4e-a82f8e785e91"
    span_id: "8462145670434ac5"
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "900d250b-6b0b-4ccf-a3c2-cd121644098e"
    trace_id: "e24507fe-617a-4923-8a4e-a82f8e785e91"
    span_id: "8462145670434ac5"
[METRIC] http_requests_total{method="GET",path="/api/v1/platforms"}: 1
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/platforms",status_code="200"}: 1
[METRIC] http_responses_total{method="GET",path="/api/v1/platforms",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/platforms"}: 2
[METRIC] http_requests_total{method="GET",path="/api/v1/platforms"}: 1
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/platforms",status_code="200"}: 0
[METRIC] http_responses_total{method="GET",path="/api/v1/platforms",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/platforms"}: 2
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "e7cf3852-ae6a-4a8b-be5c-823c77bbc38a"
    trace_id: "d03ecfc1-266a-4095-8536-209984895008"
    span_id: "e7a27959943bb693"
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "e7cf3852-ae6a-4a8b-be5c-823c77bbc38a"
    trace_id: "d03ecfc1-266a-4095-8536-209984895008"
    span_id: "e7a27959943bb693"
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "3036fecf-8254-4734-9e6f-124d3401fe4e"
    trace_id: "5154fcfc-6507-43bc-926b-32fd197a2c15"
    span_id: "1ed899b9010804ed"
[00:20:43 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "3036fecf-8254-4734-9e6f-124d3401fe4e"
    trace_id: "5154fcfc-6507-43bc-926b-32fd197a2c15"
    span_id: "1ed899b9010804ed"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 394
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/overview"}: 1
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows"}: 1
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/timeseries"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."status" = CAST($1::text AS "public"."WorkflowStatus") ORDER BY "public"."Workflow"."created_at" DESC OFFSET $2
prisma:query SELECT COUNT("public"."Workflow"."id"), "public"."Workflow"."status"::text FROM "public"."Workflow" WHERE 1=1 GROUP BY "public"."Workflow"."status" OFFSET $1
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/overview",status_code="200"}: 3
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/overview",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/overview"}: 229
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/timeseries",status_code="200"}: 2
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/timeseries",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/timeseries"}: 205
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."created_at" FROM "public"."Workflow" WHERE "public"."Workflow"."created_at" >= $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1,$2,$3,$4) OFFSET $5
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows",status_code="200"}: 3
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows"}: 1605
[00:20:45 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "b7a56ce7-b299-4420-8f22-58a22e3290b8"
    trace_id: "8aad2c17-d5b6-4666-bd4d-bc9a7484a79d"
    span_id: "c19019c573609bda"
[00:20:45 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:45 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:45 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:45 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:45 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "b7a56ce7-b299-4420-8f22-58a22e3290b8"
    trace_id: "8aad2c17-d5b6-4666-bd4d-bc9a7484a79d"
    span_id: "c19019c573609bda"
[00:20:45 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "8764338e-fd08-453e-8d2c-644ba279182b"
    trace_id: "22e0b67b-50a7-452a-88e9-02e5215bd8a2"
    span_id: "dc9d9182676da6ab"
[00:20:45 UTC] [34mDEBUG[39m (orchestrator): [36mGetting dashboard overview[39m
[00:20:45 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "01279712-5974-4b41-bb28-65282f7ee9fe"
    trace_id: "54ed564e-4750-4ab2-9308-21d5a53e7d10"
    span_id: "b887c84aa94f4401"
[00:20:45 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "74515de0-fbc6-4f83-937c-3a85f4033bb4"
    trace_id: "ec120ef6-869f-4218-a5fd-dbfe60287a47"
    span_id: "2dde2a234e5ab65a"
[00:20:45 UTC] [34mDEBUG[39m (orchestrator): [36mGetting time series data[39m
[00:20:45 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:45 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:45 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:45 UTC] [34mDEBUG[39m (orchestrator): [36mOverview stats retrieved[39m
[00:20:45 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "8764338e-fd08-453e-8d2c-644ba279182b"
    trace_id: "22e0b67b-50a7-452a-88e9-02e5215bd8a2"
    span_id: "dc9d9182676da6ab"
[00:20:45 UTC] [34mDEBUG[39m (orchestrator): [36mTime series data retrieved[39m
[00:20:45 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "74515de0-fbc6-4f83-937c-3a85f4033bb4"
    trace_id: "ec120ef6-869f-4218-a5fd-dbfe60287a47"
    span_id: "2dde2a234e5ab65a"
[00:20:45 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:45 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:45 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "01279712-5974-4b41-bb28-65282f7ee9fe"
    trace_id: "54ed564e-4750-4ab2-9308-21d5a53e7d10"
    span_id: "b887c84aa94f4401"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 394
[00:20:47 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "dc9d430b-4cd0-44c6-bbe3-a6c251221526"
    trace_id: "273fe266-187d-4907-b079-034dbaa61e57"
    span_id: "cd8e6faff4e2709b"
[00:20:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:47 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "dc9d430b-4cd0-44c6-bbe3-a6c251221526"
    trace_id: "273fe266-187d-4907-b079-034dbaa61e57"
    span_id: "cd8e6faff4e2709b"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE 1=1 ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14) OFFSET $15
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows"}: 5706
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 394
[00:20:49 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "ec92ed97-9934-4481-9ed1-380b733f0a8c"
    trace_id: "1ed1926c-6363-4f8c-a1c7-28652f203eee"
    span_id: "4a9aa2f71200063c"
[00:20:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:49 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "ec92ed97-9934-4481-9ed1-380b733f0a8c"
    trace_id: "1ed1926c-6363-4f8c-a1c7-28652f203eee"
    span_id: "4a9aa2f71200063c"
[00:20:49 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "df25cff7-0aa7-47c1-a2ba-b3dd083d3537"
    trace_id: "eaba244e-2e4b-4da5-bea3-78a0e8f4d4af"
    span_id: "7b987742fd3df1ed"
[00:20:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:49 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "df25cff7-0aa7-47c1-a2ba-b3dd083d3537"
    trace_id: "eaba244e-2e4b-4da5-bea3-78a0e8f4d4af"
    span_id: "7b987742fd3df1ed"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 394
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/overview"}: 1
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows"}: 1
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/timeseries"}: 1
prisma:query SELECT 1
prisma:query SELECT COUNT("public"."Workflow"."id"), "public"."Workflow"."status"::text FROM "public"."Workflow" WHERE 1=1 GROUP BY "public"."Workflow"."status" OFFSET $1
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/overview",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/overview",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/overview"}: 229
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."status" = CAST($1::text AS "public"."WorkflowStatus") ORDER BY "public"."Workflow"."created_at" DESC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."created_at" FROM "public"."Workflow" WHERE "public"."Workflow"."created_at" >= $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/timeseries",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/timeseries",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/timeseries"}: 205
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1,$2,$3,$4) OFFSET $5
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows"}: 1605
[00:20:51 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "30285452-ae7f-4eeb-89be-de5c4cee4b51"
    trace_id: "9ee6e4eb-9b2d-49bb-975a-0104f7bd47e1"
    span_id: "1dcaa51c423e3d6a"
[00:20:51 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:51 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:51 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:51 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:51 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "30285452-ae7f-4eeb-89be-de5c4cee4b51"
    trace_id: "9ee6e4eb-9b2d-49bb-975a-0104f7bd47e1"
    span_id: "1dcaa51c423e3d6a"
[00:20:52 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "54d7061a-bb12-496f-b703-5a6529ea261c"
    trace_id: "90e2bd7b-7bda-4c47-9216-173e741e83bf"
    span_id: "65159727541760c6"
[00:20:52 UTC] [34mDEBUG[39m (orchestrator): [36mGetting dashboard overview[39m
[00:20:52 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "f22b5101-78e0-4d52-aa9f-956114a87f91"
    trace_id: "82edb30d-1e05-455d-92af-6f3d21fb4f94"
    span_id: "a60efaca5cdefae6"
[00:20:52 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "b2f49e75-0d52-44f1-a748-225e969709f8"
    trace_id: "c17fd8a7-2f8d-4c2d-9273-b61ca04829e9"
    span_id: "dd8d05b7992c5a1e"
[00:20:52 UTC] [34mDEBUG[39m (orchestrator): [36mGetting time series data[39m
[00:20:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:52 UTC] [34mDEBUG[39m (orchestrator): [36mOverview stats retrieved[39m
[00:20:52 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "54d7061a-bb12-496f-b703-5a6529ea261c"
    trace_id: "90e2bd7b-7bda-4c47-9216-173e741e83bf"
    span_id: "65159727541760c6"
[00:20:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:52 UTC] [34mDEBUG[39m (orchestrator): [36mTime series data retrieved[39m
[00:20:52 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "b2f49e75-0d52-44f1-a748-225e969709f8"
    trace_id: "c17fd8a7-2f8d-4c2d-9273-b61ca04829e9"
    span_id: "dd8d05b7992c5a1e"
[00:20:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:52 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "f22b5101-78e0-4d52-aa9f-956114a87f91"
    trace_id: "82edb30d-1e05-455d-92af-6f3d21fb4f94"
    span_id: "a60efaca5cdefae6"
[DEBUG-STREAM] XREADGROUP returned { hasResults: true, resultsLength: 1, resultsType: 'object' }
[DEBUG-STREAM] Processing results { count: 1 }
{"ts":"2025-11-18T00:20:53.134Z","scope":"redis-bus","msg":"[PHASE-3] Processing message from stream","level":"INFO","streamKey":"stream:orchestrator:results","messageId":"1763425253131-0","unwrapPath":"messageData.payload.msg","workflow_id":"2af61467-1348-4c7f-9c8a-4516fd0c6af6","task_id":"3f61feeb-c50b-46b2-9159-4909b78d911a","messageKeys":"task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage"}
[DEBUG-STREAM] Checking handlers {
  topic: 'orchestrator:results',
  hasHandlers: true,
  handlerCount: 1,
  subscriptionsKeys: 'orchestrator:results'
}
[DEBUG-STREAM] About to invoke handlers { count: 1 }
[DEBUG-STATE-MACHINE-1] Raw message received from orchestrator:results {
  message_type: 'object',
  message_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage',
  has_workflow_id: true,
  has_stage: true,
  has_success: true
}
[DEBUG-STATE-MACHINE-2] AgentResult structure {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  task_id: '3f61feeb-c50b-46b2-9159-4909b78d911a',
  agent_id: 'scaffold-fb881bdb',
  success: true,
  status: 'success',
  stage: 'scaffolding',
  has_result: true,
  all_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage'
}
[DEBUG-STATE-MACHINE-3] Looking up state machine {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  machines_count: 2,
  machine_exists: true
}
[DEBUG-STATE-MACHINE-4] State machine found, checking success {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  success: true,
  status: 'success'
}
[DEBUG-STATE-MACHINE-5] Result is successful, preparing STAGE_COMPLETE {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  stage_from_message: 'scaffolding',
  task_id: '3f61feeb-c50b-46b2-9159-4909b78d911a'
}
[DEBUG-TASK-CREATE-1] taskCreator exists, attempting to create next task {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  completed_stage: 'scaffolding'
}
[DEBUG-TASK-CREATE-2] Calling waitForStageTransition {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  completed_stage: 'scaffolding'
}
{"ts":"2025-11-18T00:20:53.139Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:2af61467-1348-4c7f-9c8a-4516fd0c6af6","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:20:53.140Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"2af61467-1348-4c7f-9c8a-4516fd0c6af6","current_stage":"scaffolding","status":"running","progress":30}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
{"ts":"2025-11-18T00:20:53.150Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:2af61467-1348-4c7f-9c8a-4516fd0c6af6","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:20:53.150Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"2af61467-1348-4c7f-9c8a-4516fd0c6af6","current_stage":"dependency_installation","status":"running","progress":30}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[DEBUG-TASK-CREATE-3] waitForStageTransition returned {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  workflow_found: true,
  current_stage: 'dependency_installation',
  status: 'running'
}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query INSERT INTO "public"."AgentTask" ("id","task_id","workflow_id","agent_type","status","priority","payload","trace_id","span_id","parent_span_id","assigned_at","retry_count","max_retries","timeout_ms") VALUES ($1,$2,$3,CAST($4::text AS "public"."AgentType"),CAST($5::text AS "public"."TaskStatus"),CAST($6::text AS "public"."Priority"),$7,$8,$9,$10,$11,$12,$13,$14) RETURNING "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms"
{"ts":"2025-11-18T00:20:53.270Z","scope":"redis-bus","msg":"Mirrored to stream","level":"INFO","topic":"agent:scaffold:tasks","stream":"stream:agent:scaffold:tasks"}
{"ts":"2025-11-18T00:20:53.270Z","scope":"redis-bus","msg":"[SESSION #63] Published to stream only (pub/sub disabled)","level":"INFO","topic":"agent:scaffold:tasks","stream":"stream:agent:scaffold:tasks"}
[DEBUG-STREAM] Handlers completed successfully
[DEBUG-STREAM] Message ACKed { messageId: '1763425253131-0' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine received agent result[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] Sending STAGE_COMPLETE to state machine[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36mStage completed[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mComputing next stage from current stage[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36mStage transition computed[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Evaluating state entered (nextStage pre-computed)[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service executing[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service completed[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Transitioning to next stage (ABSOLUTE assignment)[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Context updated in memory (ABSOLUTE)[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 CAS] Workflow updated successfully (CAS check passed)[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Database persisted[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Stage transition detected[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Creating task for next stage after STAGE_COMPLETE[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36müîç [SESSION #65] Building AgentEnvelope v2.0.0[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36m[DEBUG] Built envelope - pre-publish verification[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Agent envelope created[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36m[EB:PUBLISHED] Event published to Redis[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-3] Task dispatched via message bus[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36müîç [WORKFLOW-TRACE] Task created and published[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Task created successfully for next stage[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine event sent autonomously[39m
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 394
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "58294dac-94e3-4b28-9068-3e65815653c0"
    trace_id: "d11901f3-3138-4cd5-ab8c-5347e82398ad"
    span_id: "066fbb5dd464692b"
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:53 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "58294dac-94e3-4b28-9068-3e65815653c0"
    trace_id: "d11901f3-3138-4cd5-ab8c-5347e82398ad"
    span_id: "066fbb5dd464692b"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 394
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE 1=1 ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14) OFFSET $15
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows"}: 5718
[00:20:55 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "8193c086-0c12-4950-bbb3-b22e998f2999"
    trace_id: "c7067555-653f-47c3-a3cb-4d49d4fe4071"
    span_id: "c7097257940c9faf"
[00:20:55 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:55 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:55 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:55 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:55 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "8193c086-0c12-4950-bbb3-b22e998f2999"
    trace_id: "c7067555-653f-47c3-a3cb-4d49d4fe4071"
    span_id: "c7097257940c9faf"
[00:20:56 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "f1b2921b-bfad-43db-bb91-b61a7d9e2eea"
    trace_id: "cfda8403-2d7b-473f-901f-3f1a7002c5b3"
    span_id: "6dac0348e542736f"
[00:20:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:56 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "f1b2921b-bfad-43db-bb91-b61a7d9e2eea"
    trace_id: "cfda8403-2d7b-473f-901f-3f1a7002c5b3"
    span_id: "6dac0348e542736f"
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/overview"}: 1
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows"}: 1
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/timeseries"}: 1
prisma:query SELECT COUNT("public"."Workflow"."id"), "public"."Workflow"."status"::text FROM "public"."Workflow" WHERE 1=1 GROUP BY "public"."Workflow"."status" OFFSET $1
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/overview",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/overview",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/overview"}: 229
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/timeseries",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/timeseries",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/timeseries"}: 205
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."created_at" FROM "public"."Workflow" WHERE "public"."Workflow"."created_at" >= $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."status" = CAST($1::text AS "public"."WorkflowStatus") ORDER BY "public"."Workflow"."created_at" DESC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1,$2,$3,$4) OFFSET $5
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows"}: 1617
[00:20:57 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "5b855680-eac8-4875-8b35-4f4efe0f6e78"
    trace_id: "fbbe50c8-b73f-4cfb-a040-7fdea4082e27"
    span_id: "df9924a4ce2e5df8"
[00:20:57 UTC] [34mDEBUG[39m (orchestrator): [36mGetting dashboard overview[39m
[00:20:57 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "a8bad94a-8708-4d06-a87d-578db35480ec"
    trace_id: "b5617fda-854c-4fe1-8114-f81f915f23bb"
    span_id: "16c885ecdeaefc89"
[00:20:57 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "4dd08ac6-6549-4277-96bc-c477c32e708a"
    trace_id: "f8cda17e-53ba-488b-90d2-7d2ce7292f24"
    span_id: "9b5ff3c7f0a55810"
[00:20:57 UTC] [34mDEBUG[39m (orchestrator): [36mGetting time series data[39m
[00:20:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:57 UTC] [34mDEBUG[39m (orchestrator): [36mOverview stats retrieved[39m
[00:20:57 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "5b855680-eac8-4875-8b35-4f4efe0f6e78"
    trace_id: "fbbe50c8-b73f-4cfb-a040-7fdea4082e27"
    span_id: "df9924a4ce2e5df8"
[00:20:57 UTC] [34mDEBUG[39m (orchestrator): [36mTime series data retrieved[39m
[00:20:57 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "4dd08ac6-6549-4277-96bc-c477c32e708a"
    trace_id: "f8cda17e-53ba-488b-90d2-7d2ce7292f24"
    span_id: "9b5ff3c7f0a55810"
[00:20:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:57 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "a8bad94a-8708-4d06-a87d-578db35480ec"
    trace_id: "b5617fda-854c-4fe1-8114-f81f915f23bb"
    span_id: "16c885ecdeaefc89"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 394
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:20:57 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "601061c3-31d3-4352-92f0-dc1dc04e94dd"
    trace_id: "6b1de2f3-a6c3-4e76-a941-ea36f63d2ac1"
    span_id: "085304d882f741b1"
[00:20:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:20:57 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "601061c3-31d3-4352-92f0-dc1dc04e94dd"
    trace_id: "6b1de2f3-a6c3-4e76-a941-ea36f63d2ac1"
    span_id: "085304d882f741b1"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 394
[00:21:00 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "227f9ae5-5f2b-4f23-a58a-f1678908bc49"
    trace_id: "7251bb5d-e6b2-4056-9f25-48128059a261"
    span_id: "97527d86f1d4e5ca"
[00:21:00 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:00 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:00 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:00 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:00 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "227f9ae5-5f2b-4f23-a58a-f1678908bc49"
    trace_id: "7251bb5d-e6b2-4056-9f25-48128059a261"
    span_id: "97527d86f1d4e5ca"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 394
[00:21:02 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "8bca6d0a-20cf-4139-bb0d-4242ad112d11"
    trace_id: "fbaa4995-dd99-4343-a831-1a7415297604"
    span_id: "dd0a416571f1c2c0"
[00:21:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:02 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "8bca6d0a-20cf-4139-bb0d-4242ad112d11"
    trace_id: "fbaa4995-dd99-4343-a831-1a7415297604"
    span_id: "dd0a416571f1c2c0"
[DEBUG-STREAM] XREADGROUP returned { hasResults: true, resultsLength: 1, resultsType: 'object' }
[DEBUG-STREAM] Processing results { count: 1 }
{"ts":"2025-11-18T00:21:03.247Z","scope":"redis-bus","msg":"[PHASE-3] Processing message from stream","level":"INFO","streamKey":"stream:orchestrator:results","messageId":"1763425263243-0","unwrapPath":"messageData.payload.msg","workflow_id":"5c42767e-353b-42d8-9e32-467b40a78774","task_id":"fdbef1d6-9098-45b4-a415-ee6ea4b68c6b","messageKeys":"task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage"}
[DEBUG-STREAM] Checking handlers {
  topic: 'orchestrator:results',
  hasHandlers: true,
  handlerCount: 1,
  subscriptionsKeys: 'orchestrator:results'
}
[DEBUG-STREAM] About to invoke handlers { count: 1 }
[DEBUG-STATE-MACHINE-1] Raw message received from orchestrator:results {
  message_type: 'object',
  message_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage',
  has_workflow_id: true,
  has_stage: true,
  has_success: true
}
[DEBUG-STATE-MACHINE-2] AgentResult structure {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  task_id: 'fdbef1d6-9098-45b4-a415-ee6ea4b68c6b',
  agent_id: 'scaffold-fb881bdb',
  success: true,
  status: 'success',
  stage: 'scaffolding',
  has_result: true,
  all_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage'
}
[DEBUG-STATE-MACHINE-3] Looking up state machine {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  machines_count: 2,
  machine_exists: true
}
[DEBUG-STATE-MACHINE-4] State machine found, checking success {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  success: true,
  status: 'success'
}
[DEBUG-STATE-MACHINE-5] Result is successful, preparing STAGE_COMPLETE {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  stage_from_message: 'scaffolding',
  task_id: 'fdbef1d6-9098-45b4-a415-ee6ea4b68c6b'
}
[DEBUG-TASK-CREATE-1] taskCreator exists, attempting to create next task {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  completed_stage: 'scaffolding'
}
[DEBUG-TASK-CREATE-2] Calling waitForStageTransition {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  completed_stage: 'scaffolding'
}
{"ts":"2025-11-18T00:21:03.254Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:5c42767e-353b-42d8-9e32-467b40a78774","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:21:03.254Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"5c42767e-353b-42d8-9e32-467b40a78774","current_stage":"scaffolding","status":"running","progress":30}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
{"ts":"2025-11-18T00:21:03.264Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:5c42767e-353b-42d8-9e32-467b40a78774","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:21:03.264Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"5c42767e-353b-42d8-9e32-467b40a78774","current_stage":"dependency_installation","status":"running","progress":30}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[DEBUG-TASK-CREATE-3] waitForStageTransition returned {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  workflow_found: true,
  current_stage: 'dependency_installation',
  status: 'running'
}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query INSERT INTO "public"."AgentTask" ("id","task_id","workflow_id","agent_type","status","priority","payload","trace_id","span_id","parent_span_id","assigned_at","retry_count","max_retries","timeout_ms") VALUES ($1,$2,$3,CAST($4::text AS "public"."AgentType"),CAST($5::text AS "public"."TaskStatus"),CAST($6::text AS "public"."Priority"),$7,$8,$9,$10,$11,$12,$13,$14) RETURNING "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms"
{"ts":"2025-11-18T00:21:03.384Z","scope":"redis-bus","msg":"Mirrored to stream","level":"INFO","topic":"agent:scaffold:tasks","stream":"stream:agent:scaffold:tasks"}
{"ts":"2025-11-18T00:21:03.384Z","scope":"redis-bus","msg":"[SESSION #63] Published to stream only (pub/sub disabled)","level":"INFO","topic":"agent:scaffold:tasks","stream":"stream:agent:scaffold:tasks"}
[DEBUG-STREAM] Handlers completed successfully
[DEBUG-STREAM] Message ACKed { messageId: '1763425263243-0' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE 1=1 ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14) OFFSET $15
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows"}: 5730
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine received agent result[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] Sending STAGE_COMPLETE to state machine[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36mStage completed[39m
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mComputing next stage from current stage[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36mStage transition computed[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Evaluating state entered (nextStage pre-computed)[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service executing[39m
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service completed[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Transitioning to next stage (ABSOLUTE assignment)[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Context updated in memory (ABSOLUTE)[39m
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 CAS] Workflow updated successfully (CAS check passed)[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Database persisted[39m
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Stage transition detected[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Creating task for next stage after STAGE_COMPLETE[39m
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36müîç [SESSION #65] Building AgentEnvelope v2.0.0[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36m[DEBUG] Built envelope - pre-publish verification[39m
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Agent envelope created[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36m[EB:PUBLISHED] Event published to Redis[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-3] Task dispatched via message bus[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36müîç [WORKFLOW-TRACE] Task created and published[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Task created successfully for next stage[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine event sent autonomously[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "0e8a0bb0-857f-4280-8444-8b3e70ca0ec4"
    trace_id: "c2dd8fd6-4ebe-4c83-a808-611d2f8dacc4"
    span_id: "52e831cfc1ece849"
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:03 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "0e8a0bb0-857f-4280-8444-8b3e70ca0ec4"
    trace_id: "c2dd8fd6-4ebe-4c83-a808-611d2f8dacc4"
    span_id: "52e831cfc1ece849"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 406
[00:21:04 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "b968e46f-b33c-4aa2-b787-5641054fff02"
    trace_id: "2a6f8adc-7a83-46fb-82d8-c1015314eb7c"
    span_id: "71a6871a6537e6ab"
[00:21:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:04 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "b968e46f-b33c-4aa2-b787-5641054fff02"
    trace_id: "2a6f8adc-7a83-46fb-82d8-c1015314eb7c"
    span_id: "71a6871a6537e6ab"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 406
[00:21:06 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "151f7e02-e651-4866-abe5-ff3de48d5f03"
    trace_id: "f4941150-0af6-4e23-9ba1-9ef5b051ec0c"
    span_id: "a7d09a6cd6edbd74"
[00:21:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:06 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "151f7e02-e651-4866-abe5-ff3de48d5f03"
    trace_id: "f4941150-0af6-4e23-9ba1-9ef5b051ec0c"
    span_id: "a7d09a6cd6edbd74"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE 1=1 ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14) OFFSET $15
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows",status_code="200"}: 10
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows"}: 5730
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 406
[00:21:08 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "6f4ecea8-d743-4d94-bd07-8db5305f53dc"
    trace_id: "94388df8-2518-46ca-844e-51a05db545c6"
    span_id: "d0bb5596d48b03b8"
[00:21:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:08 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "6f4ecea8-d743-4d94-bd07-8db5305f53dc"
    trace_id: "94388df8-2518-46ca-844e-51a05db545c6"
    span_id: "d0bb5596d48b03b8"
[00:21:08 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "553de209-5b8b-45d3-90d9-f051743c4896"
    trace_id: "9d39ae26-dd54-4ffc-85f1-27b6b09c15e6"
    span_id: "f59c60631ef2984f"
[00:21:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:08 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "553de209-5b8b-45d3-90d9-f051743c4896"
    trace_id: "9d39ae26-dd54-4ffc-85f1-27b6b09c15e6"
    span_id: "f59c60631ef2984f"
[METRIC] http_requests_total{method="GET",path="/api/v1/traces"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."trace_id", "public"."Workflow"."status"::text, "public"."Workflow"."created_at", "public"."Workflow"."completed_at" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" IS NOT NULL ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/traces",status_code="200"}: 56
[METRIC] http_responses_total{method="GET",path="/api/v1/traces",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/traces"}: 3013
[00:21:09 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "0fb8ace5-998a-4541-a0fd-6d18a5a32e0c"
    trace_id: "4d692e59-f72f-473e-9ef1-dfe1685577eb"
    span_id: "07fb77a73aff2ab2"
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mListing traces[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:09 UTC] [34mDEBUG[39m (orchestrator): [36mTraces listed[39m
[00:21:09 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "0fb8ace5-998a-4541-a0fd-6d18a5a32e0c"
    trace_id: "4d692e59-f72f-473e-9ef1-dfe1685577eb"
    span_id: "07fb77a73aff2ab2"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 11
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 406
[00:21:10 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "4e0bb603-9eba-40a1-b563-75c4c42fc5e1"
    trace_id: "a2d22ce6-c91a-48a5-babf-f2846c64ab53"
    span_id: "233d32f7a69b4cd5"
[00:21:10 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:10 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:10 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:10 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:10 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "4e0bb603-9eba-40a1-b563-75c4c42fc5e1"
    trace_id: "a2d22ce6-c91a-48a5-babf-f2846c64ab53"
    span_id: "233d32f7a69b4cd5"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 406
[00:21:12 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "60f87499-29f5-48c2-8042-85073db97a79"
    trace_id: "7e1a9bc8-030f-4fa7-a691-a26706f37b16"
    span_id: "ffd0c7e54b7132b5"
[00:21:12 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:12 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:12 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:12 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:12 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "60f87499-29f5-48c2-8042-85073db97a79"
    trace_id: "7e1a9bc8-030f-4fa7-a691-a26706f37b16"
    span_id: "ffd0c7e54b7132b5"
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/agents"}: 1
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/timeseries"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."created_at" FROM "public"."Workflow" WHERE "public"."Workflow"."created_at" >= $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/timeseries",status_code="200"}: 3
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/timeseries",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/timeseries"}: 205
prisma:query 
        SELECT
          agent_type,
          COUNT(*) as total_tasks,
          COALESCE(SUM(CASE WHEN status = 'completed' THEN 1 ELSE 0 END), 0) as completed_tasks,
          COALESCE(SUM(CASE WHEN status = 'failed' THEN 1 ELSE 0 END), 0) as failed_tasks,
          COALESCE(SUM(CASE WHEN status = 'cancelled' THEN 1 ELSE 0 END), 0) as cancelled_tasks,
          AVG(EXTRACT(EPOCH FROM (completed_at - started_at)) * 1000)::float as avg_duration_ms,
          AVG(retry_count)::float as avg_retries
        FROM "AgentTask"
        WHERE agent_type IS NOT NULL
        GROUP BY agent_type
        ORDER BY total_tasks DESC
      
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/agents",status_code="200"}: 8
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/agents",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/agents"}: 294
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "feb12846-36de-49dc-af31-480ca98c8428"
    trace_id: "dbc59c15-dd96-4f62-8314-2c046653229f"
    span_id: "0f48c5c70e449667"
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mGetting agent performance stats[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "33e85771-f1c5-40b2-b280-095bfec87add"
    trace_id: "8b7461ef-0810-4b34-81c4-2e690eb749fd"
    span_id: "2455afbf1114f78e"
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mGetting time series data[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mTime series data retrieved[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "33e85771-f1c5-40b2-b280-095bfec87add"
    trace_id: "8b7461ef-0810-4b34-81c4-2e690eb749fd"
    span_id: "2455afbf1114f78e"
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mAgent stats retrieved[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "feb12846-36de-49dc-af31-480ca98c8428"
    trace_id: "dbc59c15-dd96-4f62-8314-2c046653229f"
    span_id: "0f48c5c70e449667"
[DEBUG-STREAM] XREADGROUP returned { hasResults: true, resultsLength: 1, resultsType: 'object' }
[DEBUG-STREAM] Processing results { count: 1 }
{"ts":"2025-11-18T00:21:13.357Z","scope":"redis-bus","msg":"[PHASE-3] Processing message from stream","level":"INFO","streamKey":"stream:orchestrator:results","messageId":"1763425273355-0","unwrapPath":"messageData.payload.msg","workflow_id":"2af61467-1348-4c7f-9c8a-4516fd0c6af6","task_id":"dba0eea0-05d5-4838-9033-47005664eb9f","messageKeys":"task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage"}
[DEBUG-STREAM] Checking handlers {
  topic: 'orchestrator:results',
  hasHandlers: true,
  handlerCount: 1,
  subscriptionsKeys: 'orchestrator:results'
}
[DEBUG-STREAM] About to invoke handlers { count: 1 }
[DEBUG-STATE-MACHINE-1] Raw message received from orchestrator:results {
  message_type: 'object',
  message_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage',
  has_workflow_id: true,
  has_stage: true,
  has_success: true
}
[DEBUG-STATE-MACHINE-2] AgentResult structure {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  task_id: 'dba0eea0-05d5-4838-9033-47005664eb9f',
  agent_id: 'scaffold-fb881bdb',
  success: true,
  status: 'success',
  stage: 'dependency_installation',
  has_result: true,
  all_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage'
}
[DEBUG-STATE-MACHINE-3] Looking up state machine {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  machines_count: 2,
  machine_exists: true
}
[DEBUG-STATE-MACHINE-4] State machine found, checking success {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  success: true,
  status: 'success'
}
[DEBUG-STATE-MACHINE-5] Result is successful, preparing STAGE_COMPLETE {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  stage_from_message: 'dependency_installation',
  task_id: 'dba0eea0-05d5-4838-9033-47005664eb9f'
}
[DEBUG-TASK-CREATE-1] taskCreator exists, attempting to create next task {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  completed_stage: 'dependency_installation'
}
[DEBUG-TASK-CREATE-2] Calling waitForStageTransition {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  completed_stage: 'dependency_installation'
}
{"ts":"2025-11-18T00:21:13.361Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:2af61467-1348-4c7f-9c8a-4516fd0c6af6","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:21:13.361Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"2af61467-1348-4c7f-9c8a-4516fd0c6af6","current_stage":"dependency_installation","status":"running","progress":45}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
{"ts":"2025-11-18T00:21:13.371Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:2af61467-1348-4c7f-9c8a-4516fd0c6af6","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:21:13.371Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"2af61467-1348-4c7f-9c8a-4516fd0c6af6","current_stage":"validation","status":"running","progress":45}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine received agent result[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] Sending STAGE_COMPLETE to state machine[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36mStage completed[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mComputing next stage from current stage[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36mStage transition computed[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Evaluating state entered (nextStage pre-computed)[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service executing[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service completed[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Transitioning to next stage (ABSOLUTE assignment)[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Context updated in memory (ABSOLUTE)[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 CAS] Workflow updated successfully (CAS check passed)[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Database persisted[39m
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[DEBUG-TASK-CREATE-3] waitForStageTransition returned {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  workflow_found: true,
  current_stage: 'validation',
  status: 'running'
}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query INSERT INTO "public"."AgentTask" ("id","task_id","workflow_id","agent_type","status","priority","payload","trace_id","span_id","parent_span_id","assigned_at","retry_count","max_retries","timeout_ms") VALUES ($1,$2,$3,CAST($4::text AS "public"."AgentType"),CAST($5::text AS "public"."TaskStatus"),CAST($6::text AS "public"."Priority"),$7,$8,$9,$10,$11,$12,$13,$14) RETURNING "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms"
{"ts":"2025-11-18T00:21:13.481Z","scope":"redis-bus","msg":"Mirrored to stream","level":"INFO","topic":"agent:validation:tasks","stream":"stream:agent:validation:tasks"}
{"ts":"2025-11-18T00:21:13.481Z","scope":"redis-bus","msg":"[SESSION #63] Published to stream only (pub/sub disabled)","level":"INFO","topic":"agent:validation:tasks","stream":"stream:agent:validation:tasks"}
[DEBUG-STREAM] Handlers completed successfully
[DEBUG-STREAM] Message ACKed { messageId: '1763425273355-0' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Stage transition detected[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Creating task for next stage after STAGE_COMPLETE[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36müîç [SESSION #65] Building AgentEnvelope v2.0.0[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Building validation envelope[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36m[DEBUG] Built envelope - pre-publish verification[39m
[00:21:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Agent envelope created[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36m[EB:PUBLISHED] Event published to Redis[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-3] Task dispatched via message bus[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36müîç [WORKFLOW-TRACE] Task created and published[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Task created successfully for next stage[39m
[00:21:13 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine event sent autonomously[39m
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 406
[00:21:14 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "8e6ae6e6-0de1-48d8-b4bc-c0038b443936"
    trace_id: "2bdd41dc-85bd-4d0d-bf38-dcbe76684b9b"
    span_id: "57d7d3c00da8ccc7"
[00:21:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:14 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "8e6ae6e6-0de1-48d8-b4bc-c0038b443936"
    trace_id: "2bdd41dc-85bd-4d0d-bf38-dcbe76684b9b"
    span_id: "57d7d3c00da8ccc7"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 406
[00:21:16 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "5b9ba85f-efcf-4f60-8285-4cd63725459f"
    trace_id: "7b5619f0-5126-48d2-81a1-aca9a5759bd7"
    span_id: "60a6d87adbf7e946"
[00:21:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:16 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "5b9ba85f-efcf-4f60-8285-4cd63725459f"
    trace_id: "7b5619f0-5126-48d2-81a1-aca9a5759bd7"
    span_id: "60a6d87adbf7e946"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 406
[00:21:19 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "2c9015b5-feb0-4bda-9c5f-b5dca2e7b90b"
    trace_id: "7fed78d5-4a33-473f-8373-4ab864c07e25"
    span_id: "b1bdcd02dd069def"
[00:21:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:19 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "2c9015b5-feb0-4bda-9c5f-b5dca2e7b90b"
    trace_id: "7fed78d5-4a33-473f-8373-4ab864c07e25"
    span_id: "b1bdcd02dd069def"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 406
[00:21:21 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "9009da00-64de-4a50-8782-f82679a6128f"
    trace_id: "449b234e-7fd0-4c28-ad66-78ec89c80258"
    span_id: "58b213d743161342"
[00:21:21 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:21 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:21 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:21 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:21 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "9009da00-64de-4a50-8782-f82679a6128f"
    trace_id: "449b234e-7fd0-4c28-ad66-78ec89c80258"
    span_id: "58b213d743161342"
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/agents"}: 1
prisma:query 
        SELECT
          agent_type,
          COUNT(*) as total_tasks,
          COALESCE(SUM(CASE WHEN status = 'completed' THEN 1 ELSE 0 END), 0) as completed_tasks,
          COALESCE(SUM(CASE WHEN status = 'failed' THEN 1 ELSE 0 END), 0) as failed_tasks,
          COALESCE(SUM(CASE WHEN status = 'cancelled' THEN 1 ELSE 0 END), 0) as cancelled_tasks,
          AVG(EXTRACT(EPOCH FROM (completed_at - started_at)) * 1000)::float as avg_duration_ms,
          AVG(retry_count)::float as avg_retries
        FROM "AgentTask"
        WHERE agent_type IS NOT NULL
        GROUP BY agent_type
        ORDER BY total_tasks DESC
      
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/agents",status_code="200"}: 2
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/agents",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/agents"}: 294
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 406
[DEBUG-STREAM] XREADGROUP returned { hasResults: true, resultsLength: 1, resultsType: 'object' }
[DEBUG-STREAM] Processing results { count: 1 }
{"ts":"2025-11-18T00:21:23.464Z","scope":"redis-bus","msg":"[PHASE-3] Processing message from stream","level":"INFO","streamKey":"stream:orchestrator:results","messageId":"1763425283461-0","unwrapPath":"messageData.payload.msg","workflow_id":"5c42767e-353b-42d8-9e32-467b40a78774","task_id":"92ec1fda-960f-42ad-b1bb-9ed57ce18c8e","messageKeys":"task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage"}
[DEBUG-STREAM] Checking handlers {
  topic: 'orchestrator:results',
  hasHandlers: true,
  handlerCount: 1,
  subscriptionsKeys: 'orchestrator:results'
}
[DEBUG-STREAM] About to invoke handlers { count: 1 }
[DEBUG-STATE-MACHINE-1] Raw message received from orchestrator:results {
  message_type: 'object',
  message_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage',
  has_workflow_id: true,
  has_stage: true,
  has_success: true
}
[DEBUG-STATE-MACHINE-2] AgentResult structure {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  task_id: '92ec1fda-960f-42ad-b1bb-9ed57ce18c8e',
  agent_id: 'scaffold-fb881bdb',
  success: true,
  status: 'success',
  stage: 'dependency_installation',
  has_result: true,
  all_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage'
}
[DEBUG-STATE-MACHINE-3] Looking up state machine {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  machines_count: 2,
  machine_exists: true
}
[DEBUG-STATE-MACHINE-4] State machine found, checking success {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  success: true,
  status: 'success'
}
[DEBUG-STATE-MACHINE-5] Result is successful, preparing STAGE_COMPLETE {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  stage_from_message: 'dependency_installation',
  task_id: '92ec1fda-960f-42ad-b1bb-9ed57ce18c8e'
}
[DEBUG-TASK-CREATE-1] taskCreator exists, attempting to create next task {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  completed_stage: 'dependency_installation'
}
[DEBUG-TASK-CREATE-2] Calling waitForStageTransition {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  completed_stage: 'dependency_installation'
}
{"ts":"2025-11-18T00:21:23.465Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:5c42767e-353b-42d8-9e32-467b40a78774","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:21:23.465Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"5c42767e-353b-42d8-9e32-467b40a78774","current_stage":"dependency_installation","status":"running","progress":45}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
{"ts":"2025-11-18T00:21:23.476Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:5c42767e-353b-42d8-9e32-467b40a78774","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:21:23.476Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"5c42767e-353b-42d8-9e32-467b40a78774","current_stage":"validation","status":"running","progress":45}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[DEBUG-TASK-CREATE-3] waitForStageTransition returned {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  workflow_found: true,
  current_stage: 'validation',
  status: 'running'
}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query INSERT INTO "public"."AgentTask" ("id","task_id","workflow_id","agent_type","status","priority","payload","trace_id","span_id","parent_span_id","assigned_at","retry_count","max_retries","timeout_ms") VALUES ($1,$2,$3,CAST($4::text AS "public"."AgentType"),CAST($5::text AS "public"."TaskStatus"),CAST($6::text AS "public"."Priority"),$7,$8,$9,$10,$11,$12,$13,$14) RETURNING "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms"
{"ts":"2025-11-18T00:21:23.578Z","scope":"redis-bus","msg":"Mirrored to stream","level":"INFO","topic":"agent:validation:tasks","stream":"stream:agent:validation:tasks"}
{"ts":"2025-11-18T00:21:23.579Z","scope":"redis-bus","msg":"[SESSION #63] Published to stream only (pub/sub disabled)","level":"INFO","topic":"agent:validation:tasks","stream":"stream:agent:validation:tasks"}
[DEBUG-STREAM] Handlers completed successfully
[DEBUG-STREAM] Message ACKed { messageId: '1763425283461-0' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "0a9a37bc-237c-4ca0-aee5-8956eedab6f6"
    trace_id: "d4000024-fdef-44dd-9551-c5e3e3a072b5"
    span_id: "b10421ca0cd098be"
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mGetting agent performance stats[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mAgent stats retrieved[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "0a9a37bc-237c-4ca0-aee5-8956eedab6f6"
    trace_id: "d4000024-fdef-44dd-9551-c5e3e3a072b5"
    span_id: "b10421ca0cd098be"
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "fef280b7-3d0c-4661-a115-48af0bdd0b74"
    trace_id: "a0832c7e-a8be-4e18-a4b7-737937b57889"
    span_id: "de5d87e5911d8c78"
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "fef280b7-3d0c-4661-a115-48af0bdd0b74"
    trace_id: "a0832c7e-a8be-4e18-a4b7-737937b57889"
    span_id: "de5d87e5911d8c78"
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine received agent result[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] Sending STAGE_COMPLETE to state machine[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36mStage completed[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mComputing next stage from current stage[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36mStage transition computed[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Evaluating state entered (nextStage pre-computed)[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service executing[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service completed[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Transitioning to next stage (ABSOLUTE assignment)[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Context updated in memory (ABSOLUTE)[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 CAS] Workflow updated successfully (CAS check passed)[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Database persisted[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Stage transition detected[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Creating task for next stage after STAGE_COMPLETE[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36müîç [SESSION #65] Building AgentEnvelope v2.0.0[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Building validation envelope[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36m[DEBUG] Built envelope - pre-publish verification[39m
[00:21:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Agent envelope created[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36m[EB:PUBLISHED] Event published to Redis[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-3] Task dispatched via message bus[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36müîç [WORKFLOW-TRACE] Task created and published[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Task created successfully for next stage[39m
[00:21:23 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine event sent autonomously[39m
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:21:25 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "6d6811bb-e1c6-462d-8786-7681244eca06"
    trace_id: "5e8be0e1-c713-4157-8b25-28a07936793a"
    span_id: "638740baa0624e93"
[00:21:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:25 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "6d6811bb-e1c6-462d-8786-7681244eca06"
    trace_id: "5e8be0e1-c713-4157-8b25-28a07936793a"
    span_id: "638740baa0624e93"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:21:27 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "1af8f8d1-87e7-4671-bfe1-324cc1849d6f"
    trace_id: "5ae89d5d-5b51-4d45-b788-4f8099a35c74"
    span_id: "68cf6e9cd676312e"
[00:21:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:27 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "1af8f8d1-87e7-4671-bfe1-324cc1849d6f"
    trace_id: "5ae89d5d-5b51-4d45-b788-4f8099a35c74"
    span_id: "68cf6e9cd676312e"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 3
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:21:29 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "b13cec04-61ac-45ef-8ede-bf21662c4c76"
    trace_id: "c188bc7a-179c-4812-9598-9ad3c5a807fa"
    span_id: "a26b5fe58e96c4dd"
[00:21:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:29 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "b13cec04-61ac-45ef-8ede-bf21662c4c76"
    trace_id: "c188bc7a-179c-4812-9598-9ad3c5a807fa"
    span_id: "a26b5fe58e96c4dd"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 10
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:21:31 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "265097de-493a-4a29-ac77-ce704e520efc"
    trace_id: "34569021-cdca-4c4e-8c37-0ff7f9c108a6"
    span_id: "37b8311b6f5f861a"
[00:21:31 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:31 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:31 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:31 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:31 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "265097de-493a-4a29-ac77-ce704e520efc"
    trace_id: "34569021-cdca-4c4e-8c37-0ff7f9c108a6"
    span_id: "37b8311b6f5f861a"
[METRIC] http_requests_total{method="GET",path="/api/v1/traces"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."trace_id", "public"."Workflow"."status"::text, "public"."Workflow"."created_at", "public"."Workflow"."completed_at" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" IS NOT NULL ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/traces",status_code="200"}: 22
[METRIC] http_responses_total{method="GET",path="/api/v1/traces",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/traces"}: 3013
[00:21:32 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "6423d2d1-6292-474f-b999-fa254aa38742"
    trace_id: "8ac90fdd-2d5c-4e64-961d-5ee0a2f68d02"
    span_id: "cd1ecf8928c79690"
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mListing traces[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:21:32 UTC] [34mDEBUG[39m (orchestrator): [36mTraces listed[39m
[00:21:32 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "6423d2d1-6292-474f-b999-fa254aa38742"
    trace_id: "8ac90fdd-2d5c-4e64-961d-5ee0a2f68d02"
    span_id: "cd1ecf8928c79690"
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/agents"}: 1
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/timeseries"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."created_at" FROM "public"."Workflow" WHERE "public"."Workflow"."created_at" >= $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/timeseries",status_code="200"}: 2
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/timeseries",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/timeseries"}: 205
prisma:query 
        SELECT
          agent_type,
          COUNT(*) as total_tasks,
          COALESCE(SUM(CASE WHEN status = 'completed' THEN 1 ELSE 0 END), 0) as completed_tasks,
          COALESCE(SUM(CASE WHEN status = 'failed' THEN 1 ELSE 0 END), 0) as failed_tasks,
          COALESCE(SUM(CASE WHEN status = 'cancelled' THEN 1 ELSE 0 END), 0) as cancelled_tasks,
          AVG(EXTRACT(EPOCH FROM (completed_at - started_at)) * 1000)::float as avg_duration_ms,
          AVG(retry_count)::float as avg_retries
        FROM "AgentTask"
        WHERE agent_type IS NOT NULL
        GROUP BY agent_type
        ORDER BY total_tasks DESC
      
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/agents",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/agents",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/agents"}: 294
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 11
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:21:33 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "b3b1fdf7-6084-451e-85b3-074688228c12"
    trace_id: "3b3e0174-ea3d-465b-b500-46943d60eb97"
    span_id: "148b8d7cb6420f8f"
[00:21:33 UTC] [34mDEBUG[39m (orchestrator): [36mGetting agent performance stats[39m
[00:21:33 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "68b216c7-0ffc-4258-a203-a5cbf7e3641a"
    trace_id: "e7dc9668-7457-4a92-8439-0889972f51ec"
    span_id: "c2a679f797ac471e"
[00:21:33 UTC] [34mDEBUG[39m (orchestrator): [36mGetting time series data[39m
[00:21:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:33 UTC] [34mDEBUG[39m (orchestrator): [36mTime series data retrieved[39m
[00:21:33 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "68b216c7-0ffc-4258-a203-a5cbf7e3641a"
    trace_id: "e7dc9668-7457-4a92-8439-0889972f51ec"
    span_id: "c2a679f797ac471e"
[00:21:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:33 UTC] [34mDEBUG[39m (orchestrator): [36mAgent stats retrieved[39m
[00:21:33 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "b3b1fdf7-6084-451e-85b3-074688228c12"
    trace_id: "3b3e0174-ea3d-465b-b500-46943d60eb97"
    span_id: "148b8d7cb6420f8f"
[00:21:33 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "8723e5d2-f98e-4b36-8255-960684d4b1dd"
    trace_id: "f656a17b-9fd8-455a-adad-8ef3f4ad9b6e"
    span_id: "9711e21785db3b43"
[00:21:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:33 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "8723e5d2-f98e-4b36-8255-960684d4b1dd"
    trace_id: "f656a17b-9fd8-455a-adad-8ef3f4ad9b6e"
    span_id: "9711e21785db3b43"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 9
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:21:35 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "0118bb8f-11c0-40f0-b32a-632b51bd55c7"
    trace_id: "32955ea8-a368-45fa-807e-6cae34ae3ced"
    span_id: "63c9a186e2c7dc17"
[00:21:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:35 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "0118bb8f-11c0-40f0-b32a-632b51bd55c7"
    trace_id: "32955ea8-a368-45fa-807e-6cae34ae3ced"
    span_id: "63c9a186e2c7dc17"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:21:37 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "fce30fd6-8ded-40c8-a355-10616cdde8c8"
    trace_id: "d9f9fa09-36a5-4b63-96fe-68b7b27e2195"
    span_id: "433b3a3406f796d3"
[00:21:37 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:37 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:37 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:37 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:37 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "fce30fd6-8ded-40c8-a355-10616cdde8c8"
    trace_id: "d9f9fa09-36a5-4b63-96fe-68b7b27e2195"
    span_id: "433b3a3406f796d3"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:21:39 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "cabb4d5b-0727-4d99-9580-72c5ba726a59"
    trace_id: "b80730f3-6661-4f91-9956-942f4b405a32"
    span_id: "7860a57785b1ab90"
[00:21:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:39 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "cabb4d5b-0727-4d99-9580-72c5ba726a59"
    trace_id: "b80730f3-6661-4f91-9956-942f4b405a32"
    span_id: "7860a57785b1ab90"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:21:42 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "85d66be8-39b9-49e2-8613-e80551c2ec44"
    trace_id: "36800584-c753-45bc-9619-b26da0da94fc"
    span_id: "6c2d47c8de9b6609"
[00:21:42 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:42 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:42 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:42 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:42 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "85d66be8-39b9-49e2-8613-e80551c2ec44"
    trace_id: "36800584-c753-45bc-9619-b26da0da94fc"
    span_id: "6c2d47c8de9b6609"
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/agents"}: 1
prisma:query 
        SELECT
          agent_type,
          COUNT(*) as total_tasks,
          COALESCE(SUM(CASE WHEN status = 'completed' THEN 1 ELSE 0 END), 0) as completed_tasks,
          COALESCE(SUM(CASE WHEN status = 'failed' THEN 1 ELSE 0 END), 0) as failed_tasks,
          COALESCE(SUM(CASE WHEN status = 'cancelled' THEN 1 ELSE 0 END), 0) as cancelled_tasks,
          AVG(EXTRACT(EPOCH FROM (completed_at - started_at)) * 1000)::float as avg_duration_ms,
          AVG(retry_count)::float as avg_retries
        FROM "AgentTask"
        WHERE agent_type IS NOT NULL
        GROUP BY agent_type
        ORDER BY total_tasks DESC
      
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/agents",status_code="200"}: 3
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/agents",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/agents"}: 294
[00:21:43 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "c49c578c-465d-4cfe-ab0e-c17cb5e79fbe"
    trace_id: "06c82f88-8f09-4a0b-97dc-8e0b26033407"
    span_id: "f0b12f7246dcd00b"
[00:21:43 UTC] [34mDEBUG[39m (orchestrator): [36mGetting agent performance stats[39m
[00:21:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:43 UTC] [34mDEBUG[39m (orchestrator): [36mAgent stats retrieved[39m
[00:21:43 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "c49c578c-465d-4cfe-ab0e-c17cb5e79fbe"
    trace_id: "06c82f88-8f09-4a0b-97dc-8e0b26033407"
    span_id: "f0b12f7246dcd00b"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 9
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:21:44 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "59d8d127-0efa-4558-8c57-77e1b7c74903"
    trace_id: "ba59955b-c2fb-4286-b3c8-f807e145dcc9"
    span_id: "1df68b25c71a7903"
[00:21:44 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:44 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:44 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:44 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:44 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "59d8d127-0efa-4558-8c57-77e1b7c74903"
    trace_id: "ba59955b-c2fb-4286-b3c8-f807e145dcc9"
    span_id: "1df68b25c71a7903"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:21:46 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "e54e8e26-2846-459f-8e4f-bd406c73240d"
    trace_id: "955dbbf3-0d3a-48a4-9bee-f17630fe0fb5"
    span_id: "f08f6be5f52fdafd"
[00:21:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:46 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "e54e8e26-2846-459f-8e4f-bd406c73240d"
    trace_id: "955dbbf3-0d3a-48a4-9bee-f17630fe0fb5"
    span_id: "f08f6be5f52fdafd"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:21:48 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "89697f92-0f37-47a9-b168-1555076014f7"
    trace_id: "ed3da84e-d822-431b-a947-63bdbc4e8f0f"
    span_id: "eddf23f5f0659862"
[00:21:48 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:48 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:48 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:48 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:48 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:48 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "89697f92-0f37-47a9-b168-1555076014f7"
    trace_id: "ed3da84e-d822-431b-a947-63bdbc4e8f0f"
    span_id: "eddf23f5f0659862"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:21:50 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "0b35e026-d448-4ea4-9f9f-aeb09f373abe"
    trace_id: "3770b5e1-631c-4502-a1cd-df9bf2999670"
    span_id: "e5b9b0c6fcc2edc1"
[00:21:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:50 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "0b35e026-d448-4ea4-9f9f-aeb09f373abe"
    trace_id: "3770b5e1-631c-4502-a1cd-df9bf2999670"
    span_id: "e5b9b0c6fcc2edc1"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 3
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:21:52 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "85581c73-b2f4-4b0f-b38f-13a2c8515d1a"
    trace_id: "9e17e65d-7a22-483b-a51c-43cf65deaa01"
    span_id: "c62a39e7cefdbbcb"
[00:21:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:52 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "85581c73-b2f4-4b0f-b38f-13a2c8515d1a"
    trace_id: "9e17e65d-7a22-483b-a51c-43cf65deaa01"
    span_id: "c62a39e7cefdbbcb"
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/agents"}: 1
prisma:query 
        SELECT
          agent_type,
          COUNT(*) as total_tasks,
          COALESCE(SUM(CASE WHEN status = 'completed' THEN 1 ELSE 0 END), 0) as completed_tasks,
          COALESCE(SUM(CASE WHEN status = 'failed' THEN 1 ELSE 0 END), 0) as failed_tasks,
          COALESCE(SUM(CASE WHEN status = 'cancelled' THEN 1 ELSE 0 END), 0) as cancelled_tasks,
          AVG(EXTRACT(EPOCH FROM (completed_at - started_at)) * 1000)::float as avg_duration_ms,
          AVG(retry_count)::float as avg_retries
        FROM "AgentTask"
        WHERE agent_type IS NOT NULL
        GROUP BY agent_type
        ORDER BY total_tasks DESC
      
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/agents",status_code="200"}: 2
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/agents",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/agents"}: 294
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:21:53 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "cd3728f7-a044-4033-8020-395b89aa36f2"
    trace_id: "30299485-8142-44d6-83af-b18e7a888538"
    span_id: "d20b5bc57e5de5b4"
[00:21:53 UTC] [34mDEBUG[39m (orchestrator): [36mGetting agent performance stats[39m
[00:21:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:53 UTC] [34mDEBUG[39m (orchestrator): [36mAgent stats retrieved[39m
[00:21:53 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "cd3728f7-a044-4033-8020-395b89aa36f2"
    trace_id: "30299485-8142-44d6-83af-b18e7a888538"
    span_id: "d20b5bc57e5de5b4"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:21:54 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "c9b5e743-4d12-4094-a657-f6967510f41a"
    trace_id: "d56251e3-2c3d-4f3b-82dd-a5ae0983285b"
    span_id: "14d4993b336fd6c8"
[00:21:54 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:54 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:54 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:54 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:54 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "c9b5e743-4d12-4094-a657-f6967510f41a"
    trace_id: "d56251e3-2c3d-4f3b-82dd-a5ae0983285b"
    span_id: "14d4993b336fd6c8"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:21:56 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "dfb58415-7ac8-440b-a123-486d0dc3be58"
    trace_id: "bce6f0ad-a29c-42c8-927a-259d91b9a057"
    span_id: "f68e93af45f2d1a6"
[00:21:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:56 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "dfb58415-7ac8-440b-a123-486d0dc3be58"
    trace_id: "bce6f0ad-a29c-42c8-927a-259d91b9a057"
    span_id: "f68e93af45f2d1a6"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:21:58 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "8a3406fb-d302-4132-98fa-fb3cb2e8b0a1"
    trace_id: "2d793b42-ec6b-4e32-98cd-d10ac4c2aff9"
    span_id: "bf5a7771dc4106ba"
[00:21:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:21:58 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "8a3406fb-d302-4132-98fa-fb3cb2e8b0a1"
    trace_id: "2d793b42-ec6b-4e32-98cd-d10ac4c2aff9"
    span_id: "bf5a7771dc4106ba"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:22:00 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "110065b1-4a67-4f17-bcda-025cc45c8f11"
    trace_id: "52f7ea02-77e8-4d3c-9a4e-b86a83d18649"
    span_id: "dbfc9ffb3e82e30b"
[00:22:00 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:00 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:00 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:00 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:00 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "110065b1-4a67-4f17-bcda-025cc45c8f11"
    trace_id: "52f7ea02-77e8-4d3c-9a4e-b86a83d18649"
    span_id: "dbfc9ffb3e82e30b"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:22:02 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "96c8c6d3-3bf7-4bf0-9ca0-85348abfbec3"
    trace_id: "455529a7-9d2b-4eeb-8b02-c9a1b9f8b0aa"
    span_id: "065b98128923c8b8"
[00:22:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:02 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "96c8c6d3-3bf7-4bf0-9ca0-85348abfbec3"
    trace_id: "455529a7-9d2b-4eeb-8b02-c9a1b9f8b0aa"
    span_id: "065b98128923c8b8"
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/timeseries"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."created_at" FROM "public"."Workflow" WHERE "public"."Workflow"."created_at" >= $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/timeseries",status_code="200"}: 2
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/timeseries",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/timeseries"}: 205
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/agents"}: 1
prisma:query 
        SELECT
          agent_type,
          COUNT(*) as total_tasks,
          COALESCE(SUM(CASE WHEN status = 'completed' THEN 1 ELSE 0 END), 0) as completed_tasks,
          COALESCE(SUM(CASE WHEN status = 'failed' THEN 1 ELSE 0 END), 0) as failed_tasks,
          COALESCE(SUM(CASE WHEN status = 'cancelled' THEN 1 ELSE 0 END), 0) as cancelled_tasks,
          AVG(EXTRACT(EPOCH FROM (completed_at - started_at)) * 1000)::float as avg_duration_ms,
          AVG(retry_count)::float as avg_retries
        FROM "AgentTask"
        WHERE agent_type IS NOT NULL
        GROUP BY agent_type
        ORDER BY total_tasks DESC
      
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/agents",status_code="200"}: 2
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/agents",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/agents"}: 294
[00:22:03 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "8658b1b8-602f-4822-87a5-c1ba17730235"
    trace_id: "1756801d-5824-4ffd-9f91-ac51afd40083"
    span_id: "76cc7119cadc2cd5"
[00:22:03 UTC] [34mDEBUG[39m (orchestrator): [36mGetting time series data[39m
[00:22:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:03 UTC] [34mDEBUG[39m (orchestrator): [36mTime series data retrieved[39m
[00:22:03 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "8658b1b8-602f-4822-87a5-c1ba17730235"
    trace_id: "1756801d-5824-4ffd-9f91-ac51afd40083"
    span_id: "76cc7119cadc2cd5"
[00:22:03 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "250d8e8e-e4e7-4158-abe5-334776fe8bf1"
    trace_id: "140dce19-a29c-4f22-bdf5-e33bd03eab9a"
    span_id: "6432cfe12a6ef4f9"
[00:22:03 UTC] [34mDEBUG[39m (orchestrator): [36mGetting agent performance stats[39m
[00:22:03 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:03 UTC] [34mDEBUG[39m (orchestrator): [36mAgent stats retrieved[39m
[00:22:03 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "250d8e8e-e4e7-4158-abe5-334776fe8bf1"
    trace_id: "140dce19-a29c-4f22-bdf5-e33bd03eab9a"
    span_id: "6432cfe12a6ef4f9"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:22:04 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "14fe6a00-ca3e-4e97-92c2-1c226ae10bf6"
    trace_id: "96c40553-1f78-4fa1-aa2d-79c67e8ecd4f"
    span_id: "bed6669eccadf50d"
[00:22:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:04 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "14fe6a00-ca3e-4e97-92c2-1c226ae10bf6"
    trace_id: "96c40553-1f78-4fa1-aa2d-79c67e8ecd4f"
    span_id: "bed6669eccadf50d"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:22:07 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "a7575c58-3e9e-4e67-bf2d-5ad43ff54c95"
    trace_id: "18fd2f93-abb9-4d49-9306-8e305c533eb3"
    span_id: "aee4ed10fac9d5c0"
[00:22:07 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:07 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:07 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:07 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:07 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "a7575c58-3e9e-4e67-bf2d-5ad43ff54c95"
    trace_id: "18fd2f93-abb9-4d49-9306-8e305c533eb3"
    span_id: "aee4ed10fac9d5c0"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:22:09 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "bbf61a77-98c4-4f62-aa48-52c8d5a18f39"
    trace_id: "83b9ae32-92ec-4349-993d-cb8735e309f3"
    span_id: "2310a2568927feab"
[00:22:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:09 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:09 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "bbf61a77-98c4-4f62-aa48-52c8d5a18f39"
    trace_id: "83b9ae32-92ec-4349-993d-cb8735e309f3"
    span_id: "2310a2568927feab"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:22:11 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "9355dfa9-edda-4cc5-bb94-313efc3406ad"
    trace_id: "de407529-4f4b-4dbd-a3fa-ec327555b85a"
    span_id: "cd0e889d9fdd8fc2"
[00:22:11 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:11 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:11 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:11 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:11 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "9355dfa9-edda-4cc5-bb94-313efc3406ad"
    trace_id: "de407529-4f4b-4dbd-a3fa-ec327555b85a"
    span_id: "cd0e889d9fdd8fc2"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/agents"}: 1
prisma:query 
        SELECT
          agent_type,
          COUNT(*) as total_tasks,
          COALESCE(SUM(CASE WHEN status = 'completed' THEN 1 ELSE 0 END), 0) as completed_tasks,
          COALESCE(SUM(CASE WHEN status = 'failed' THEN 1 ELSE 0 END), 0) as failed_tasks,
          COALESCE(SUM(CASE WHEN status = 'cancelled' THEN 1 ELSE 0 END), 0) as cancelled_tasks,
          AVG(EXTRACT(EPOCH FROM (completed_at - started_at)) * 1000)::float as avg_duration_ms,
          AVG(retry_count)::float as avg_retries
        FROM "AgentTask"
        WHERE agent_type IS NOT NULL
        GROUP BY agent_type
        ORDER BY total_tasks DESC
      
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/agents",status_code="200"}: 2
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/agents",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/agents"}: 294
[00:22:13 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "88b59066-88a2-427c-9dc1-9f18e3ae499f"
    trace_id: "307d91e1-0049-416f-b9ab-aa6070b0bf6d"
    span_id: "223708e0a7b1adf9"
[00:22:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:13 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "88b59066-88a2-427c-9dc1-9f18e3ae499f"
    trace_id: "307d91e1-0049-416f-b9ab-aa6070b0bf6d"
    span_id: "223708e0a7b1adf9"
[00:22:13 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "2011af1a-1528-43dd-a9c5-bc26b6adf924"
    trace_id: "e80b9f5a-9872-4d5b-80d7-9fa56f707e61"
    span_id: "72ffbb23f23e12ec"
[00:22:13 UTC] [34mDEBUG[39m (orchestrator): [36mGetting agent performance stats[39m
[00:22:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:13 UTC] [34mDEBUG[39m (orchestrator): [36mAgent stats retrieved[39m
[00:22:13 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "2011af1a-1528-43dd-a9c5-bc26b6adf924"
    trace_id: "e80b9f5a-9872-4d5b-80d7-9fa56f707e61"
    span_id: "72ffbb23f23e12ec"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:22:15 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "9792e54a-c9d5-47ab-b6f4-806e1968a247"
    trace_id: "c9d054f1-4ab8-49c3-98ff-5a2dcaa3985b"
    span_id: "618bab25aa4f464a"
[00:22:15 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:15 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:15 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:15 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:15 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "9792e54a-c9d5-47ab-b6f4-806e1968a247"
    trace_id: "c9d054f1-4ab8-49c3-98ff-5a2dcaa3985b"
    span_id: "618bab25aa4f464a"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:22:17 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "eb153abe-caca-41c2-9b09-91e335cdd378"
    trace_id: "b644ac40-3ab6-48da-b290-3e88f9e0c408"
    span_id: "2ade0ebfa14e0792"
[00:22:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:17 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "eb153abe-caca-41c2-9b09-91e335cdd378"
    trace_id: "b644ac40-3ab6-48da-b290-3e88f9e0c408"
    span_id: "2ade0ebfa14e0792"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:22:19 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "9f2d1e61-510e-40dc-a4e3-bd7baed8c34b"
    trace_id: "6397cbcb-0eae-4a97-a61d-771c5725a3c5"
    span_id: "4728e058e6b0568f"
[00:22:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:19 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "9f2d1e61-510e-40dc-a4e3-bd7baed8c34b"
    trace_id: "6397cbcb-0eae-4a97-a61d-771c5725a3c5"
    span_id: "4728e058e6b0568f"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:22:21 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "7dc8e2f6-29b9-4a79-bd5b-c715ff16cfb3"
    trace_id: "61b39283-f6e4-4551-95fd-53d11886f237"
    span_id: "33d270c530ba7089"
[00:22:21 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:21 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:21 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:21 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:21 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "7dc8e2f6-29b9-4a79-bd5b-c715ff16cfb3"
    trace_id: "61b39283-f6e4-4551-95fd-53d11886f237"
    span_id: "33d270c530ba7089"
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/agents"}: 1
prisma:query 
        SELECT
          agent_type,
          COUNT(*) as total_tasks,
          COALESCE(SUM(CASE WHEN status = 'completed' THEN 1 ELSE 0 END), 0) as completed_tasks,
          COALESCE(SUM(CASE WHEN status = 'failed' THEN 1 ELSE 0 END), 0) as failed_tasks,
          COALESCE(SUM(CASE WHEN status = 'cancelled' THEN 1 ELSE 0 END), 0) as cancelled_tasks,
          AVG(EXTRACT(EPOCH FROM (completed_at - started_at)) * 1000)::float as avg_duration_ms,
          AVG(retry_count)::float as avg_retries
        FROM "AgentTask"
        WHERE agent_type IS NOT NULL
        GROUP BY agent_type
        ORDER BY total_tasks DESC
      
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/agents",status_code="200"}: 2
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/agents",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/agents"}: 294
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:22:23 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "029d9e69-1031-4100-a71a-08422f32da76"
    trace_id: "7c4471f3-8d23-4d40-b0b4-ec272569eb55"
    span_id: "4a8ffc602ef48315"
[00:22:23 UTC] [34mDEBUG[39m (orchestrator): [36mGetting agent performance stats[39m
[00:22:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:23 UTC] [34mDEBUG[39m (orchestrator): [36mAgent stats retrieved[39m
[00:22:23 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "029d9e69-1031-4100-a71a-08422f32da76"
    trace_id: "7c4471f3-8d23-4d40-b0b4-ec272569eb55"
    span_id: "4a8ffc602ef48315"
[00:22:23 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "00f6eaf4-0d8d-4564-88f8-6f71f5b84a36"
    trace_id: "5fee415e-90e3-428f-9319-dc41fc6ffe46"
    span_id: "6eb469e6a97259e2"
[00:22:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:23 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "00f6eaf4-0d8d-4564-88f8-6f71f5b84a36"
    trace_id: "5fee415e-90e3-428f-9319-dc41fc6ffe46"
    span_id: "6eb469e6a97259e2"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:22:25 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "d45973c4-ffe6-4620-a77f-ed3cb17d652a"
    trace_id: "f8af9952-7ef5-442f-843a-0ce0c4748559"
    span_id: "32766094d2a5ee59"
[00:22:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:25 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "d45973c4-ffe6-4620-a77f-ed3cb17d652a"
    trace_id: "f8af9952-7ef5-442f-843a-0ce0c4748559"
    span_id: "32766094d2a5ee59"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 3
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:22:27 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "01ba543c-e296-48fe-ad0c-f23bb4b2e39c"
    trace_id: "8a9a3e94-febe-4e02-b8da-60a7dcb66144"
    span_id: "f6821c9b9ae2a295"
[00:22:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:27 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "01ba543c-e296-48fe-ad0c-f23bb4b2e39c"
    trace_id: "8a9a3e94-febe-4e02-b8da-60a7dcb66144"
    span_id: "f6821c9b9ae2a295"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:22:29 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "afd79fef-e2ae-4799-a75a-18839a603c70"
    trace_id: "56dd8459-b84c-4170-bff1-8f4a587194b1"
    span_id: "a138db0109c48008"
[00:22:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:29 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "afd79fef-e2ae-4799-a75a-18839a603c70"
    trace_id: "56dd8459-b84c-4170-bff1-8f4a587194b1"
    span_id: "a138db0109c48008"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:22:32 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "6b5e128f-6187-48e0-9765-838b788cc98f"
    trace_id: "cc594871-b24a-4426-b7cd-7d3455ae49c5"
    span_id: "5620219ea6cece05"
[00:22:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:32 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "6b5e128f-6187-48e0-9765-838b788cc98f"
    trace_id: "cc594871-b24a-4426-b7cd-7d3455ae49c5"
    span_id: "5620219ea6cece05"
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/timeseries"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."created_at" FROM "public"."Workflow" WHERE "public"."Workflow"."created_at" >= $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/timeseries",status_code="200"}: 1
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/timeseries",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/timeseries"}: 205
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/agents"}: 1
prisma:query 
        SELECT
          agent_type,
          COUNT(*) as total_tasks,
          COALESCE(SUM(CASE WHEN status = 'completed' THEN 1 ELSE 0 END), 0) as completed_tasks,
          COALESCE(SUM(CASE WHEN status = 'failed' THEN 1 ELSE 0 END), 0) as failed_tasks,
          COALESCE(SUM(CASE WHEN status = 'cancelled' THEN 1 ELSE 0 END), 0) as cancelled_tasks,
          AVG(EXTRACT(EPOCH FROM (completed_at - started_at)) * 1000)::float as avg_duration_ms,
          AVG(retry_count)::float as avg_retries
        FROM "AgentTask"
        WHERE agent_type IS NOT NULL
        GROUP BY agent_type
        ORDER BY total_tasks DESC
      
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/agents",status_code="200"}: 3
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/agents",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/agents"}: 294
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:22:33 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "68a48b56-bae2-40b0-b847-4c05d1164f28"
    trace_id: "c8a2d6a8-a000-4291-84ba-68670233a67f"
    span_id: "42e688d966e8f725"
[00:22:33 UTC] [34mDEBUG[39m (orchestrator): [36mGetting time series data[39m
[00:22:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:33 UTC] [34mDEBUG[39m (orchestrator): [36mTime series data retrieved[39m
[00:22:33 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "68a48b56-bae2-40b0-b847-4c05d1164f28"
    trace_id: "c8a2d6a8-a000-4291-84ba-68670233a67f"
    span_id: "42e688d966e8f725"
[00:22:33 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "6ce69dd9-3a4a-4572-bef7-a32865d87364"
    trace_id: "8f119e90-93ee-40e6-9e07-e37d3a75d611"
    span_id: "d73ba0f325ecc85f"
[00:22:33 UTC] [34mDEBUG[39m (orchestrator): [36mGetting agent performance stats[39m
[00:22:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:33 UTC] [34mDEBUG[39m (orchestrator): [36mAgent stats retrieved[39m
[00:22:33 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "6ce69dd9-3a4a-4572-bef7-a32865d87364"
    trace_id: "8f119e90-93ee-40e6-9e07-e37d3a75d611"
    span_id: "d73ba0f325ecc85f"
[00:22:34 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "dd19a1e3-1d2d-4f2b-8d56-309e64482f60"
    trace_id: "5955e6dc-eded-4b9b-be40-dde4c4dd8b34"
    span_id: "1438fd3ca918056e"
[00:22:34 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:34 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:34 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:34 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:34 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "dd19a1e3-1d2d-4f2b-8d56-309e64482f60"
    trace_id: "5955e6dc-eded-4b9b-be40-dde4c4dd8b34"
    span_id: "1438fd3ca918056e"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:22:36 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "4b3c6cf6-900c-4f6b-9426-471b54abd817"
    trace_id: "76dd2885-f533-40a9-aab7-9ab4cf04c199"
    span_id: "4f866c36a54d9145"
[00:22:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:36 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "4b3c6cf6-900c-4f6b-9426-471b54abd817"
    trace_id: "76dd2885-f533-40a9-aab7-9ab4cf04c199"
    span_id: "4f866c36a54d9145"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:22:38 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "918ce903-bd97-4793-9669-c2a1ecc96e2d"
    trace_id: "64e82c45-6ce9-440a-9173-e0b2e4aaf08f"
    span_id: "b0484b3b4533eabb"
[00:22:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:38 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "918ce903-bd97-4793-9669-c2a1ecc96e2d"
    trace_id: "64e82c45-6ce9-440a-9173-e0b2e4aaf08f"
    span_id: "b0484b3b4533eabb"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:22:40 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "e2341562-fcb4-4cba-a661-01aa57047e8e"
    trace_id: "a2770a73-dd42-463a-b256-2b967a11f7dd"
    span_id: "298b659fee689060"
[00:22:40 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:40 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:40 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:40 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:40 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "e2341562-fcb4-4cba-a661-01aa57047e8e"
    trace_id: "a2770a73-dd42-463a-b256-2b967a11f7dd"
    span_id: "298b659fee689060"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:22:42 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "a5cf586e-c775-4bc7-8c8a-83f22c425b09"
    trace_id: "bc248407-719c-4691-8a8c-90a5a7b3ca4d"
    span_id: "1fd758958d54db55"
[00:22:42 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:42 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:42 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:42 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:42 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "a5cf586e-c775-4bc7-8c8a-83f22c425b09"
    trace_id: "bc248407-719c-4691-8a8c-90a5a7b3ca4d"
    span_id: "1fd758958d54db55"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:22:57 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "286f2027-8c47-4226-9a34-2cc0b50e3b80"
    trace_id: "7e9fd7c4-d337-452d-b9c6-7101a179cb89"
    span_id: "5fbf4ac93755be65"
[00:22:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:22:57 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "286f2027-8c47-4226-9a34-2cc0b50e3b80"
    trace_id: "7e9fd7c4-d337-452d-b9c6-7101a179cb89"
    span_id: "5fbf4ac93755be65"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/definitions"}: 1
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/definitions",status_code="404"}: 0
[METRIC] http_responses_total{method="GET",path="/api/v1/definitions",status_code="404"}: 1
[METRIC] http_errors_total{method="GET",path="/api/v1/definitions",status_code="404",error_type="client"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/definitions"}: 90
[00:23:09 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "3baefbcc-e16a-4069-bb4b-b48ce65bfac7"
    trace_id: "cb175bb3-0522-4d33-89af-6c5187a104dc"
    span_id: "8b39dff38870b5a1"
[00:23:09 UTC] [33mWARN[39m (orchestrator): [36mRequest completed[39m
    request_id: "3baefbcc-e16a-4069-bb4b-b48ce65bfac7"
    trace_id: "cb175bb3-0522-4d33-89af-6c5187a104dc"
    span_id: "8b39dff38870b5a1"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: true, resultsLength: 1, resultsType: 'object' }
[DEBUG-STREAM] Processing results { count: 1 }
{"ts":"2025-11-18T00:23:45.419Z","scope":"redis-bus","msg":"[PHASE-3] Processing message from stream","level":"INFO","streamKey":"stream:orchestrator:results","messageId":"1763425425414-0","unwrapPath":"messageData.payload.msg","workflow_id":"58140ba1-9012-45e9-85f7-7614448d1e7d","task_id":"4961ee55-d43f-437e-b34d-ffa140846c39","messageKeys":"task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage"}
[DEBUG-STREAM] Checking handlers {
  topic: 'orchestrator:results',
  hasHandlers: true,
  handlerCount: 1,
  subscriptionsKeys: 'orchestrator:results'
}
[DEBUG-STREAM] About to invoke handlers { count: 1 }
[DEBUG-STATE-MACHINE-1] Raw message received from orchestrator:results {
  message_type: 'object',
  message_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage',
  has_workflow_id: true,
  has_stage: true,
  has_success: true
}
[DEBUG-STATE-MACHINE-2] AgentResult structure {
  workflow_id: '58140ba1-9012-45e9-85f7-7614448d1e7d',
  task_id: '4961ee55-d43f-437e-b34d-ffa140846c39',
  agent_id: 'validation-31241bcf',
  success: true,
  status: 'success',
  stage: 'validation',
  has_result: true,
  all_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage'
}
[DEBUG-STATE-MACHINE-3] Looking up state machine {
  workflow_id: '58140ba1-9012-45e9-85f7-7614448d1e7d',
  machines_count: 2,
  machine_exists: false
}
[DEBUG-STATE-MACHINE-ERROR] No state machine found! {
  workflow_id: '58140ba1-9012-45e9-85f7-7614448d1e7d',
  available_machines: '2af61467-1348-4c7f-9c8a-4516fd0c6af6,5c42767e-353b-42d8-9e32-467b40a78774',
  message_id: undefined
}
[DEBUG-STREAM] Handlers completed successfully
[DEBUG-STREAM] Message ACKed { messageId: '1763425425414-0' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:23:45 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine received agent result[39m
[00:23:45 UTC] [33mWARN[39m (orchestrator): [36m[PHASE-4] No state machine found for workflow[39m
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:23:46 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "1337fb06-f6a8-4738-a3a3-077ac22e44e0"
    trace_id: "1cf1d1da-96f8-47a1-b3c3-98393c44549d"
    span_id: "0c73b1ef4a617f7e"
[00:23:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:46 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "1337fb06-f6a8-4738-a3a3-077ac22e44e0"
    trace_id: "1cf1d1da-96f8-47a1-b3c3-98393c44549d"
    span_id: "0c73b1ef4a617f7e"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:23:49 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "e7c53208-3191-4bf6-9064-23da10631e62"
    trace_id: "a11f4c9a-d6cc-4f14-a3b1-3760b21d89a8"
    span_id: "22c10069996334cb"
[00:23:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:49 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "e7c53208-3191-4bf6-9064-23da10631e62"
    trace_id: "a11f4c9a-d6cc-4f14-a3b1-3760b21d89a8"
    span_id: "22c10069996334cb"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:23:52 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "cfa407b2-37c7-435d-b877-25bb50adf9ff"
    trace_id: "defada0e-cdae-4d6d-b011-58c09b71aee4"
    span_id: "3159c2d813c7055b"
[00:23:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:52 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "cfa407b2-37c7-435d-b877-25bb50adf9ff"
    trace_id: "defada0e-cdae-4d6d-b011-58c09b71aee4"
    span_id: "3159c2d813c7055b"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 3
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:23:54 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "63303208-9f3f-48ea-8bb9-e3f9e9cad371"
    trace_id: "b95418b3-c05d-4f3b-ae84-4589aa6d9250"
    span_id: "bed21ec9403e2bf7"
[00:23:54 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:54 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:54 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:54 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:54 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "63303208-9f3f-48ea-8bb9-e3f9e9cad371"
    trace_id: "b95418b3-c05d-4f3b-ae84-4589aa6d9250"
    span_id: "bed21ec9403e2bf7"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: true, resultsLength: 1, resultsType: 'object' }
[DEBUG-STREAM] Processing results { count: 1 }
{"ts":"2025-11-18T00:23:55.531Z","scope":"redis-bus","msg":"[PHASE-3] Processing message from stream","level":"INFO","streamKey":"stream:orchestrator:results","messageId":"1763425435528-0","unwrapPath":"messageData.payload.msg","workflow_id":"31d196e6-0e29-474d-a96c-bed6cfd35fbb","task_id":"aa9c886d-cd7c-4ed2-ae00-45cd81291a62","messageKeys":"task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage"}
[DEBUG-STREAM] Checking handlers {
  topic: 'orchestrator:results',
  hasHandlers: true,
  handlerCount: 1,
  subscriptionsKeys: 'orchestrator:results'
}
[DEBUG-STREAM] About to invoke handlers { count: 1 }
[DEBUG-STATE-MACHINE-1] Raw message received from orchestrator:results {
  message_type: 'object',
  message_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage',
  has_workflow_id: true,
  has_stage: true,
  has_success: true
}
[DEBUG-STATE-MACHINE-2] AgentResult structure {
  workflow_id: '31d196e6-0e29-474d-a96c-bed6cfd35fbb',
  task_id: 'aa9c886d-cd7c-4ed2-ae00-45cd81291a62',
  agent_id: 'validation-31241bcf',
  success: true,
  status: 'success',
  stage: 'validation',
  has_result: true,
  all_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage'
}
[DEBUG-STATE-MACHINE-3] Looking up state machine {
  workflow_id: '31d196e6-0e29-474d-a96c-bed6cfd35fbb',
  machines_count: 2,
  machine_exists: false
}
[DEBUG-STATE-MACHINE-ERROR] No state machine found! {
  workflow_id: '31d196e6-0e29-474d-a96c-bed6cfd35fbb',
  available_machines: '2af61467-1348-4c7f-9c8a-4516fd0c6af6,5c42767e-353b-42d8-9e32-467b40a78774',
  message_id: undefined
}
[DEBUG-STREAM] Handlers completed successfully
[DEBUG-STREAM] Message ACKed { messageId: '1763425435528-0' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:23:55 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine received agent result[39m
[00:23:55 UTC] [33mWARN[39m (orchestrator): [36m[PHASE-4] No state machine found for workflow[39m
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:23:56 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "b38d7303-de60-4426-8d5b-4995abfc697a"
    trace_id: "fb866cf4-9c4a-4f28-9268-40e7375542ec"
    span_id: "8663fc7bd43b0a9a"
[00:23:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:56 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "b38d7303-de60-4426-8d5b-4995abfc697a"
    trace_id: "fb866cf4-9c4a-4f28-9268-40e7375542ec"
    span_id: "8663fc7bd43b0a9a"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:23:58 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "e9c383a6-8e06-487a-93ef-a78a8775b1bf"
    trace_id: "d18d7eb6-5be3-47c4-95cd-d0e677ed6133"
    span_id: "2aae6dbc3e3043b1"
[00:23:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:23:58 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "e9c383a6-8e06-487a-93ef-a78a8775b1bf"
    trace_id: "d18d7eb6-5be3-47c4-95cd-d0e677ed6133"
    span_id: "2aae6dbc3e3043b1"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 3
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:24:00 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "7528d53e-1d00-4d8e-8791-4296d2d905d7"
    trace_id: "9575ea85-501b-42cd-9bc9-3a0091019921"
    span_id: "0cd628d0f4b0613b"
[00:24:00 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:00 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:00 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:00 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:00 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "7528d53e-1d00-4d8e-8791-4296d2d905d7"
    trace_id: "9575ea85-501b-42cd-9bc9-3a0091019921"
    span_id: "0cd628d0f4b0613b"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 8
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:02 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "d3322e74-577d-41a2-867e-af88524b5e5c"
    trace_id: "2099369a-ca5a-45f3-b109-4ec7400fc538"
    span_id: "23fc5ce5d032b540"
[00:24:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:02 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "d3322e74-577d-41a2-867e-af88524b5e5c"
    trace_id: "2099369a-ca5a-45f3-b109-4ec7400fc538"
    span_id: "23fc5ce5d032b540"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:04 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "be2fdb07-c424-44c5-a095-78c51fd77acf"
    trace_id: "51286cf2-eea1-41d7-adec-7a23d6aa42ec"
    span_id: "3fdb1c82529aaa21"
[00:24:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:04 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "be2fdb07-c424-44c5-a095-78c51fd77acf"
    trace_id: "51286cf2-eea1-41d7-adec-7a23d6aa42ec"
    span_id: "3fdb1c82529aaa21"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: true, resultsLength: 1, resultsType: 'object' }
[DEBUG-STREAM] Processing results { count: 1 }
{"ts":"2025-11-18T00:24:05.639Z","scope":"redis-bus","msg":"[PHASE-3] Processing message from stream","level":"INFO","streamKey":"stream:orchestrator:results","messageId":"1763425445637-0","unwrapPath":"messageData.payload.msg","workflow_id":"f9c02b35-8c03-4273-b0ed-6d7815bbe0f0","task_id":"96d90d73-b27d-4db4-b122-f0373c7c12db","messageKeys":"task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage"}
[DEBUG-STREAM] Checking handlers {
  topic: 'orchestrator:results',
  hasHandlers: true,
  handlerCount: 1,
  subscriptionsKeys: 'orchestrator:results'
}
[DEBUG-STREAM] About to invoke handlers { count: 1 }
[DEBUG-STATE-MACHINE-1] Raw message received from orchestrator:results {
  message_type: 'object',
  message_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage',
  has_workflow_id: true,
  has_stage: true,
  has_success: true
}
[DEBUG-STATE-MACHINE-2] AgentResult structure {
  workflow_id: 'f9c02b35-8c03-4273-b0ed-6d7815bbe0f0',
  task_id: '96d90d73-b27d-4db4-b122-f0373c7c12db',
  agent_id: 'validation-31241bcf',
  success: true,
  status: 'success',
  stage: 'validation',
  has_result: true,
  all_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage'
}
[DEBUG-STATE-MACHINE-3] Looking up state machine {
  workflow_id: 'f9c02b35-8c03-4273-b0ed-6d7815bbe0f0',
  machines_count: 2,
  machine_exists: false
}
[DEBUG-STATE-MACHINE-ERROR] No state machine found! {
  workflow_id: 'f9c02b35-8c03-4273-b0ed-6d7815bbe0f0',
  available_machines: '2af61467-1348-4c7f-9c8a-4516fd0c6af6,5c42767e-353b-42d8-9e32-467b40a78774',
  message_id: undefined
}
[DEBUG-STREAM] Handlers completed successfully
[DEBUG-STREAM] Message ACKed { messageId: '1763425445637-0' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:24:05 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine received agent result[39m
[00:24:05 UTC] [33mWARN[39m (orchestrator): [36m[PHASE-4] No state machine found for workflow[39m
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:06 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "4cdaa61f-d882-40b5-820b-bfab6e2fd903"
    trace_id: "4254f12d-bd0f-4726-af3f-d0a5b4c4daf2"
    span_id: "ea4ea5c4604fc3c4"
[00:24:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:06 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "4cdaa61f-d882-40b5-820b-bfab6e2fd903"
    trace_id: "4254f12d-bd0f-4726-af3f-d0a5b4c4daf2"
    span_id: "ea4ea5c4604fc3c4"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:08 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "ce53bace-c89c-4793-91ec-9ab644ebcce4"
    trace_id: "2e9ec392-285e-4027-a353-968d9e1502b9"
    span_id: "377dbaf956ec32c1"
[00:24:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:08 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "ce53bace-c89c-4793-91ec-9ab644ebcce4"
    trace_id: "2e9ec392-285e-4027-a353-968d9e1502b9"
    span_id: "377dbaf956ec32c1"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:10 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "e99882ad-df94-4e36-aaa1-3462df6ab0c1"
    trace_id: "bac6cd4f-14ff-40d1-a453-41206b674791"
    span_id: "07adee1e545ca4a2"
[00:24:10 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:10 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:10 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:10 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:10 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "e99882ad-df94-4e36-aaa1-3462df6ab0c1"
    trace_id: "bac6cd4f-14ff-40d1-a453-41206b674791"
    span_id: "07adee1e545ca4a2"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:13 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "cf6a449c-118a-42fc-a36d-e061cc90c073"
    trace_id: "1a60bf35-74b0-4140-8177-2a610fa5af12"
    span_id: "0da97fd6e9eebd6b"
[00:24:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:13 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "cf6a449c-118a-42fc-a36d-e061cc90c073"
    trace_id: "1a60bf35-74b0-4140-8177-2a610fa5af12"
    span_id: "0da97fd6e9eebd6b"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: true, resultsLength: 1, resultsType: 'object' }
[DEBUG-STREAM] Processing results { count: 1 }
{"ts":"2025-11-18T00:24:15.746Z","scope":"redis-bus","msg":"[PHASE-3] Processing message from stream","level":"INFO","streamKey":"stream:orchestrator:results","messageId":"1763425455744-0","unwrapPath":"messageData.payload.msg","workflow_id":"3c2ea7f0-dca6-4a9d-97c5-de6127c492f4","task_id":"a08d9248-9cad-478d-b679-453a584b549d","messageKeys":"task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage"}
[DEBUG-STREAM] Checking handlers {
  topic: 'orchestrator:results',
  hasHandlers: true,
  handlerCount: 1,
  subscriptionsKeys: 'orchestrator:results'
}
[DEBUG-STREAM] About to invoke handlers { count: 1 }
[DEBUG-STATE-MACHINE-1] Raw message received from orchestrator:results {
  message_type: 'object',
  message_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage',
  has_workflow_id: true,
  has_stage: true,
  has_success: true
}
[DEBUG-STATE-MACHINE-2] AgentResult structure {
  workflow_id: '3c2ea7f0-dca6-4a9d-97c5-de6127c492f4',
  task_id: 'a08d9248-9cad-478d-b679-453a584b549d',
  agent_id: 'validation-31241bcf',
  success: true,
  status: 'success',
  stage: 'validation',
  has_result: true,
  all_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage'
}
[DEBUG-STATE-MACHINE-3] Looking up state machine {
  workflow_id: '3c2ea7f0-dca6-4a9d-97c5-de6127c492f4',
  machines_count: 2,
  machine_exists: false
}
[DEBUG-STATE-MACHINE-ERROR] No state machine found! {
  workflow_id: '3c2ea7f0-dca6-4a9d-97c5-de6127c492f4',
  available_machines: '2af61467-1348-4c7f-9c8a-4516fd0c6af6,5c42767e-353b-42d8-9e32-467b40a78774',
  message_id: undefined
}
[DEBUG-STREAM] Handlers completed successfully
[DEBUG-STREAM] Message ACKed { messageId: '1763425455744-0' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:24:15 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "51ba0d33-845a-4a65-b884-b73849f0d994"
    trace_id: "3df12588-40e0-4319-a8c3-0ea9e326e1eb"
    span_id: "fc49b76e756fdc31"
[00:24:15 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:15 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:15 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:15 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:15 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "51ba0d33-845a-4a65-b884-b73849f0d994"
    trace_id: "3df12588-40e0-4319-a8c3-0ea9e326e1eb"
    span_id: "fc49b76e756fdc31"
[00:24:15 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine received agent result[39m
[00:24:15 UTC] [33mWARN[39m (orchestrator): [36m[PHASE-4] No state machine found for workflow[39m
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:17 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "446ff60f-a1c9-4897-b133-04bde7a5cbe5"
    trace_id: "77ac0329-afc9-4c89-ad30-ee2308bb62a3"
    span_id: "22aeac6749280a1d"
[00:24:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:17 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "446ff60f-a1c9-4897-b133-04bde7a5cbe5"
    trace_id: "77ac0329-afc9-4c89-ad30-ee2308bb62a3"
    span_id: "22aeac6749280a1d"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:19 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "d64799c4-348c-4827-be26-acc2ad8997fb"
    trace_id: "a7c2b62e-a45d-42ba-8aa8-3044313a0b34"
    span_id: "c73b594e392e3b9c"
[00:24:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:19 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "d64799c4-348c-4827-be26-acc2ad8997fb"
    trace_id: "a7c2b62e-a45d-42ba-8aa8-3044313a0b34"
    span_id: "c73b594e392e3b9c"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:21 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "a2065891-8a47-4366-a531-171f4c9054fc"
    trace_id: "a899c56a-4e3f-4037-b7f7-20d3121b6057"
    span_id: "b452018147250e06"
[00:24:21 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:21 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:21 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:21 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:21 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "a2065891-8a47-4366-a531-171f4c9054fc"
    trace_id: "a899c56a-4e3f-4037-b7f7-20d3121b6057"
    span_id: "b452018147250e06"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:23 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "d85d01fc-f308-4730-b0a1-bbc0d71ebd6b"
    trace_id: "3f84dd2c-34b2-43ba-9a13-b710b2ce1762"
    span_id: "e5049083380df5c8"
[00:24:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:23 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "d85d01fc-f308-4730-b0a1-bbc0d71ebd6b"
    trace_id: "3f84dd2c-34b2-43ba-9a13-b710b2ce1762"
    span_id: "e5049083380df5c8"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: true, resultsLength: 1, resultsType: 'object' }
[DEBUG-STREAM] Processing results { count: 1 }
{"ts":"2025-11-18T00:24:25.851Z","scope":"redis-bus","msg":"[PHASE-3] Processing message from stream","level":"INFO","streamKey":"stream:orchestrator:results","messageId":"1763425465850-0","unwrapPath":"messageData.payload.msg","workflow_id":"e43c45e3-7d4a-46fb-8957-07931fbf41a1","task_id":"b1500c22-3eca-4e1d-9b9b-e4e0c01903bd","messageKeys":"task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage"}
[DEBUG-STREAM] Checking handlers {
  topic: 'orchestrator:results',
  hasHandlers: true,
  handlerCount: 1,
  subscriptionsKeys: 'orchestrator:results'
}
[DEBUG-STREAM] About to invoke handlers { count: 1 }
[DEBUG-STATE-MACHINE-1] Raw message received from orchestrator:results {
  message_type: 'object',
  message_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage',
  has_workflow_id: true,
  has_stage: true,
  has_success: true
}
[DEBUG-STATE-MACHINE-2] AgentResult structure {
  workflow_id: 'e43c45e3-7d4a-46fb-8957-07931fbf41a1',
  task_id: 'b1500c22-3eca-4e1d-9b9b-e4e0c01903bd',
  agent_id: 'validation-31241bcf',
  success: true,
  status: 'success',
  stage: 'validation',
  has_result: true,
  all_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage'
}
[DEBUG-STATE-MACHINE-3] Looking up state machine {
  workflow_id: 'e43c45e3-7d4a-46fb-8957-07931fbf41a1',
  machines_count: 2,
  machine_exists: false
}
[DEBUG-STATE-MACHINE-ERROR] No state machine found! {
  workflow_id: 'e43c45e3-7d4a-46fb-8957-07931fbf41a1',
  available_machines: '2af61467-1348-4c7f-9c8a-4516fd0c6af6,5c42767e-353b-42d8-9e32-467b40a78774',
  message_id: undefined
}
[DEBUG-STREAM] Handlers completed successfully
[DEBUG-STREAM] Message ACKed { messageId: '1763425465850-0' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:24:25 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "fdc50ba9-616b-4d79-89eb-3cb4b4f6ed38"
    trace_id: "825e6148-5de1-460d-bd5d-943c4899a7b5"
    span_id: "0040f1501413d492"
[00:24:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:25 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "fdc50ba9-616b-4d79-89eb-3cb4b4f6ed38"
    trace_id: "825e6148-5de1-460d-bd5d-943c4899a7b5"
    span_id: "0040f1501413d492"
[00:24:25 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine received agent result[39m
[00:24:25 UTC] [33mWARN[39m (orchestrator): [36m[PHASE-4] No state machine found for workflow[39m
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:27 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "d3fb6b29-e91d-4908-97ad-850f4c546003"
    trace_id: "6984fad2-2734-49ae-8083-5af5f2150b25"
    span_id: "04480a2924900ae6"
[00:24:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:27 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "d3fb6b29-e91d-4908-97ad-850f4c546003"
    trace_id: "6984fad2-2734-49ae-8083-5af5f2150b25"
    span_id: "04480a2924900ae6"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:29 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "ecf69f45-d09c-4996-9da5-927ba7b00626"
    trace_id: "bff43c1f-4aa7-420a-ab27-c544a1acb0fa"
    span_id: "3f6a6e00f90deee8"
[00:24:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:29 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "ecf69f45-d09c-4996-9da5-927ba7b00626"
    trace_id: "bff43c1f-4aa7-420a-ab27-c544a1acb0fa"
    span_id: "3f6a6e00f90deee8"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:32 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "00e07958-1ea5-4534-9d95-5f6b98349d98"
    trace_id: "78bd97e5-d3f0-43df-be32-b9a90843b699"
    span_id: "ec4dc460975c9905"
[00:24:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:32 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "00e07958-1ea5-4534-9d95-5f6b98349d98"
    trace_id: "78bd97e5-d3f0-43df-be32-b9a90843b699"
    span_id: "ec4dc460975c9905"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:34 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "b9fa1c04-ca82-4f2d-9a45-307c7a2dfbd4"
    trace_id: "0b25dbd8-467e-4080-b860-a69b76cf649d"
    span_id: "dda125d4bf5372b2"
[00:24:34 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:34 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:34 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:34 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:34 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "b9fa1c04-ca82-4f2d-9a45-307c7a2dfbd4"
    trace_id: "0b25dbd8-467e-4080-b860-a69b76cf649d"
    span_id: "dda125d4bf5372b2"
[DEBUG-STREAM] XREADGROUP returned { hasResults: true, resultsLength: 1, resultsType: 'object' }
[DEBUG-STREAM] Processing results { count: 1 }
{"ts":"2025-11-18T00:24:35.960Z","scope":"redis-bus","msg":"[PHASE-3] Processing message from stream","level":"INFO","streamKey":"stream:orchestrator:results","messageId":"1763425475957-0","unwrapPath":"messageData.payload.msg","workflow_id":"62e2bc7e-e560-4287-8254-ac817157e3bc","task_id":"d2e3ee64-801d-40fc-8483-cfe7123d9177","messageKeys":"task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage"}
[DEBUG-STREAM] Checking handlers {
  topic: 'orchestrator:results',
  hasHandlers: true,
  handlerCount: 1,
  subscriptionsKeys: 'orchestrator:results'
}
[DEBUG-STREAM] About to invoke handlers { count: 1 }
[DEBUG-STATE-MACHINE-1] Raw message received from orchestrator:results {
  message_type: 'object',
  message_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage',
  has_workflow_id: true,
  has_stage: true,
  has_success: true
}
[DEBUG-STATE-MACHINE-2] AgentResult structure {
  workflow_id: '62e2bc7e-e560-4287-8254-ac817157e3bc',
  task_id: 'd2e3ee64-801d-40fc-8483-cfe7123d9177',
  agent_id: 'validation-31241bcf',
  success: true,
  status: 'success',
  stage: 'validation',
  has_result: true,
  all_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage'
}
[DEBUG-STATE-MACHINE-3] Looking up state machine {
  workflow_id: '62e2bc7e-e560-4287-8254-ac817157e3bc',
  machines_count: 2,
  machine_exists: false
}
[DEBUG-STATE-MACHINE-ERROR] No state machine found! {
  workflow_id: '62e2bc7e-e560-4287-8254-ac817157e3bc',
  available_machines: '2af61467-1348-4c7f-9c8a-4516fd0c6af6,5c42767e-353b-42d8-9e32-467b40a78774',
  message_id: undefined
}
[DEBUG-STREAM] Handlers completed successfully
[DEBUG-STREAM] Message ACKed { messageId: '1763425475957-0' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:35 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine received agent result[39m
[00:24:35 UTC] [33mWARN[39m (orchestrator): [36m[PHASE-4] No state machine found for workflow[39m
[00:24:36 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "3b08cdf8-2321-44ea-8066-4dd9ab98bfd3"
    trace_id: "17e13bb3-cf68-4316-bbc7-7abd25be365f"
    span_id: "a4b97f0dbfe54910"
[00:24:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:36 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "3b08cdf8-2321-44ea-8066-4dd9ab98bfd3"
    trace_id: "17e13bb3-cf68-4316-bbc7-7abd25be365f"
    span_id: "a4b97f0dbfe54910"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:38 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "57e1cf52-1ce1-4b7e-a47b-bcafc60fd6f2"
    trace_id: "4a853102-d990-40ce-a498-885d3b6c6142"
    span_id: "e8708ac20bc527bc"
[00:24:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:38 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "57e1cf52-1ce1-4b7e-a47b-bcafc60fd6f2"
    trace_id: "4a853102-d990-40ce-a498-885d3b6c6142"
    span_id: "e8708ac20bc527bc"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:40 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "76942965-6eed-41dd-a299-a1e94359ceec"
    trace_id: "9dffad51-eec7-4ba9-adb7-41a728d556d3"
    span_id: "4801911f545e770e"
[00:24:40 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:40 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:40 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:40 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:40 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "76942965-6eed-41dd-a299-a1e94359ceec"
    trace_id: "9dffad51-eec7-4ba9-adb7-41a728d556d3"
    span_id: "4801911f545e770e"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:42 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "14a7d839-d1aa-452a-9710-0ad557f40c92"
    trace_id: "6b5c9842-171a-4366-b977-86381cd3fb5c"
    span_id: "bad21cc93335755c"
[00:24:42 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:42 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:42 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:42 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:42 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "14a7d839-d1aa-452a-9710-0ad557f40c92"
    trace_id: "6b5c9842-171a-4366-b977-86381cd3fb5c"
    span_id: "bad21cc93335755c"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:44 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "409cf63a-fc0d-4635-8b0f-c438683d25e3"
    trace_id: "10a2dd56-f327-4c5c-9f14-c7a57ec857d8"
    span_id: "18a62ad6fe1e2cc4"
[00:24:44 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:44 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:44 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:44 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:44 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "409cf63a-fc0d-4635-8b0f-c438683d25e3"
    trace_id: "10a2dd56-f327-4c5c-9f14-c7a57ec857d8"
    span_id: "18a62ad6fe1e2cc4"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: true, resultsLength: 1, resultsType: 'object' }
[DEBUG-STREAM] Processing results { count: 1 }
{"ts":"2025-11-18T00:24:46.067Z","scope":"redis-bus","msg":"[PHASE-3] Processing message from stream","level":"INFO","streamKey":"stream:orchestrator:results","messageId":"1763425486065-0","unwrapPath":"messageData.payload.msg","workflow_id":"b598f3cd-3f79-4df6-b517-b88f752eb357","task_id":"d942d7f1-c794-4d6e-9593-5dec72b315b7","messageKeys":"task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage"}
[DEBUG-STREAM] Checking handlers {
  topic: 'orchestrator:results',
  hasHandlers: true,
  handlerCount: 1,
  subscriptionsKeys: 'orchestrator:results'
}
[DEBUG-STREAM] About to invoke handlers { count: 1 }
[DEBUG-STATE-MACHINE-1] Raw message received from orchestrator:results {
  message_type: 'object',
  message_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage',
  has_workflow_id: true,
  has_stage: true,
  has_success: true
}
[DEBUG-STATE-MACHINE-2] AgentResult structure {
  workflow_id: 'b598f3cd-3f79-4df6-b517-b88f752eb357',
  task_id: 'd942d7f1-c794-4d6e-9593-5dec72b315b7',
  agent_id: 'validation-31241bcf',
  success: true,
  status: 'success',
  stage: 'validation',
  has_result: true,
  all_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage'
}
[DEBUG-STATE-MACHINE-3] Looking up state machine {
  workflow_id: 'b598f3cd-3f79-4df6-b517-b88f752eb357',
  machines_count: 2,
  machine_exists: false
}
[DEBUG-STATE-MACHINE-ERROR] No state machine found! {
  workflow_id: 'b598f3cd-3f79-4df6-b517-b88f752eb357',
  available_machines: '2af61467-1348-4c7f-9c8a-4516fd0c6af6,5c42767e-353b-42d8-9e32-467b40a78774',
  message_id: undefined
}
[DEBUG-STREAM] Handlers completed successfully
[DEBUG-STREAM] Message ACKed { messageId: '1763425486065-0' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:46 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine received agent result[39m
[00:24:46 UTC] [33mWARN[39m (orchestrator): [36m[PHASE-4] No state machine found for workflow[39m
[00:24:46 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "771617c8-181e-4445-95f0-cabf16f9d55b"
    trace_id: "e4ec9359-ddcd-4275-943f-54183f20be2e"
    span_id: "2c24ba545e0f3fa6"
[00:24:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:46 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "771617c8-181e-4445-95f0-cabf16f9d55b"
    trace_id: "e4ec9359-ddcd-4275-943f-54183f20be2e"
    span_id: "2c24ba545e0f3fa6"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:48 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "6f0fa10b-a70c-487b-8239-0874b56c3317"
    trace_id: "4cf38fc2-c32e-4419-afd3-d9c5469af4e5"
    span_id: "d77234f55b142e71"
[00:24:48 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:48 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:48 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:48 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:48 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "6f0fa10b-a70c-487b-8239-0874b56c3317"
    trace_id: "4cf38fc2-c32e-4419-afd3-d9c5469af4e5"
    span_id: "d77234f55b142e71"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 393
[00:24:50 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "aa4aa9b0-49da-4ba5-b224-734e79d49282"
    trace_id: "afa3cfa9-42c9-43c9-8dff-6a2d175e37a8"
    span_id: "42dc90cf19fd9872"
[00:24:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:24:50 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "aa4aa9b0-49da-4ba5-b224-734e79d49282"
    trace_id: "afa3cfa9-42c9-43c9-8dff-6a2d175e37a8"
    span_id: "42dc90cf19fd9872"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: true, resultsLength: 1, resultsType: 'object' }
[DEBUG-STREAM] Processing results { count: 1 }
{"ts":"2025-11-18T00:24:56.173Z","scope":"redis-bus","msg":"[PHASE-3] Processing message from stream","level":"INFO","streamKey":"stream:orchestrator:results","messageId":"1763425496172-0","unwrapPath":"messageData.payload.msg","workflow_id":"25fae2ad-8d6d-49e3-bf2a-77ff31aa8505","task_id":"8fa865c0-01f6-455f-9f4b-29e32ebae7ce","messageKeys":"task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage"}
[DEBUG-STREAM] Checking handlers {
  topic: 'orchestrator:results',
  hasHandlers: true,
  handlerCount: 1,
  subscriptionsKeys: 'orchestrator:results'
}
[DEBUG-STREAM] About to invoke handlers { count: 1 }
[DEBUG-STATE-MACHINE-1] Raw message received from orchestrator:results {
  message_type: 'object',
  message_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage',
  has_workflow_id: true,
  has_stage: true,
  has_success: true
}
[DEBUG-STATE-MACHINE-2] AgentResult structure {
  workflow_id: '25fae2ad-8d6d-49e3-bf2a-77ff31aa8505',
  task_id: '8fa865c0-01f6-455f-9f4b-29e32ebae7ce',
  agent_id: 'validation-31241bcf',
  success: true,
  status: 'success',
  stage: 'validation',
  has_result: true,
  all_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage'
}
[DEBUG-STATE-MACHINE-3] Looking up state machine {
  workflow_id: '25fae2ad-8d6d-49e3-bf2a-77ff31aa8505',
  machines_count: 2,
  machine_exists: false
}
[DEBUG-STATE-MACHINE-ERROR] No state machine found! {
  workflow_id: '25fae2ad-8d6d-49e3-bf2a-77ff31aa8505',
  available_machines: '2af61467-1348-4c7f-9c8a-4516fd0c6af6,5c42767e-353b-42d8-9e32-467b40a78774',
  message_id: undefined
}
[DEBUG-STREAM] Handlers completed successfully
[DEBUG-STREAM] Message ACKed { messageId: '1763425496172-0' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:24:56 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine received agent result[39m
[00:24:56 UTC] [33mWARN[39m (orchestrator): [36m[PHASE-4] No state machine found for workflow[39m
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: true, resultsLength: 1, resultsType: 'object' }
[DEBUG-STREAM] Processing results { count: 1 }
{"ts":"2025-11-18T00:25:06.278Z","scope":"redis-bus","msg":"[PHASE-3] Processing message from stream","level":"INFO","streamKey":"stream:orchestrator:results","messageId":"1763425506276-0","unwrapPath":"messageData.payload.msg","workflow_id":"2af61467-1348-4c7f-9c8a-4516fd0c6af6","task_id":"c6efcb2f-2051-449c-a7f0-a9dcccbf3608","messageKeys":"task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage"}
[DEBUG-STREAM] Checking handlers {
  topic: 'orchestrator:results',
  hasHandlers: true,
  handlerCount: 1,
  subscriptionsKeys: 'orchestrator:results'
}
[DEBUG-STREAM] About to invoke handlers { count: 1 }
[DEBUG-STATE-MACHINE-1] Raw message received from orchestrator:results {
  message_type: 'object',
  message_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage',
  has_workflow_id: true,
  has_stage: true,
  has_success: true
}
[DEBUG-STATE-MACHINE-2] AgentResult structure {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  task_id: 'c6efcb2f-2051-449c-a7f0-a9dcccbf3608',
  agent_id: 'validation-31241bcf',
  success: true,
  status: 'success',
  stage: 'validation',
  has_result: true,
  all_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage'
}
[DEBUG-STATE-MACHINE-3] Looking up state machine {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  machines_count: 2,
  machine_exists: true
}
[DEBUG-STATE-MACHINE-4] State machine found, checking success {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  success: true,
  status: 'success'
}
[DEBUG-STATE-MACHINE-5] Result is successful, preparing STAGE_COMPLETE {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  stage_from_message: 'validation',
  task_id: 'c6efcb2f-2051-449c-a7f0-a9dcccbf3608'
}
[DEBUG-TASK-CREATE-1] taskCreator exists, attempting to create next task {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  completed_stage: 'validation'
}
[DEBUG-TASK-CREATE-2] Calling waitForStageTransition {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  completed_stage: 'validation'
}
{"ts":"2025-11-18T00:25:06.279Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:2af61467-1348-4c7f-9c8a-4516fd0c6af6","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:25:06.279Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"2af61467-1348-4c7f-9c8a-4516fd0c6af6","current_stage":"validation","status":"running","progress":60}
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
{"ts":"2025-11-18T00:25:06.290Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:2af61467-1348-4c7f-9c8a-4516fd0c6af6","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:25:06.290Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"2af61467-1348-4c7f-9c8a-4516fd0c6af6","current_stage":"e2e_testing","status":"running","progress":60}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[DEBUG-TASK-CREATE-3] waitForStageTransition returned {
  workflow_id: '2af61467-1348-4c7f-9c8a-4516fd0c6af6',
  workflow_found: true,
  current_stage: 'e2e_testing',
  status: 'running'
}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[DEBUG-STREAM] Handlers completed successfully
[DEBUG-STREAM] Message ACKed { messageId: '1763425506276-0' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:25:06 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine received agent result[39m
[00:25:06 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] Sending STAGE_COMPLETE to state machine[39m
[00:25:06 UTC] [32mINFO[39m (orchestrator): [36mStage completed[39m
[00:25:06 UTC] [34mDEBUG[39m (orchestrator): [36mComputing next stage from current stage[39m
[00:25:06 UTC] [32mINFO[39m (orchestrator): [36mStage transition computed[39m
[00:25:06 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Evaluating state entered (nextStage pre-computed)[39m
[00:25:06 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service executing[39m
[00:25:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:06 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service completed[39m
[00:25:06 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Transitioning to next stage (ABSOLUTE assignment)[39m
[00:25:06 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Context updated in memory (ABSOLUTE)[39m
[00:25:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:06 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 CAS] Workflow updated successfully (CAS check passed)[39m
[00:25:06 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Database persisted[39m
[00:25:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:06 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Stage transition detected[39m
[00:25:06 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Creating task for next stage after STAGE_COMPLETE[39m
[00:25:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:06 UTC] [32mINFO[39m (orchestrator): [36müîç [SESSION #65] Building AgentEnvelope v2.0.0[39m
[00:25:06 UTC] [31mERROR[39m (orchestrator): [36m[SESSION #66] Failed to create task for next stage[39m
[00:25:06 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine event sent autonomously[39m
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="POST",path="/api/v1/workflows"}: 1
prisma:query BEGIN
prisma:query INSERT INTO "public"."Workflow" ("id","type","name","description","requirements","status","current_stage","priority","progress","version","stage_outputs","trace_id","current_span_id","created_at","updated_at","created_by") VALUES ($1,CAST($2::text AS "public"."WorkflowType"),$3,$4,$5,CAST($6::text AS "public"."WorkflowStatus"),$7,CAST($8::text AS "public"."Priority"),$9,$10,$11,$12,$13,$14,$15,$16) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query INSERT INTO "public"."WorkflowEvent" ("id","workflow_id","event_type","payload","timestamp","trace_id") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id"
prisma:query INSERT INTO "public"."WorkflowStage" ("id","status","retry_count","workflow_id","name") VALUES ($1,CAST($2::text AS "public"."StageStatus"),$3,$4,$5), ($6,CAST($7::text AS "public"."StageStatus"),$8,$9,$10), ($11,CAST($12::text AS "public"."StageStatus"),$13,$14,$15), ($16,CAST($17::text AS "public"."StageStatus"),$18,$19,$20), ($21,CAST($22::text AS "public"."StageStatus"),$23,$24,$25), ($26,CAST($27::text AS "public"."StageStatus"),$28,$29,$30), ($31,CAST($32::text AS "public"."StageStatus"),$33,$34,$35)
prisma:query COMMIT
{"ts":"2025-11-18T00:25:14.724Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:e6a0d78f-c95f-4638-8a67-261d415d626e","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:25:14.724Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"e6a0d78f-c95f-4638-8a67-261d415d626e","current_stage":"initialization","status":"running","progress":0}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT 1
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "status" = CAST($1::text AS "public"."WorkflowStatus"), "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:error 
Invalid `this.prisma.workflow.update()` invocation in
/Users/Greg/Projects/apps/zyp/agent-sdlc/packages/orchestrator/src/repositories/workflow.repository.ts:173:52

  170 const currentVersion = existing.version;
  171 
  172 try {
‚Üí 173   const updated = await this.prisma.workflow.update(
An operation failed because it depends on one or more records that were required but not found. Record to update not found.
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query INSERT INTO "public"."AgentTask" ("id","task_id","workflow_id","agent_type","status","priority","payload","trace_id","span_id","parent_span_id","assigned_at","retry_count","max_retries","timeout_ms") VALUES ($1,$2,$3,CAST($4::text AS "public"."AgentType"),CAST($5::text AS "public"."TaskStatus"),CAST($6::text AS "public"."Priority"),$7,$8,$9,$10,$11,$12,$13,$14) RETURNING "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
[00:25:14 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "b51a2942-2da9-4b42-9276-e277732264d8"
    trace_id: "817c5c03-5edd-44b5-9061-1e3e6f5baf4a"
    span_id: "d81e245ca5d34d04"
[00:25:14 UTC] [32mINFO[39m (orchestrator): [36mCreating workflow - Full request details[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [32mINFO[39m (orchestrator): [36mWorkflow created[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [32mINFO[39m (orchestrator): [36mWorkflow state transition[39m
[00:25:14 UTC] [32mINFO[39m (orchestrator): [36m[EB:PUBLISHED] Event published to Redis[39m
[00:25:14 UTC] [32mINFO[39m (orchestrator): [36müîç [WORKFLOW-TRACE] Workflow created[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 CAS] Workflow updated successfully (CAS check passed)[39m
[00:25:14 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #79] Workflow status updated to running[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [33mWARN[39m (orchestrator): [36m[SESSION #64 CAS] Optimistic lock failure - concurrent update detected[39m
[00:25:14 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 RETRY] Retrying after concurrency conflict[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [32mINFO[39m (orchestrator): [36müîç [SESSION #65] Building AgentEnvelope v2.0.0[39m
[00:25:14 UTC] [32mINFO[39m (orchestrator): [36m[DEBUG] Built envelope - pre-publish verification[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Agent envelope created[39m
[00:25:14 UTC] [32mINFO[39m (orchestrator): [36m[EB:PUBLISHED] Event published to Redis[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:14 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 CAS] Workflow updated successfully (CAS check passed)[39m
[00:25:14 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #26] Workflow stage updated successfully[39m
[DEBUG-STREAM] XREADGROUP returned { hasResults: true, resultsLength: 1, resultsType: 'object' }
[DEBUG-STREAM] Processing results { count: 1 }
{"ts":"2025-11-18T00:25:16.384Z","scope":"redis-bus","msg":"[PHASE-3] Processing message from stream","level":"INFO","streamKey":"stream:orchestrator:results","messageId":"1763425516382-0","unwrapPath":"messageData.payload.msg","workflow_id":"5c42767e-353b-42d8-9e32-467b40a78774","task_id":"70f0fa1e-bbfe-40a4-9cbb-c520720decf4","messageKeys":"task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage"}
[DEBUG-STREAM] Checking handlers {
  topic: 'orchestrator:results',
  hasHandlers: true,
  handlerCount: 1,
  subscriptionsKeys: 'orchestrator:results'
}
[DEBUG-STREAM] About to invoke handlers { count: 1 }
[DEBUG-STATE-MACHINE-1] Raw message received from orchestrator:results {
  message_type: 'object',
  message_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage',
  has_workflow_id: true,
  has_stage: true,
  has_success: true
}
[DEBUG-STATE-MACHINE-2] AgentResult structure {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  task_id: '70f0fa1e-bbfe-40a4-9cbb-c520720decf4',
  agent_id: 'validation-31241bcf',
  success: true,
  status: 'success',
  stage: 'validation',
  has_result: true,
  all_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage'
}
[DEBUG-STATE-MACHINE-3] Looking up state machine {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  machines_count: 3,
  machine_exists: true
}
[DEBUG-STATE-MACHINE-4] State machine found, checking success {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  success: true,
  status: 'success'
}
[DEBUG-STATE-MACHINE-5] Result is successful, preparing STAGE_COMPLETE {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  stage_from_message: 'validation',
  task_id: '70f0fa1e-bbfe-40a4-9cbb-c520720decf4'
}
[DEBUG-TASK-CREATE-1] taskCreator exists, attempting to create next task {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  completed_stage: 'validation'
}
[DEBUG-TASK-CREATE-2] Calling waitForStageTransition {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  completed_stage: 'validation'
}
{"ts":"2025-11-18T00:25:16.384Z","scope":"redis-bus","msg":"Mirrored to stream","level":"INFO","topic":"agent:scaffold:tasks","stream":"stream:agent:scaffold:tasks"}
{"ts":"2025-11-18T00:25:16.384Z","scope":"redis-bus","msg":"[SESSION #63] Published to stream only (pub/sub disabled)","level":"INFO","topic":"agent:scaffold:tasks","stream":"stream:agent:scaffold:tasks"}
[METRIC] workflow.creation{type="app"}: 1670
[METRIC] workflows.created{type="app"}: 1
[METRIC] http_request_duration_ms{method="POST",path="/api/v1/workflows",status_code="200"}: 1671
[METRIC] http_responses_total{method="POST",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="POST",path="/api/v1/workflows"}: 444
{"ts":"2025-11-18T00:25:16.385Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:5c42767e-353b-42d8-9e32-467b40a78774","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:25:16.385Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"5c42767e-353b-42d8-9e32-467b40a78774","current_stage":"validation","status":"running","progress":60}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
{"ts":"2025-11-18T00:25:16.395Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:5c42767e-353b-42d8-9e32-467b40a78774","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:25:16.395Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"5c42767e-353b-42d8-9e32-467b40a78774","current_stage":"e2e_testing","status":"running","progress":60}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[DEBUG-TASK-CREATE-3] waitForStageTransition returned {
  workflow_id: '5c42767e-353b-42d8-9e32-467b40a78774',
  workflow_found: true,
  current_stage: 'e2e_testing',
  status: 'running'
}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[DEBUG-STREAM] Handlers completed successfully
[DEBUG-STREAM] Message ACKed { messageId: '1763425516382-0' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:25:16 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine received agent result[39m
[00:25:16 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] Sending STAGE_COMPLETE to state machine[39m
[00:25:16 UTC] [32mINFO[39m (orchestrator): [36mStage completed[39m
[00:25:16 UTC] [34mDEBUG[39m (orchestrator): [36mComputing next stage from current stage[39m
[00:25:16 UTC] [32mINFO[39m (orchestrator): [36mStage transition computed[39m
[00:25:16 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Evaluating state entered (nextStage pre-computed)[39m
[00:25:16 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service executing[39m
[00:25:16 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-3] Task dispatched via message bus[39m
[00:25:16 UTC] [32mINFO[39m (orchestrator): [36müîç [WORKFLOW-TRACE] Task created and published[39m
[00:25:16 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "b51a2942-2da9-4b42-9276-e277732264d8"
    trace_id: "817c5c03-5edd-44b5-9061-1e3e6f5baf4a"
    span_id: "d81e245ca5d34d04"
[00:25:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:16 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service completed[39m
[00:25:16 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Transitioning to next stage (ABSOLUTE assignment)[39m
[00:25:16 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Context updated in memory (ABSOLUTE)[39m
[00:25:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:16 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 CAS] Workflow updated successfully (CAS check passed)[39m
[00:25:16 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Database persisted[39m
[00:25:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:16 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Stage transition detected[39m
[00:25:16 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Creating task for next stage after STAGE_COMPLETE[39m
[00:25:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:16 UTC] [32mINFO[39m (orchestrator): [36müîç [SESSION #65] Building AgentEnvelope v2.0.0[39m
[00:25:16 UTC] [31mERROR[39m (orchestrator): [36m[SESSION #66] Failed to create task for next stage[39m
[00:25:16 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine event sent autonomously[39m
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: true, resultsLength: 1, resultsType: 'object' }
[DEBUG-STREAM] Processing results { count: 1 }
{"ts":"2025-11-18T00:25:26.491Z","scope":"redis-bus","msg":"[PHASE-3] Processing message from stream","level":"INFO","streamKey":"stream:orchestrator:results","messageId":"1763425526489-0","unwrapPath":"messageData.payload.msg","workflow_id":"e6a0d78f-c95f-4638-8a67-261d415d626e","task_id":"4f5c829c-d22e-464c-8a8b-c876a739ef17","messageKeys":"task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage"}
[DEBUG-STREAM] Checking handlers {
  topic: 'orchestrator:results',
  hasHandlers: true,
  handlerCount: 1,
  subscriptionsKeys: 'orchestrator:results'
}
[DEBUG-STREAM] About to invoke handlers { count: 1 }
[DEBUG-STATE-MACHINE-1] Raw message received from orchestrator:results {
  message_type: 'object',
  message_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage',
  has_workflow_id: true,
  has_stage: true,
  has_success: true
}
[DEBUG-STATE-MACHINE-2] AgentResult structure {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  task_id: '4f5c829c-d22e-464c-8a8b-c876a739ef17',
  agent_id: 'scaffold-199d4561',
  success: true,
  status: 'success',
  stage: 'initialization',
  has_result: true,
  all_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage'
}
[DEBUG-STATE-MACHINE-3] Looking up state machine {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  machines_count: 3,
  machine_exists: true
}
[DEBUG-STATE-MACHINE-4] State machine found, checking success {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  success: true,
  status: 'success'
}
[DEBUG-STATE-MACHINE-5] Result is successful, preparing STAGE_COMPLETE {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  stage_from_message: 'initialization',
  task_id: '4f5c829c-d22e-464c-8a8b-c876a739ef17'
}
[DEBUG-TASK-CREATE-1] taskCreator exists, attempting to create next task {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  completed_stage: 'initialization'
}
[DEBUG-TASK-CREATE-2] Calling waitForStageTransition {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  completed_stage: 'initialization'
}
{"ts":"2025-11-18T00:25:26.492Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:e6a0d78f-c95f-4638-8a67-261d415d626e","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:25:26.492Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"e6a0d78f-c95f-4638-8a67-261d415d626e","current_stage":"initialization","status":"running","progress":15}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
{"ts":"2025-11-18T00:25:26.504Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:e6a0d78f-c95f-4638-8a67-261d415d626e","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:25:26.504Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"e6a0d78f-c95f-4638-8a67-261d415d626e","current_stage":"scaffolding","status":"running","progress":15}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[DEBUG-TASK-CREATE-3] waitForStageTransition returned {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  workflow_found: true,
  current_stage: 'scaffolding',
  status: 'running'
}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query INSERT INTO "public"."AgentTask" ("id","task_id","workflow_id","agent_type","status","priority","payload","trace_id","span_id","parent_span_id","assigned_at","retry_count","max_retries","timeout_ms") VALUES ($1,$2,$3,CAST($4::text AS "public"."AgentType"),CAST($5::text AS "public"."TaskStatus"),CAST($6::text AS "public"."Priority"),$7,$8,$9,$10,$11,$12,$13,$14) RETURNING "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms"
{"ts":"2025-11-18T00:25:26.604Z","scope":"redis-bus","msg":"Mirrored to stream","level":"INFO","topic":"agent:scaffold:tasks","stream":"stream:agent:scaffold:tasks"}
{"ts":"2025-11-18T00:25:26.604Z","scope":"redis-bus","msg":"[SESSION #63] Published to stream only (pub/sub disabled)","level":"INFO","topic":"agent:scaffold:tasks","stream":"stream:agent:scaffold:tasks"}
[DEBUG-STREAM] Handlers completed successfully
[DEBUG-STREAM] Message ACKed { messageId: '1763425526489-0' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 3
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine received agent result[39m
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] Sending STAGE_COMPLETE to state machine[39m
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36mStage completed[39m
[00:25:26 UTC] [34mDEBUG[39m (orchestrator): [36mComputing next stage from current stage[39m
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36mStage transition computed[39m
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Evaluating state entered (nextStage pre-computed)[39m
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service executing[39m
[00:25:26 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:26 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:26 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:26 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service completed[39m
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Transitioning to next stage (ABSOLUTE assignment)[39m
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Context updated in memory (ABSOLUTE)[39m
[00:25:26 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:26 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:26 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:26 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:26 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 CAS] Workflow updated successfully (CAS check passed)[39m
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Database persisted[39m
[00:25:26 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:26 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:26 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:26 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Stage transition detected[39m
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Creating task for next stage after STAGE_COMPLETE[39m
[00:25:26 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:26 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:26 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:26 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36müîç [SESSION #65] Building AgentEnvelope v2.0.0[39m
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36m[DEBUG] Built envelope - pre-publish verification[39m
[00:25:26 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Agent envelope created[39m
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36m[EB:PUBLISHED] Event published to Redis[39m
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-3] Task dispatched via message bus[39m
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36müîç [WORKFLOW-TRACE] Task created and published[39m
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Task created successfully for next stage[39m
[00:25:26 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine event sent autonomously[39m
[00:25:27 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "62728739-1f29-4844-abd6-ffd8f81b1a92"
    trace_id: "bdcbe8ab-9b54-4713-ae81-3e19c50da0ea"
    span_id: "563315d66ca5d6e1"
[00:25:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:27 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "62728739-1f29-4844-abd6-ffd8f81b1a92"
    trace_id: "bdcbe8ab-9b54-4713-ae81-3e19c50da0ea"
    span_id: "563315d66ca5d6e1"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 8
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:25:29 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "8e8f8be3-37fd-4c83-9331-f8aff0a7b998"
    trace_id: "2d18c39a-da70-4fba-8628-bcf784c2344c"
    span_id: "b8318f2f2262fcf9"
[00:25:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:29 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "8e8f8be3-37fd-4c83-9331-f8aff0a7b998"
    trace_id: "2d18c39a-da70-4fba-8628-bcf784c2344c"
    span_id: "b8318f2f2262fcf9"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:25:31 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "294bd850-6de1-48a4-8456-4da02f00900c"
    trace_id: "5c5aa68f-73e5-4b85-9eaa-35f69a518a10"
    span_id: "7de91eaf8cf7994d"
[00:25:31 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:31 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:31 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:31 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:31 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:31 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "294bd850-6de1-48a4-8456-4da02f00900c"
    trace_id: "5c5aa68f-73e5-4b85-9eaa-35f69a518a10"
    span_id: "7de91eaf8cf7994d"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:25:33 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "fd8711d6-2ebd-4cd2-bfbf-1718eb017956"
    trace_id: "66468a4d-fb54-4674-9015-5386a749101f"
    span_id: "a9f7d9e7bc391dbd"
[00:25:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:33 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "fd8711d6-2ebd-4cd2-bfbf-1718eb017956"
    trace_id: "66468a4d-fb54-4674-9015-5386a749101f"
    span_id: "a9f7d9e7bc391dbd"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:25:35 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "503f8e1e-81a5-4b8a-acc3-27dcec8da0dc"
    trace_id: "9fc0016a-0d1f-4398-9800-0d90833bd2cf"
    span_id: "6d5c5ce2a3d355f1"
[00:25:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:35 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "503f8e1e-81a5-4b8a-acc3-27dcec8da0dc"
    trace_id: "9fc0016a-0d1f-4398-9800-0d90833bd2cf"
    span_id: "6d5c5ce2a3d355f1"
[DEBUG-STREAM] XREADGROUP returned { hasResults: true, resultsLength: 1, resultsType: 'object' }
[DEBUG-STREAM] Processing results { count: 1 }
{"ts":"2025-11-18T00:25:36.712Z","scope":"redis-bus","msg":"[PHASE-3] Processing message from stream","level":"INFO","streamKey":"stream:orchestrator:results","messageId":"1763425536709-0","unwrapPath":"messageData.payload.msg","workflow_id":"e6a0d78f-c95f-4638-8a67-261d415d626e","task_id":"a8e578fe-8e5c-4ca9-a83d-974536256d4f","messageKeys":"task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage"}
[DEBUG-STREAM] Checking handlers {
  topic: 'orchestrator:results',
  hasHandlers: true,
  handlerCount: 1,
  subscriptionsKeys: 'orchestrator:results'
}
[DEBUG-STREAM] About to invoke handlers { count: 1 }
[DEBUG-STATE-MACHINE-1] Raw message received from orchestrator:results {
  message_type: 'object',
  message_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage',
  has_workflow_id: true,
  has_stage: true,
  has_success: true
}
[DEBUG-STATE-MACHINE-2] AgentResult structure {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  task_id: 'a8e578fe-8e5c-4ca9-a83d-974536256d4f',
  agent_id: 'scaffold-199d4561',
  success: true,
  status: 'success',
  stage: 'scaffolding',
  has_result: true,
  all_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage'
}
[DEBUG-STATE-MACHINE-3] Looking up state machine {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  machines_count: 3,
  machine_exists: true
}
[DEBUG-STATE-MACHINE-4] State machine found, checking success {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  success: true,
  status: 'success'
}
[DEBUG-STATE-MACHINE-5] Result is successful, preparing STAGE_COMPLETE {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  stage_from_message: 'scaffolding',
  task_id: 'a8e578fe-8e5c-4ca9-a83d-974536256d4f'
}
[DEBUG-TASK-CREATE-1] taskCreator exists, attempting to create next task {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  completed_stage: 'scaffolding'
}
[DEBUG-TASK-CREATE-2] Calling waitForStageTransition {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  completed_stage: 'scaffolding'
}
{"ts":"2025-11-18T00:25:36.714Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:e6a0d78f-c95f-4638-8a67-261d415d626e","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:25:36.714Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"e6a0d78f-c95f-4638-8a67-261d415d626e","current_stage":"scaffolding","status":"running","progress":30}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
{"ts":"2025-11-18T00:25:36.725Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:e6a0d78f-c95f-4638-8a67-261d415d626e","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:25:36.725Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"e6a0d78f-c95f-4638-8a67-261d415d626e","current_stage":"dependency_installation","status":"running","progress":30}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine received agent result[39m
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] Sending STAGE_COMPLETE to state machine[39m
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36mStage completed[39m
[00:25:36 UTC] [34mDEBUG[39m (orchestrator): [36mComputing next stage from current stage[39m
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36mStage transition computed[39m
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Evaluating state entered (nextStage pre-computed)[39m
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service executing[39m
[00:25:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service completed[39m
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Transitioning to next stage (ABSOLUTE assignment)[39m
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Context updated in memory (ABSOLUTE)[39m
[00:25:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 CAS] Workflow updated successfully (CAS check passed)[39m
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Database persisted[39m
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[DEBUG-TASK-CREATE-3] waitForStageTransition returned {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  workflow_found: true,
  current_stage: 'dependency_installation',
  status: 'running'
}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
[00:25:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Stage transition detected[39m
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Creating task for next stage after STAGE_COMPLETE[39m
[00:25:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[00:25:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36müîç [SESSION #65] Building AgentEnvelope v2.0.0[39m
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36m[DEBUG] Built envelope - pre-publish verification[39m
prisma:query INSERT INTO "public"."AgentTask" ("id","task_id","workflow_id","agent_type","status","priority","payload","trace_id","span_id","parent_span_id","assigned_at","retry_count","max_retries","timeout_ms") VALUES ($1,$2,$3,CAST($4::text AS "public"."AgentType"),CAST($5::text AS "public"."TaskStatus"),CAST($6::text AS "public"."Priority"),$7,$8,$9,$10,$11,$12,$13,$14) RETURNING "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms"
[00:25:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Agent envelope created[39m
{"ts":"2025-11-18T00:25:36.842Z","scope":"redis-bus","msg":"Mirrored to stream","level":"INFO","topic":"agent:scaffold:tasks","stream":"stream:agent:scaffold:tasks"}
{"ts":"2025-11-18T00:25:36.842Z","scope":"redis-bus","msg":"[SESSION #63] Published to stream only (pub/sub disabled)","level":"INFO","topic":"agent:scaffold:tasks","stream":"stream:agent:scaffold:tasks"}
[DEBUG-STREAM] Handlers completed successfully
[DEBUG-STREAM] Message ACKed { messageId: '1763425536709-0' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36m[EB:PUBLISHED] Event published to Redis[39m
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-3] Task dispatched via message bus[39m
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36müîç [WORKFLOW-TRACE] Task created and published[39m
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Task created successfully for next stage[39m
[00:25:36 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine event sent autonomously[39m
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 419
[00:25:37 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "63dc1120-167f-417b-aabd-8631cd4466ae"
    trace_id: "7ab1f842-94ef-49e6-9167-3df37e1c3bd2"
    span_id: "aa54d5bb03faa6aa"
[00:25:37 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:37 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:37 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:37 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:37 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "63dc1120-167f-417b-aabd-8631cd4466ae"
    trace_id: "7ab1f842-94ef-49e6-9167-3df37e1c3bd2"
    span_id: "aa54d5bb03faa6aa"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 8
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 419
[00:25:39 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "4d085a3d-79e9-407d-8595-9a78328038f5"
    trace_id: "ea80370c-1d5a-485c-8f35-6ec15a974465"
    span_id: "841ec9526bbca510"
[00:25:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:39 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "4d085a3d-79e9-407d-8595-9a78328038f5"
    trace_id: "ea80370c-1d5a-485c-8f35-6ec15a974465"
    span_id: "841ec9526bbca510"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 419
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:25:41 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "431d7189-abd6-4534-afa1-1556899e40fa"
    trace_id: "5bcb8b04-ef12-4c09-b0a0-ef233509bf73"
    span_id: "18b440ed6501434f"
[00:25:41 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:41 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:41 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:41 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:41 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "431d7189-abd6-4534-afa1-1556899e40fa"
    trace_id: "5bcb8b04-ef12-4c09-b0a0-ef233509bf73"
    span_id: "18b440ed6501434f"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 419
[00:25:43 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "3fd426dc-878a-4b3f-8e2d-ceeac842f5c8"
    trace_id: "599c10b8-0348-4ec1-a662-9d5b59ee1634"
    span_id: "1bf1ab61cad2443e"
[00:25:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:43 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "3fd426dc-878a-4b3f-8e2d-ceeac842f5c8"
    trace_id: "599c10b8-0348-4ec1-a662-9d5b59ee1634"
    span_id: "1bf1ab61cad2443e"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 419
[00:25:45 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "63b87866-8ca7-4b7b-a3ec-b10c0eabbb65"
    trace_id: "45cc2cbd-02e2-4358-b580-829951971502"
    span_id: "3461a942f9d1f2f7"
[00:25:45 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:45 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:45 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:45 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:45 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "63b87866-8ca7-4b7b-a3ec-b10c0eabbb65"
    trace_id: "45cc2cbd-02e2-4358-b580-829951971502"
    span_id: "3461a942f9d1f2f7"
[DEBUG-STREAM] XREADGROUP returned { hasResults: true, resultsLength: 1, resultsType: 'object' }
[DEBUG-STREAM] Processing results { count: 1 }
{"ts":"2025-11-18T00:25:46.951Z","scope":"redis-bus","msg":"[PHASE-3] Processing message from stream","level":"INFO","streamKey":"stream:orchestrator:results","messageId":"1763425546948-0","unwrapPath":"messageData.payload.msg","workflow_id":"e6a0d78f-c95f-4638-8a67-261d415d626e","task_id":"c67b5572-1144-44be-9cd5-0d9eb348acdd","messageKeys":"task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage"}
[DEBUG-STREAM] Checking handlers {
  topic: 'orchestrator:results',
  hasHandlers: true,
  handlerCount: 1,
  subscriptionsKeys: 'orchestrator:results'
}
[DEBUG-STREAM] About to invoke handlers { count: 1 }
[DEBUG-STATE-MACHINE-1] Raw message received from orchestrator:results {
  message_type: 'object',
  message_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage',
  has_workflow_id: true,
  has_stage: true,
  has_success: true
}
[DEBUG-STATE-MACHINE-2] AgentResult structure {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  task_id: 'c67b5572-1144-44be-9cd5-0d9eb348acdd',
  agent_id: 'scaffold-199d4561',
  success: true,
  status: 'success',
  stage: 'dependency_installation',
  has_result: true,
  all_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage'
}
[DEBUG-STATE-MACHINE-3] Looking up state machine {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  machines_count: 3,
  machine_exists: true
}
[DEBUG-STATE-MACHINE-4] State machine found, checking success {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  success: true,
  status: 'success'
}
[DEBUG-STATE-MACHINE-5] Result is successful, preparing STAGE_COMPLETE {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  stage_from_message: 'dependency_installation',
  task_id: 'c67b5572-1144-44be-9cd5-0d9eb348acdd'
}
[DEBUG-TASK-CREATE-1] taskCreator exists, attempting to create next task {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  completed_stage: 'dependency_installation'
}
[DEBUG-TASK-CREATE-2] Calling waitForStageTransition {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  completed_stage: 'dependency_installation'
}
{"ts":"2025-11-18T00:25:46.956Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:e6a0d78f-c95f-4638-8a67-261d415d626e","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:25:46.956Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"e6a0d78f-c95f-4638-8a67-261d415d626e","current_stage":"dependency_installation","status":"running","progress":45}
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
{"ts":"2025-11-18T00:25:46.964Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:e6a0d78f-c95f-4638-8a67-261d415d626e","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:25:46.964Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"e6a0d78f-c95f-4638-8a67-261d415d626e","current_stage":"validation","status":"running","progress":45}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[DEBUG-TASK-CREATE-3] waitForStageTransition returned {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  workflow_found: true,
  current_stage: 'validation',
  status: 'running'
}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query INSERT INTO "public"."AgentTask" ("id","task_id","workflow_id","agent_type","status","priority","payload","trace_id","span_id","parent_span_id","assigned_at","retry_count","max_retries","timeout_ms") VALUES ($1,$2,$3,CAST($4::text AS "public"."AgentType"),CAST($5::text AS "public"."TaskStatus"),CAST($6::text AS "public"."Priority"),$7,$8,$9,$10,$11,$12,$13,$14) RETURNING "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms"
{"ts":"2025-11-18T00:25:47.080Z","scope":"redis-bus","msg":"Mirrored to stream","level":"INFO","topic":"agent:validation:tasks","stream":"stream:agent:validation:tasks"}
{"ts":"2025-11-18T00:25:47.080Z","scope":"redis-bus","msg":"[SESSION #63] Published to stream only (pub/sub disabled)","level":"INFO","topic":"agent:validation:tasks","stream":"stream:agent:validation:tasks"}
[DEBUG-STREAM] Handlers completed successfully
[DEBUG-STREAM] Message ACKed { messageId: '1763425546948-0' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:25:46 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine received agent result[39m
[00:25:46 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] Sending STAGE_COMPLETE to state machine[39m
[00:25:46 UTC] [32mINFO[39m (orchestrator): [36mStage completed[39m
[00:25:46 UTC] [34mDEBUG[39m (orchestrator): [36mComputing next stage from current stage[39m
[00:25:46 UTC] [32mINFO[39m (orchestrator): [36mStage transition computed[39m
[00:25:46 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Evaluating state entered (nextStage pre-computed)[39m
[00:25:46 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service executing[39m
[00:25:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:46 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service completed[39m
[00:25:46 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Transitioning to next stage (ABSOLUTE assignment)[39m
[00:25:46 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Context updated in memory (ABSOLUTE)[39m
[00:25:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:46 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 CAS] Workflow updated successfully (CAS check passed)[39m
[00:25:46 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Database persisted[39m
[00:25:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:47 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Stage transition detected[39m
[00:25:47 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Creating task for next stage after STAGE_COMPLETE[39m
[00:25:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:47 UTC] [32mINFO[39m (orchestrator): [36müîç [SESSION #65] Building AgentEnvelope v2.0.0[39m
[00:25:47 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Building validation envelope[39m
[00:25:47 UTC] [32mINFO[39m (orchestrator): [36m[DEBUG] Built envelope - pre-publish verification[39m
[00:25:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:47 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Agent envelope created[39m
[00:25:47 UTC] [32mINFO[39m (orchestrator): [36m[EB:PUBLISHED] Event published to Redis[39m
[00:25:47 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-3] Task dispatched via message bus[39m
[00:25:47 UTC] [32mINFO[39m (orchestrator): [36müîç [WORKFLOW-TRACE] Task created and published[39m
[00:25:47 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Task created successfully for next stage[39m
[00:25:47 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine event sent autonomously[39m
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 406
[00:25:47 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "211d79b6-cec9-4e42-b5a5-6d1d667f75df"
    trace_id: "816ab5a3-b6b2-4023-abab-81babd0dcf1a"
    span_id: "e0393099e0bcb6cd"
[00:25:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:47 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "211d79b6-cec9-4e42-b5a5-6d1d667f75df"
    trace_id: "816ab5a3-b6b2-4023-abab-81babd0dcf1a"
    span_id: "e0393099e0bcb6cd"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 406
[00:25:50 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "74122ffa-dfbc-4afe-8ba1-c4f3b25cc3be"
    trace_id: "f8c6387b-215b-4520-ad72-c5e1d5d75b4f"
    span_id: "b27be209567339e8"
[00:25:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:50 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "74122ffa-dfbc-4afe-8ba1-c4f3b25cc3be"
    trace_id: "f8c6387b-215b-4520-ad72-c5e1d5d75b4f"
    span_id: "b27be209567339e8"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 406
[00:25:52 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "6274eb76-e71d-47b9-862b-3329c37c0a15"
    trace_id: "63d3ca44-701f-4b64-9e15-844653d4f94b"
    span_id: "b43136cd7447c367"
[00:25:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:52 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "6274eb76-e71d-47b9-862b-3329c37c0a15"
    trace_id: "63d3ca44-701f-4b64-9e15-844653d4f94b"
    span_id: "b43136cd7447c367"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 406
[00:25:54 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "0fd7644f-c452-4263-ab83-271d3f299a02"
    trace_id: "740b313c-0bb8-4d82-9683-b6981213eb3d"
    span_id: "b595d2b60492506b"
[00:25:54 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:54 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:54 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:54 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:54 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "0fd7644f-c452-4263-ab83-271d3f299a02"
    trace_id: "740b313c-0bb8-4d82-9683-b6981213eb3d"
    span_id: "b595d2b60492506b"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 406
[00:25:56 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "f54fef6a-ef2b-44a5-a0d7-198e4942793a"
    trace_id: "c9e2a49b-9cb1-4594-8f63-24ea2948764b"
    span_id: "b9949de891317596"
[00:25:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:56 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "f54fef6a-ef2b-44a5-a0d7-198e4942793a"
    trace_id: "c9e2a49b-9cb1-4594-8f63-24ea2948764b"
    span_id: "b9949de891317596"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: true, resultsLength: 1, resultsType: 'object' }
[DEBUG-STREAM] Processing results { count: 1 }
{"ts":"2025-11-18T00:25:57.189Z","scope":"redis-bus","msg":"[PHASE-3] Processing message from stream","level":"INFO","streamKey":"stream:orchestrator:results","messageId":"1763425557187-0","unwrapPath":"messageData.payload.msg","workflow_id":"e6a0d78f-c95f-4638-8a67-261d415d626e","task_id":"dd66d967-bb4a-4f6c-aba9-b023ed7d4948","messageKeys":"task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage"}
[DEBUG-STREAM] Checking handlers {
  topic: 'orchestrator:results',
  hasHandlers: true,
  handlerCount: 1,
  subscriptionsKeys: 'orchestrator:results'
}
[DEBUG-STREAM] About to invoke handlers { count: 1 }
[DEBUG-STATE-MACHINE-1] Raw message received from orchestrator:results {
  message_type: 'object',
  message_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage',
  has_workflow_id: true,
  has_stage: true,
  has_success: true
}
[DEBUG-STATE-MACHINE-2] AgentResult structure {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  task_id: 'dd66d967-bb4a-4f6c-aba9-b023ed7d4948',
  agent_id: 'validation-31241bcf',
  success: true,
  status: 'success',
  stage: 'validation',
  has_result: true,
  all_keys: 'task_id,workflow_id,agent_id,agent_type,success,status,action,result,metrics,timestamp,version,stage'
}
[DEBUG-STATE-MACHINE-3] Looking up state machine {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  machines_count: 3,
  machine_exists: true
}
[DEBUG-STATE-MACHINE-4] State machine found, checking success {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  success: true,
  status: 'success'
}
[DEBUG-STATE-MACHINE-5] Result is successful, preparing STAGE_COMPLETE {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  stage_from_message: 'validation',
  task_id: 'dd66d967-bb4a-4f6c-aba9-b023ed7d4948'
}
[DEBUG-TASK-CREATE-1] taskCreator exists, attempting to create next task {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  completed_stage: 'validation'
}
[DEBUG-TASK-CREATE-2] Calling waitForStageTransition {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  completed_stage: 'validation'
}
{"ts":"2025-11-18T00:25:57.194Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:e6a0d78f-c95f-4638-8a67-261d415d626e","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:25:57.194Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"e6a0d78f-c95f-4638-8a67-261d415d626e","current_stage":"validation","status":"running","progress":60}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
{"ts":"2025-11-18T00:25:57.203Z","scope":"redis-kv","msg":"Set","level":"INFO","key":"workflow:state:e6a0d78f-c95f-4638-8a67-261d415d626e","ttl":604800,"hasValue":true}
{"ts":"2025-11-18T00:25:57.204Z","scope":"workflow-state-manager","msg":"[PHASE-6] Workflow state snapshot saved","level":"INFO","workflow_id":"e6a0d78f-c95f-4638-8a67-261d415d626e","current_stage":"e2e_testing","status":"running","progress":60}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[DEBUG-TASK-CREATE-3] waitForStageTransition returned {
  workflow_id: 'e6a0d78f-c95f-4638-8a67-261d415d626e',
  workflow_found: true,
  current_stage: 'e2e_testing',
  status: 'running'
}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[DEBUG-STREAM] Handlers completed successfully
[DEBUG-STREAM] Message ACKed { messageId: '1763425557187-0' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:25:57 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine received agent result[39m
[00:25:57 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] Sending STAGE_COMPLETE to state machine[39m
[00:25:57 UTC] [32mINFO[39m (orchestrator): [36mStage completed[39m
[00:25:57 UTC] [34mDEBUG[39m (orchestrator): [36mComputing next stage from current stage[39m
[00:25:57 UTC] [32mINFO[39m (orchestrator): [36mStage transition computed[39m
[00:25:57 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Evaluating state entered (nextStage pre-computed)[39m
[00:25:57 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service executing[39m
[00:25:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:57 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service completed[39m
[00:25:57 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Transitioning to next stage (ABSOLUTE assignment)[39m
[00:25:57 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Context updated in memory (ABSOLUTE)[39m
[00:25:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:57 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #64 CAS] Workflow updated successfully (CAS check passed)[39m
[00:25:57 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Database persisted[39m
[00:25:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:57 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Stage transition detected[39m
[00:25:57 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #66] Creating task for next stage after STAGE_COMPLETE[39m
[00:25:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:57 UTC] [32mINFO[39m (orchestrator): [36müîç [SESSION #65] Building AgentEnvelope v2.0.0[39m
[00:25:57 UTC] [31mERROR[39m (orchestrator): [36m[SESSION #66] Failed to create task for next stage[39m
[00:25:57 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-4] State machine event sent autonomously[39m
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:25:58 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "b56cfb10-56af-4f24-94f4-8c82b6f2375f"
    trace_id: "a223daa3-868a-4d52-8faa-51702232fbcd"
    span_id: "2bf9a1289b95c7e5"
[00:25:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:25:58 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "b56cfb10-56af-4f24-94f4-8c82b6f2375f"
    trace_id: "a223daa3-868a-4d52-8faa-51702232fbcd"
    span_id: "2bf9a1289b95c7e5"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 3
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:00 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "4e120346-3b09-4590-b09f-818076f7443a"
    trace_id: "fed94887-0a25-42fc-a241-f856ef8f37d2"
    span_id: "61ebd926d1094d5e"
[00:26:00 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:00 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:00 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:00 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:00 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "4e120346-3b09-4590-b09f-818076f7443a"
    trace_id: "fed94887-0a25-42fc-a241-f856ef8f37d2"
    span_id: "61ebd926d1094d5e"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:02 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "697cb98e-d56a-4639-8955-98080a90cea1"
    trace_id: "46990a0e-f03c-42b3-a699-0331a4f57776"
    span_id: "8ab695bd4b892209"
[00:26:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:02 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "697cb98e-d56a-4639-8955-98080a90cea1"
    trace_id: "46990a0e-f03c-42b3-a699-0331a4f57776"
    span_id: "8ab695bd4b892209"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:04 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "9fae7e81-1253-4bed-90af-91e87f7bc28f"
    trace_id: "b43296b0-db31-4a0f-98ae-04c91bcdb535"
    span_id: "d83a4425d1795ebd"
[00:26:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:04 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "9fae7e81-1253-4bed-90af-91e87f7bc28f"
    trace_id: "b43296b0-db31-4a0f-98ae-04c91bcdb535"
    span_id: "d83a4425d1795ebd"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:06 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "df807cc3-5438-4844-951f-f6fe31447c02"
    trace_id: "e3b83d98-a83e-451d-8fc2-b72fe746c445"
    span_id: "2bd96e47b5df72ac"
[00:26:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:06 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "df807cc3-5438-4844-951f-f6fe31447c02"
    trace_id: "e3b83d98-a83e-451d-8fc2-b72fe746c445"
    span_id: "2bd96e47b5df72ac"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:08 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "087b2bd4-e7f6-42ea-993d-e1fca8ac2655"
    trace_id: "e38e8479-0872-4189-8b8f-d69818030fa7"
    span_id: "80aad8d9ab32ba74"
[00:26:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:08 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "087b2bd4-e7f6-42ea-993d-e1fca8ac2655"
    trace_id: "e38e8479-0872-4189-8b8f-d69818030fa7"
    span_id: "80aad8d9ab32ba74"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:10 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "386aa8ee-8afd-442d-87e4-b4856b51fedb"
    trace_id: "09fec6e1-aec5-420f-90e6-7a5e618693c3"
    span_id: "8ff6697ee07b51de"
[00:26:10 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:10 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:10 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:10 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:10 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "386aa8ee-8afd-442d-87e4-b4856b51fedb"
    trace_id: "09fec6e1-aec5-420f-90e6-7a5e618693c3"
    span_id: "8ff6697ee07b51de"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:12 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "fb16275f-1ec8-4332-8b40-192474da65a6"
    trace_id: "4a58518e-5db1-4273-be2c-9b5ba80a19c6"
    span_id: "3781a356167fac72"
[00:26:12 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:12 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:12 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:12 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:12 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "fb16275f-1ec8-4332-8b40-192474da65a6"
    trace_id: "4a58518e-5db1-4273-be2c-9b5ba80a19c6"
    span_id: "3781a356167fac72"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 3
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:14 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "821d41f1-4606-4dc6-9352-d174c4b26422"
    trace_id: "ce267d2b-27c7-4fad-ae9c-889dc15464cc"
    span_id: "1a30e6c641020ea7"
[00:26:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:14 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "821d41f1-4606-4dc6-9352-d174c4b26422"
    trace_id: "ce267d2b-27c7-4fad-ae9c-889dc15464cc"
    span_id: "1a30e6c641020ea7"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:26:17 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "df015e21-663a-452f-ab7f-08a66db0c855"
    trace_id: "18503116-7a57-4ec4-90d9-01eb32d09973"
    span_id: "6e057a80dfcce04b"
[00:26:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:17 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:17 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "df015e21-663a-452f-ab7f-08a66db0c855"
    trace_id: "18503116-7a57-4ec4-90d9-01eb32d09973"
    span_id: "6e057a80dfcce04b"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:19 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "96398992-f44a-4f59-9128-0342d342aa12"
    trace_id: "e6b29821-02a5-4eb1-8b21-b0d835357b4c"
    span_id: "ae5559e29efdae12"
[00:26:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:19 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "96398992-f44a-4f59-9128-0342d342aa12"
    trace_id: "e6b29821-02a5-4eb1-8b21-b0d835357b4c"
    span_id: "ae5559e29efdae12"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 8
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:21 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "6c69e945-2865-403d-948a-35494004c96d"
    trace_id: "b65640ca-c693-43bf-b332-80333d2a8ee6"
    span_id: "cb2e6fb385bb1325"
[00:26:21 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:21 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:21 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:21 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:21 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "6c69e945-2865-403d-948a-35494004c96d"
    trace_id: "b65640ca-c693-43bf-b332-80333d2a8ee6"
    span_id: "cb2e6fb385bb1325"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:23 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "fbb4c0c1-9943-44d6-94ca-68d47e06e112"
    trace_id: "8ad8c836-9467-4e7c-854a-c2b4957d7ac4"
    span_id: "4ba8eb6106c34f89"
[00:26:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:23 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "fbb4c0c1-9943-44d6-94ca-68d47e06e112"
    trace_id: "8ad8c836-9467-4e7c-854a-c2b4957d7ac4"
    span_id: "4ba8eb6106c34f89"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 8
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:25 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "e448aa5f-9ccc-45d9-84c0-16ae10ba1b9b"
    trace_id: "e63d8774-73bc-4b6c-8c73-c52f3ba165c8"
    span_id: "a62e864809e4aa90"
[00:26:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:25 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "e448aa5f-9ccc-45d9-84c0-16ae10ba1b9b"
    trace_id: "e63d8774-73bc-4b6c-8c73-c52f3ba165c8"
    span_id: "a62e864809e4aa90"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:26:27 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "75373d3e-7ba2-4d6c-9ef6-6a790ef7c63c"
    trace_id: "0b1bf22a-486b-4105-847a-6cdc37d3d352"
    span_id: "01ef2fbf9e4df7d2"
[00:26:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:27 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "75373d3e-7ba2-4d6c-9ef6-6a790ef7c63c"
    trace_id: "0b1bf22a-486b-4105-847a-6cdc37d3d352"
    span_id: "01ef2fbf9e4df7d2"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:29 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "d5b24004-c223-4ce2-bd8e-8105d79c6d19"
    trace_id: "b5ec29d1-4e6c-4680-9d96-aeb58198cd17"
    span_id: "9ed0ed2bc1f2be09"
[00:26:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:29 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "d5b24004-c223-4ce2-bd8e-8105d79c6d19"
    trace_id: "b5ec29d1-4e6c-4680-9d96-aeb58198cd17"
    span_id: "9ed0ed2bc1f2be09"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:31 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "3ad2d63b-e08f-46ad-94e1-f71d0d2ba051"
    trace_id: "4cd66d70-02a2-4bea-9df1-eb7f5fbb6498"
    span_id: "4f2092f54e2134bd"
[00:26:31 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:31 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:31 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:31 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:31 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "3ad2d63b-e08f-46ad-94e1-f71d0d2ba051"
    trace_id: "4cd66d70-02a2-4bea-9df1-eb7f5fbb6498"
    span_id: "4f2092f54e2134bd"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 27
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:33 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "10642f6f-5fa6-4627-bb4d-b8a742ad4e6c"
    trace_id: "90b89e52-42d9-42a5-8f10-2551c7aee62d"
    span_id: "e184a76681f007c3"
[00:26:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:33 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "10642f6f-5fa6-4627-bb4d-b8a742ad4e6c"
    trace_id: "90b89e52-42d9-42a5-8f10-2551c7aee62d"
    span_id: "e184a76681f007c3"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 9
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:35 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "64c4d36d-c75c-465a-b8f6-8adf6c5e15cb"
    trace_id: "c41874bc-72d8-4ffa-91c9-fb9b514e7213"
    span_id: "37703bd79e84ad0b"
[00:26:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:35 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "64c4d36d-c75c-465a-b8f6-8adf6c5e15cb"
    trace_id: "c41874bc-72d8-4ffa-91c9-fb9b514e7213"
    span_id: "37703bd79e84ad0b"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 3
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:37 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "050e8dcd-1475-47bd-ba08-72c40ecadbac"
    trace_id: "5ee6465e-3536-4eb8-bc12-c6a28ba98830"
    span_id: "01f7826de261e396"
[00:26:37 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:37 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:37 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:37 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:37 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "050e8dcd-1475-47bd-ba08-72c40ecadbac"
    trace_id: "5ee6465e-3536-4eb8-bc12-c6a28ba98830"
    span_id: "01f7826de261e396"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:39 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "599e4c4c-1d2f-42e3-acf8-f4e0feb8cb49"
    trace_id: "723d698f-f26e-47f1-ba8e-67af7520d50b"
    span_id: "614b6c69c5e79585"
[00:26:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:39 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "599e4c4c-1d2f-42e3-acf8-f4e0feb8cb49"
    trace_id: "723d698f-f26e-47f1-ba8e-67af7520d50b"
    span_id: "614b6c69c5e79585"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:26:41 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "45e9e42a-08d7-49e2-9341-3c01b79c0630"
    trace_id: "84f88d1d-5906-4f48-953b-f2e7e8ce4e1c"
    span_id: "3e39a2ae6d77d847"
[00:26:41 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:41 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:41 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:41 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:41 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "45e9e42a-08d7-49e2-9341-3c01b79c0630"
    trace_id: "84f88d1d-5906-4f48-953b-f2e7e8ce4e1c"
    span_id: "3e39a2ae6d77d847"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:44 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "ae1eaf7d-fca9-4c11-becf-b53e9990f46c"
    trace_id: "c953b2dc-7533-4a8e-9f12-961fc26aad8e"
    span_id: "c03260c80ef96258"
[00:26:44 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:44 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:44 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:44 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:44 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "ae1eaf7d-fca9-4c11-becf-b53e9990f46c"
    trace_id: "c953b2dc-7533-4a8e-9f12-961fc26aad8e"
    span_id: "c03260c80ef96258"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:46 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "bdb82e9f-9d71-4b09-968e-faa33cbe392f"
    trace_id: "921050e4-fed3-4c99-8c19-a224a3857bbf"
    span_id: "8bf5ca52d6b81ee8"
[00:26:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:46 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "bdb82e9f-9d71-4b09-968e-faa33cbe392f"
    trace_id: "921050e4-fed3-4c99-8c19-a224a3857bbf"
    span_id: "8bf5ca52d6b81ee8"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:48 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "19adec9a-0f96-41ca-b05c-ab82aa1f4e80"
    trace_id: "79b0b1ef-0396-4292-a25d-19318f602bc1"
    span_id: "b2144b3a57e5d44d"
[00:26:48 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:48 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:48 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:48 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:48 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "19adec9a-0f96-41ca-b05c-ab82aa1f4e80"
    trace_id: "79b0b1ef-0396-4292-a25d-19318f602bc1"
    span_id: "b2144b3a57e5d44d"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 8
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:50 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "9bcb257f-6372-44e4-ab0e-7816c8e86f58"
    trace_id: "bd352967-311a-4ebe-95b2-d0b750df656d"
    span_id: "3cf2cda51a8c03c1"
[00:26:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:50 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "9bcb257f-6372-44e4-ab0e-7816c8e86f58"
    trace_id: "bd352967-311a-4ebe-95b2-d0b750df656d"
    span_id: "3cf2cda51a8c03c1"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:26:52 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "df18f53a-3ac1-4809-acde-97c5a1022b8f"
    trace_id: "96833f00-4698-456c-bb90-9902678f8176"
    span_id: "6aacaac7f0a612cc"
[00:26:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:52 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "df18f53a-3ac1-4809-acde-97c5a1022b8f"
    trace_id: "96833f00-4698-456c-bb90-9902678f8176"
    span_id: "6aacaac7f0a612cc"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:54 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "a593c2fe-1c43-4aa5-8bc7-e6026d707539"
    trace_id: "0ce96a1a-3e1e-4454-870c-9b5ed2632ba8"
    span_id: "1986217618a4ea32"
[00:26:54 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:54 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:54 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:54 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:54 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "a593c2fe-1c43-4aa5-8bc7-e6026d707539"
    trace_id: "0ce96a1a-3e1e-4454-870c-9b5ed2632ba8"
    span_id: "1986217618a4ea32"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:56 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "3a2b92d0-1b1b-47e3-be16-1eceb2324534"
    trace_id: "5f050f3b-c827-43f6-94b1-468b5f47ef51"
    span_id: "f54a5e9f316a1b9d"
[00:26:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:56 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "3a2b92d0-1b1b-47e3-be16-1eceb2324534"
    trace_id: "5f050f3b-c827-43f6-94b1-468b5f47ef51"
    span_id: "f54a5e9f316a1b9d"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:26:58 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "731f143a-2e36-45bb-b811-1f41c20b57c9"
    trace_id: "5d85dacd-ea4b-484b-9767-ec6aec07f56a"
    span_id: "525b908014a9e05b"
[00:26:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:26:58 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "731f143a-2e36-45bb-b811-1f41c20b57c9"
    trace_id: "5d85dacd-ea4b-484b-9767-ec6aec07f56a"
    span_id: "525b908014a9e05b"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:27:19 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "5f505671-98a7-40bf-af74-c42c419febc4"
    trace_id: "3b204b19-f561-488d-a47e-ff3a09568fbc"
    span_id: "083ca873908a8373"
[00:27:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:19 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:19 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "5f505671-98a7-40bf-af74-c42c419febc4"
    trace_id: "3b204b19-f561-488d-a47e-ff3a09568fbc"
    span_id: "083ca873908a8373"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:27:21 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "9175f761-1d7c-4d76-933a-6e0957c08d75"
    trace_id: "027a4481-d4e6-4663-b215-34be02e8b320"
    span_id: "ab8e4d9bbd2c1f5a"
[00:27:21 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:21 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:21 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:21 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:21 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "9175f761-1d7c-4d76-933a-6e0957c08d75"
    trace_id: "027a4481-d4e6-4663-b215-34be02e8b320"
    span_id: "ab8e4d9bbd2c1f5a"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:27:23 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "fd5b77b7-cc79-48ba-af76-3954cd92d6eb"
    trace_id: "b2d7cd52-0798-498e-83a2-458d35bb6649"
    span_id: "96000dac69adf6a6"
[00:27:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:23 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "fd5b77b7-cc79-48ba-af76-3954cd92d6eb"
    trace_id: "b2d7cd52-0798-498e-83a2-458d35bb6649"
    span_id: "96000dac69adf6a6"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 3
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:27:25 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "d86d989b-48a6-474c-b537-5e3ea6e205bd"
    trace_id: "1ad15b07-530e-4695-b03a-f8917cb54c11"
    span_id: "afd0e491fdc32479"
[00:27:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:25 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "d86d989b-48a6-474c-b537-5e3ea6e205bd"
    trace_id: "1ad15b07-530e-4695-b03a-f8917cb54c11"
    span_id: "afd0e491fdc32479"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:27:27 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "8d6e6703-7563-4f01-a816-d233db0b9e78"
    trace_id: "02872373-4a55-43d2-b084-bf183a8c7c01"
    span_id: "7478f6c5a4d894e1"
[00:27:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:27 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:27 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "8d6e6703-7563-4f01-a816-d233db0b9e78"
    trace_id: "02872373-4a55-43d2-b084-bf183a8c7c01"
    span_id: "7478f6c5a4d894e1"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 3
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:27:29 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "0b06f345-1df2-4dd7-a1ad-9e3597335a70"
    trace_id: "46605f1c-d6ef-490a-bdd9-e8754ada4c60"
    span_id: "82ee026f5ff24086"
[00:27:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:29 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:29 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "0b06f345-1df2-4dd7-a1ad-9e3597335a70"
    trace_id: "46605f1c-d6ef-490a-bdd9-e8754ada4c60"
    span_id: "82ee026f5ff24086"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:27:31 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "50b6f21c-b478-4594-8a32-78eda93c6c7e"
    trace_id: "32926793-2788-4b8a-865e-6f7b02fa32ca"
    span_id: "faba069a803428ff"
[00:27:31 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:31 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:31 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:31 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:31 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "50b6f21c-b478-4594-8a32-78eda93c6c7e"
    trace_id: "32926793-2788-4b8a-865e-6f7b02fa32ca"
    span_id: "faba069a803428ff"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:27:33 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "a95b2c4a-a13c-4e7e-8e58-94ca47699f9e"
    trace_id: "d965c48b-d18e-49fd-9d71-c52006e24769"
    span_id: "aedd995c1b113a4c"
[00:27:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:33 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "a95b2c4a-a13c-4e7e-8e58-94ca47699f9e"
    trace_id: "d965c48b-d18e-49fd-9d71-c52006e24769"
    span_id: "aedd995c1b113a4c"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:27:35 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "a585daf5-1222-4f90-8e04-7b7317aaa016"
    trace_id: "2c7fc6aa-46fe-4db1-931b-68c6cda9785d"
    span_id: "bd9f83bcad4742a6"
[00:27:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:35 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "a585daf5-1222-4f90-8e04-7b7317aaa016"
    trace_id: "2c7fc6aa-46fe-4db1-931b-68c6cda9785d"
    span_id: "bd9f83bcad4742a6"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:27:37 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "b8e3c549-5714-41ed-af34-f6358d777179"
    trace_id: "a03ca1b5-8726-4f8c-af70-31fa998aa9e0"
    span_id: "3cf805106aeb051c"
[00:27:37 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:37 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:37 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:37 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:37 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "b8e3c549-5714-41ed-af34-f6358d777179"
    trace_id: "a03ca1b5-8726-4f8c-af70-31fa998aa9e0"
    span_id: "3cf805106aeb051c"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:27:39 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "1a1a47ff-7f63-4c1c-8129-6e380afce0a0"
    trace_id: "2814eb80-0f85-48ec-ba2f-041e494ea9ab"
    span_id: "8d47e261cfa03d9f"
[00:27:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:39 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "1a1a47ff-7f63-4c1c-8129-6e380afce0a0"
    trace_id: "2814eb80-0f85-48ec-ba2f-041e494ea9ab"
    span_id: "8d47e261cfa03d9f"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 11
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:27:41 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "c003a33c-4d83-4477-bf81-9868f0740117"
    trace_id: "55c45393-1bc4-4a69-9906-2de5b2685f6b"
    span_id: "4bc6ed1ba113c178"
[00:27:41 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:41 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:41 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:41 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:41 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "c003a33c-4d83-4477-bf81-9868f0740117"
    trace_id: "55c45393-1bc4-4a69-9906-2de5b2685f6b"
    span_id: "4bc6ed1ba113c178"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 8
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:27:43 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "5f0ceee9-dbd5-4b0e-9793-fceac8988ecd"
    trace_id: "c167dae5-77d2-4750-a7a1-95b542eb9e6d"
    span_id: "ba565abb990bd855"
[00:27:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:43 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:44 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:44 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "5f0ceee9-dbd5-4b0e-9793-fceac8988ecd"
    trace_id: "c167dae5-77d2-4750-a7a1-95b542eb9e6d"
    span_id: "ba565abb990bd855"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 17
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:27:46 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "d29ef8c0-b409-4cb2-a55d-c9e45ed3a10a"
    trace_id: "f09eac46-12ce-47a4-babf-dcbba15dad99"
    span_id: "a507747a54b70d6f"
[00:27:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:46 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "d29ef8c0-b409-4cb2-a55d-c9e45ed3a10a"
    trace_id: "f09eac46-12ce-47a4-babf-dcbba15dad99"
    span_id: "a507747a54b70d6f"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 11
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:27:48 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "ae1849d3-ebe3-45c7-b00c-1a1ea1e3effe"
    trace_id: "dd671969-2543-457a-ac71-8f6288aea3f8"
    span_id: "64cb553d0972b39f"
[00:27:48 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:48 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:48 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:48 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:48 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "ae1849d3-ebe3-45c7-b00c-1a1ea1e3effe"
    trace_id: "dd671969-2543-457a-ac71-8f6288aea3f8"
    span_id: "64cb553d0972b39f"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 54
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:27:50 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "34a3271e-3e09-48e5-9767-021ddf1b4466"
    trace_id: "9f35fbfc-0fbb-4225-9f47-84cfecee45e8"
    span_id: "6885b1a349a58719"
[00:27:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:50 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:50 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "34a3271e-3e09-48e5-9767-021ddf1b4466"
    trace_id: "9f35fbfc-0fbb-4225-9f47-84cfecee45e8"
    span_id: "6885b1a349a58719"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 21
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:27:52 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "eeb7d8f9-78ec-465c-a9ba-e489970712aa"
    trace_id: "d37454d7-ded0-4034-811a-3d2affc39c18"
    span_id: "06403d49a531ed9c"
[00:27:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:52 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:52 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "eeb7d8f9-78ec-465c-a9ba-e489970712aa"
    trace_id: "d37454d7-ded0-4034-811a-3d2affc39c18"
    span_id: "06403d49a531ed9c"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 11
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:27:54 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "e1e5f46d-088f-435f-9a12-25ed9a702224"
    trace_id: "7b916688-271b-4b33-a149-88e3dd94bf77"
    span_id: "decee7cfb45448f7"
[00:27:54 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:54 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:54 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:54 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:54 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "e1e5f46d-088f-435f-9a12-25ed9a702224"
    trace_id: "7b916688-271b-4b33-a149-88e3dd94bf77"
    span_id: "decee7cfb45448f7"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 94
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:27:57 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "0bf8336f-6fd5-4a48-88cc-0e0378e4f847"
    trace_id: "a922beee-c0f8-442b-a747-d88b8c5255b7"
    span_id: "3f82c3c5da503a51"
[00:27:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:57 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "0bf8336f-6fd5-4a48-88cc-0e0378e4f847"
    trace_id: "a922beee-c0f8-442b-a747-d88b8c5255b7"
    span_id: "3f82c3c5da503a51"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 169
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:27:59 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "e9871632-687b-4660-ab02-60e34612c4da"
    trace_id: "4a54e088-17ea-4817-84e0-4176cafac6e2"
    span_id: "6fa70d833e4fda86"
[00:27:59 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:59 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:59 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:59 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:27:59 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "e9871632-687b-4660-ab02-60e34612c4da"
    trace_id: "4a54e088-17ea-4817-84e0-4176cafac6e2"
    span_id: "6fa70d833e4fda86"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 26
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:01 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "704eeb91-4049-4664-8ce0-7da44f1d1713"
    trace_id: "91596996-afad-456f-8950-07dcc9bb7657"
    span_id: "8872c609c0fca201"
[00:28:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:01 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "704eeb91-4049-4664-8ce0-7da44f1d1713"
    trace_id: "91596996-afad-456f-8950-07dcc9bb7657"
    span_id: "8872c609c0fca201"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 184
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:04 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "63a68c2c-4f77-4bf1-b85a-83f22b94e0c5"
    trace_id: "f541f87e-7927-41ce-8787-3fef9679d02c"
    span_id: "604ba42de89c2a5a"
[00:28:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:04 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "63a68c2c-4f77-4bf1-b85a-83f22b94e0c5"
    trace_id: "f541f87e-7927-41ce-8787-3fef9679d02c"
    span_id: "604ba42de89c2a5a"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 23
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:06 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "a5e8afcf-3044-460d-b58c-3afcec313c77"
    trace_id: "c7773abc-eb0c-401b-a0ab-ea1bb8a4ad7e"
    span_id: "35fa1d045dde8c06"
[00:28:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:06 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "a5e8afcf-3044-460d-b58c-3afcec313c77"
    trace_id: "c7773abc-eb0c-401b-a0ab-ea1bb8a4ad7e"
    span_id: "35fa1d045dde8c06"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 29
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:08 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "7b617845-2afa-457f-90f7-bcc641ce9ac4"
    trace_id: "f7951e80-91b0-4ec5-bcfe-d31c29d452a5"
    span_id: "a423034e1faef40b"
[00:28:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:08 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "7b617845-2afa-457f-90f7-bcc641ce9ac4"
    trace_id: "f7951e80-91b0-4ec5-bcfe-d31c29d452a5"
    span_id: "a423034e1faef40b"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 433
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:11 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "b933f169-2896-4036-972d-69c1bfc2cf49"
    trace_id: "f868b751-a79a-4a09-97f4-c2762a9c1479"
    span_id: "35d2edf942a8dbfd"
[00:28:11 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:11 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:11 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:11 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:11 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "b933f169-2896-4036-972d-69c1bfc2cf49"
    trace_id: "f868b751-a79a-4a09-97f4-c2762a9c1479"
    span_id: "35d2edf942a8dbfd"
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/agents"}: 1
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
prisma:query 
        SELECT
          agent_type,
          COUNT(*) as total_tasks,
          COALESCE(SUM(CASE WHEN status = 'completed' THEN 1 ELSE 0 END), 0) as completed_tasks,
          COALESCE(SUM(CASE WHEN status = 'failed' THEN 1 ELSE 0 END), 0) as failed_tasks,
          COALESCE(SUM(CASE WHEN status = 'cancelled' THEN 1 ELSE 0 END), 0) as cancelled_tasks,
          AVG(EXTRACT(EPOCH FROM (completed_at - started_at)) * 1000)::float as avg_duration_ms,
          AVG(retry_count)::float as avg_retries
        FROM "AgentTask"
        WHERE agent_type IS NOT NULL
        GROUP BY agent_type
        ORDER BY total_tasks DESC
      
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/agents",status_code="200"}: 208
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/agents",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/agents"}: 293
[00:28:13 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "6c9e5106-f14d-4ccf-ac06-8e05d1009a6d"
    trace_id: "9504b0a9-1b62-4216-a58b-0e5b07a915ae"
    span_id: "df2be41315ad1dae"
[00:28:13 UTC] [34mDEBUG[39m (orchestrator): [36mGetting agent performance stats[39m
[00:28:13 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "2b24e310-bcd6-4239-8afe-5b1c1cb3a82a"
    trace_id: "20aa1088-4fc5-4133-9184-4d78779e25e1"
    span_id: "0fe8c164c195190d"
[00:28:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:13 UTC] [34mDEBUG[39m (orchestrator): [36mAgent stats retrieved[39m
[00:28:13 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "6c9e5106-f14d-4ccf-ac06-8e05d1009a6d"
    trace_id: "9504b0a9-1b62-4216-a58b-0e5b07a915ae"
    span_id: "df2be41315ad1dae"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
[00:28:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
[00:28:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 277
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:13 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:13 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "2b24e310-bcd6-4239-8afe-5b1c1cb3a82a"
    trace_id: "20aa1088-4fc5-4133-9184-4d78779e25e1"
    span_id: "0fe8c164c195190d"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 108
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:16 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "35a66686-c916-44a1-a833-a3e259bc001b"
    trace_id: "cc6f4e78-93ea-41bd-95fd-566c8492d617"
    span_id: "a534410aa827e8f4"
[00:28:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:16 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "35a66686-c916-44a1-a833-a3e259bc001b"
    trace_id: "cc6f4e78-93ea-41bd-95fd-566c8492d617"
    span_id: "a534410aa827e8f4"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 55
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[00:28:18 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "96e4b35e-9937-49bb-a22d-f83ca247a7e9"
    trace_id: "4139fe26-c45a-41a6-acd8-6b980ffbc004"
    span_id: "53e502e15a726494"
[00:28:18 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:18 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:18 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:18 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:18 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "96e4b35e-9937-49bb-a22d-f83ca247a7e9"
    trace_id: "4139fe26-c45a-41a6-acd8-6b980ffbc004"
    span_id: "53e502e15a726494"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 58
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:20 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "673d7cc2-0d18-4763-b2f7-212fca13da60"
    trace_id: "0588aad1-144d-4a44-9d75-0cc46ad9cabb"
    span_id: "5197264153aeabfd"
[00:28:20 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:20 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:20 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:20 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:20 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "673d7cc2-0d18-4763-b2f7-212fca13da60"
    trace_id: "0588aad1-144d-4a44-9d75-0cc46ad9cabb"
    span_id: "5197264153aeabfd"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[00:28:23 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "4be93986-56e0-4af7-aa0c-0eb25993d1f4"
    trace_id: "a812cf7e-d9b3-4df9-a5a7-530de8600fa4"
    span_id: "81d246cd734290c9"
[00:28:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 99
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:23 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "4be93986-56e0-4af7-aa0c-0eb25993d1f4"
    trace_id: "a812cf7e-d9b3-4df9-a5a7-530de8600fa4"
    span_id: "81d246cd734290c9"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/stats/agents"}: 1
prisma:query 
        SELECT
          agent_type,
          COUNT(*) as total_tasks,
          COALESCE(SUM(CASE WHEN status = 'completed' THEN 1 ELSE 0 END), 0) as completed_tasks,
          COALESCE(SUM(CASE WHEN status = 'failed' THEN 1 ELSE 0 END), 0) as failed_tasks,
          COALESCE(SUM(CASE WHEN status = 'cancelled' THEN 1 ELSE 0 END), 0) as cancelled_tasks,
          AVG(EXTRACT(EPOCH FROM (completed_at - started_at)) * 1000)::float as avg_duration_ms,
          AVG(retry_count)::float as avg_retries
        FROM "AgentTask"
        WHERE agent_type IS NOT NULL
        GROUP BY agent_type
        ORDER BY total_tasks DESC
      
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/stats/agents",status_code="200"}: 221
[METRIC] http_responses_total{method="GET",path="/api/v1/stats/agents",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/stats/agents"}: 293
[00:28:23 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "c419f25f-705d-479d-91d1-9618fd8ebc45"
    trace_id: "166f6f8e-9e12-4b40-80ac-14e3b50c1e6c"
    span_id: "1fc3020e1c74840b"
[00:28:23 UTC] [34mDEBUG[39m (orchestrator): [36mGetting agent performance stats[39m
[00:28:24 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:24 UTC] [34mDEBUG[39m (orchestrator): [36mAgent stats retrieved[39m
[00:28:24 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "c419f25f-705d-479d-91d1-9618fd8ebc45"
    trace_id: "166f6f8e-9e12-4b40-80ac-14e3b50c1e6c"
    span_id: "1fc3020e1c74840b"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 124
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:25 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "297b34a9-ff21-440d-9a3d-776befa94ef5"
    trace_id: "c631ddcf-67bf-4e06-88ae-4d9d5f5a4235"
    span_id: "3a8e75e378ffb7e0"
[00:28:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:25 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:25 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "297b34a9-ff21-440d-9a3d-776befa94ef5"
    trace_id: "c631ddcf-67bf-4e06-88ae-4d9d5f5a4235"
    span_id: "3a8e75e378ffb7e0"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 132
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:27 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "3b093dc7-0bed-4799-825f-f6b9cd50bdef"
    trace_id: "7febad25-aa3e-4ee9-9433-688c96dd9d02"
    span_id: "15310b2a777c2810"
[00:28:28 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:28 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:28 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:28 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:28 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "3b093dc7-0bed-4799-825f-f6b9cd50bdef"
    trace_id: "7febad25-aa3e-4ee9-9433-688c96dd9d02"
    span_id: "15310b2a777c2810"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 119
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:30 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "539f4aad-53a8-4d3a-9c34-f7b52675193b"
    trace_id: "019fda27-4137-4682-b241-bd1d60178ef1"
    span_id: "9c3370cb48a96bd6"
[00:28:30 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:30 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:30 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:30 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:30 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:30 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "539f4aad-53a8-4d3a-9c34-f7b52675193b"
    trace_id: "019fda27-4137-4682-b241-bd1d60178ef1"
    span_id: "9c3370cb48a96bd6"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 83
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[METRIC] http_requests_total{method="GET",path="/api/v1/traces"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."trace_id", "public"."Workflow"."status"::text, "public"."Workflow"."created_at", "public"."Workflow"."completed_at" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" IS NOT NULL ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
[00:28:32 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "52112a31-2170-4d89-a9cd-829021203c5c"
    trace_id: "4c38c31d-603e-4cc7-bc86-ef60f69accd6"
    span_id: "db1b6f35db713b3a"
[00:28:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:32 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "52112a31-2170-4d89-a9cd-829021203c5c"
    trace_id: "4c38c31d-603e-4cc7-bc86-ef60f69accd6"
    span_id: "db1b6f35db713b3a"
[00:28:33 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "b5e72569-2ec5-4621-b72b-b1bab617ee17"
    trace_id: "0a3e4c8d-567d-4f34-916a-f22f42e05896"
    span_id: "b0ead19e59bcffc6"
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mListing traces[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/traces",status_code="200"}: 544
[METRIC] http_responses_total{method="GET",path="/api/v1/traces",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/traces"}: 3218
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:33 UTC] [34mDEBUG[39m (orchestrator): [36mTraces listed[39m
[00:28:33 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "b5e72569-2ec5-4621-b72b-b1bab617ee17"
    trace_id: "0a3e4c8d-567d-4f34-916a-f22f42e05896"
    span_id: "b0ead19e59bcffc6"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[00:28:35 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "10e7f96e-cfa2-43b4-b7be-0bc7fc73cd9c"
    trace_id: "ffe25e72-b976-4843-83ea-f36ea3f743a2"
    span_id: "e6074fdc28c77f7c"
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1611
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:37 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:37 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "10e7f96e-cfa2-43b4-b7be-0bc7fc73cd9c"
    trace_id: "ffe25e72-b976-4843-83ea-f36ea3f743a2"
    span_id: "e6074fdc28c77f7c"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 94
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:39 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "fe5d14f4-712c-48ae-8f14-a3728dff1583"
    trace_id: "1a500e3e-2ac8-4c97-b616-dff3545d9822"
    span_id: "fcbb40df5c14d477"
[00:28:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:39 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "fe5d14f4-712c-48ae-8f14-a3728dff1583"
    trace_id: "1a500e3e-2ac8-4c97-b616-dff3545d9822"
    span_id: "fcbb40df5c14d477"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 113
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:41 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "64ca51fe-9e95-4fc0-a44b-f98b46f6464f"
    trace_id: "a9657d0d-2542-4a76-a755-2a4a8b9e156d"
    span_id: "75e408a02297ea30"
[00:28:41 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:41 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:41 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:41 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:42 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "64ca51fe-9e95-4fc0-a44b-f98b46f6464f"
    trace_id: "a9657d0d-2542-4a76-a755-2a4a8b9e156d"
    span_id: "75e408a02297ea30"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 99
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:44 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "0d00a908-9981-4a41-8c09-8b3d48b6e4e9"
    trace_id: "2d8f6ae3-8071-4a16-a9c7-2f76a6187733"
    span_id: "6d8b1e35586a0044"
[00:28:44 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:44 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:44 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:44 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:44 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "0d00a908-9981-4a41-8c09-8b3d48b6e4e9"
    trace_id: "2d8f6ae3-8071-4a16-a9c7-2f76a6187733"
    span_id: "6d8b1e35586a0044"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 212
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:46 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "2ca4e350-d935-4c66-85d8-2118124dc834"
    trace_id: "7c095e0b-2adf-4a17-a00d-f091c988a30e"
    span_id: "99b1d8f781a77bf4"
[00:28:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:46 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:46 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "2ca4e350-d935-4c66-85d8-2118124dc834"
    trace_id: "7c095e0b-2adf-4a17-a00d-f091c988a30e"
    span_id: "99b1d8f781a77bf4"
[METRIC] http_requests_total{method="GET",path="/api/v1/traces"}: 1
prisma:query SELECT 1
[00:28:48 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "703ccf4e-6f68-4129-85f8-8eec0826151e"
    trace_id: "9fd82cbb-eb20-4176-86d6-67d89ce388cc"
    span_id: "1a370b33145366f3"
[00:28:48 UTC] [34mDEBUG[39m (orchestrator): [36mListing traces[39m
[00:28:48 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."trace_id", "public"."Workflow"."status"::text, "public"."Workflow"."created_at", "public"."Workflow"."completed_at" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" IS NOT NULL ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
prisma:query SELECT 1
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT 1
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
prisma:query SELECT 1
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
prisma:query SELECT 1
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/traces",status_code="200"}: 171
[METRIC] http_responses_total{method="GET",path="/api/v1/traces",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/traces"}: 3218
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mTraces listed[39m
[00:28:49 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "703ccf4e-6f68-4129-85f8-8eec0826151e"
    trace_id: "9fd82cbb-eb20-4176-86d6-67d89ce388cc"
    span_id: "1a370b33145366f3"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 28
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:49 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "deb91ffd-0cb8-4ada-bc0e-0c3e986da279"
    trace_id: "bb18de94-1770-4bf6-a21b-22471ba3023f"
    span_id: "03c72d07e32dda93"
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:49 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "deb91ffd-0cb8-4ada-bc0e-0c3e986da279"
    trace_id: "bb18de94-1770-4bf6-a21b-22471ba3023f"
    span_id: "03c72d07e32dda93"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 75
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:51 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "b7f2a201-9068-46cd-8a49-0e4a5d6e5019"
    trace_id: "06766893-d807-4813-a519-f8e85e5960c5"
    span_id: "07df4896d2da3061"
[00:28:51 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:51 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:51 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:51 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:51 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "b7f2a201-9068-46cd-8a49-0e4a5d6e5019"
    trace_id: "06766893-d807-4813-a519-f8e85e5960c5"
    span_id: "07df4896d2da3061"
[METRIC] http_requests_total{method="GET",path="/api/v1/platforms"}: 1
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/platforms",status_code="200"}: 18
[METRIC] http_responses_total{method="GET",path="/api/v1/platforms",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/platforms"}: 2
[METRIC] http_requests_total{method="GET",path="/api/v1/platforms"}: 1
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/platforms",status_code="200"}: 2
[METRIC] http_responses_total{method="GET",path="/api/v1/platforms",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/platforms"}: 2
[00:28:52 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "8a825943-9b12-41b1-a058-ac7083217710"
    trace_id: "44f608ee-f518-4a37-9204-a2f61e05b180"
    span_id: "c92903fece6cdf9e"
[00:28:52 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "8a825943-9b12-41b1-a058-ac7083217710"
    trace_id: "44f608ee-f518-4a37-9204-a2f61e05b180"
    span_id: "c92903fece6cdf9e"
[00:28:52 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "265ac6bb-5568-48ce-b330-ea92bf0ab696"
    trace_id: "97eaa5be-549c-4164-b5d1-cae9db6111c0"
    span_id: "89d96c3f33e948af"
[00:28:52 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "265ac6bb-5568-48ce-b330-ea92bf0ab696"
    trace_id: "97eaa5be-549c-4164-b5d1-cae9db6111c0"
    span_id: "89d96c3f33e948af"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE 1=1 ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15) OFFSET $16
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows",status_code="200"}: 66
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows"}: 6114
[00:28:53 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "31a87c75-a942-40a2-a663-e4b9da4a00ae"
    trace_id: "46a20ce3-1a31-4743-9209-f4c04e40ec63"
    span_id: "d43f84926e9304de"
[00:28:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:53 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "31a87c75-a942-40a2-a663-e4b9da4a00ae"
    trace_id: "46a20ce3-1a31-4743-9209-f4c04e40ec63"
    span_id: "d43f84926e9304de"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 66
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:53 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "6d76809b-d3bf-419c-8950-733bf69566c4"
    trace_id: "b80b5c5b-3ee2-4517-95d8-4ef061cd0ce5"
    span_id: "fa5079d932116c13"
[00:28:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:53 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "6d76809b-d3bf-419c-8950-733bf69566c4"
    trace_id: "b80b5c5b-3ee2-4517-95d8-4ef061cd0ce5"
    span_id: "fa5079d932116c13"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 81
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:56 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "c052813a-529c-42d9-86d5-20001db13794"
    trace_id: "197d9fa7-b883-4960-9e7f-fa1ccf12ebca"
    span_id: "215e044e1bb3be43"
[00:28:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:56 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:56 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "c052813a-529c-42d9-86d5-20001db13794"
    trace_id: "197d9fa7-b883-4960-9e7f-fa1ccf12ebca"
    span_id: "215e044e1bb3be43"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE 1=1 ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15) OFFSET $16
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows",status_code="200"}: 109
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows"}: 6114
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
[00:28:58 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "99e2bd1e-747f-41b2-9889-e736100d909f"
    trace_id: "85c8741a-c1a3-476d-b059-58542b41234e"
    span_id: "4c644b4893d3d341"
[00:28:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:58 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "99e2bd1e-747f-41b2-9889-e736100d909f"
    trace_id: "85c8741a-c1a3-476d-b059-58542b41234e"
    span_id: "4c644b4893d3d341"
[00:28:58 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "ce441ed7-ac84-4270-867d-a95b1fa2e900"
    trace_id: "8188dae0-e46c-4670-aa2b-6875d2bb82aa"
    span_id: "0a468e5977128c82"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
[00:28:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 71
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:28:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:28:58 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "ce441ed7-ac84-4270-867d-a95b1fa2e900"
    trace_id: "8188dae0-e46c-4670-aa2b-6875d2bb82aa"
    span_id: "0a468e5977128c82"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 131
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[METRIC] http_requests_total{method="GET",path="/api/v1/traces"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."trace_id", "public"."Workflow"."status"::text, "public"."Workflow"."created_at", "public"."Workflow"."completed_at" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" IS NOT NULL ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."trace_id" = $1 ORDER BY "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE "public"."Workflow"."trace_id" = $1 ORDER BY "public"."Workflow"."created_at" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) OFFSET $2
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/traces",status_code="200"}: 142
[METRIC] http_responses_total{method="GET",path="/api/v1/traces",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/traces"}: 3218
[00:29:00 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "cd17ec16-f03d-4c20-8284-ffb2f7ae57ae"
    trace_id: "c24e6469-70cd-4e68-bd0a-cfa34a302d5d"
    span_id: "12a846179c9f2c2e"
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "cd17ec16-f03d-4c20-8284-ffb2f7ae57ae"
    trace_id: "c24e6469-70cd-4e68-bd0a-cfa34a302d5d"
    span_id: "12a846179c9f2c2e"
[00:29:01 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "6bc88277-7b5b-4be2-b8d2-166f22fbe17a"
    trace_id: "67a84ce7-1974-4ef4-938a-7a9beb32400e"
    span_id: "4722e5b907f456e1"
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mListing traces[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mTasks found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mWorkflows found by trace_id[39m
[00:29:01 UTC] [34mDEBUG[39m (orchestrator): [36mTraces listed[39m
[00:29:01 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "6bc88277-7b5b-4be2-b8d2-166f22fbe17a"
    trace_id: "67a84ce7-1974-4ef4-938a-7a9beb32400e"
    span_id: "4722e5b907f456e1"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/platforms"}: 1
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/platforms",status_code="200"}: 41
[METRIC] http_responses_total{method="GET",path="/api/v1/platforms",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/platforms"}: 2
[METRIC] http_requests_total{method="GET",path="/api/v1/platforms"}: 1
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/platforms",status_code="200"}: 2
[METRIC] http_responses_total{method="GET",path="/api/v1/platforms",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/platforms"}: 2
[00:29:11 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "7bdbcb04-7e47-497c-9dca-c42068457fca"
    trace_id: "961b9cc3-ffbd-4121-befb-6a6ed7da91a1"
    span_id: "25dd4a4694717f22"
[00:29:12 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "7bdbcb04-7e47-497c-9dca-c42068457fca"
    trace_id: "961b9cc3-ffbd-4121-befb-6a6ed7da91a1"
    span_id: "25dd4a4694717f22"
[00:29:12 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "9e5f1d63-6059-412c-be8a-fa1eb4fea8d5"
    trace_id: "580d4436-784f-4040-9a4c-3ad986cff3de"
    span_id: "61e203f6ef3d65a8"
[00:29:12 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "9e5f1d63-6059-412c-be8a-fa1eb4fea8d5"
    trace_id: "580d4436-784f-4040-9a4c-3ad986cff3de"
    span_id: "61e203f6ef3d65a8"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 388
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:29:34 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "84b4fa2a-2008-445f-8080-cf0ff7000b3f"
    trace_id: "6a474333-ac95-4de5-b85c-130d655d36ea"
    span_id: "95663d438255d328"
[00:29:34 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:34 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:34 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:34 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:34 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:34 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "84b4fa2a-2008-445f-8080-cf0ff7000b3f"
    trace_id: "6a474333-ac95-4de5-b85c-130d655d36ea"
    span_id: "95663d438255d328"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE 1=1 ORDER BY "public"."Workflow"."created_at" DESC OFFSET $1
[00:29:56 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "ea86d8ec-6053-4671-b080-b79a65a9604e"
    trace_id: "9dbcce92-aaa4-4269-b304-abc73847c467"
    span_id: "684308c8651ec28c"
[00:29:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15) OFFSET $16
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows",status_code="200"}: 899
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows"}: 6114
[00:29:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:57 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:29:57 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "ea86d8ec-6053-4671-b080-b79a65a9604e"
    trace_id: "9dbcce92-aaa4-4269-b304-abc73847c467"
    span_id: "684308c8651ec28c"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."trace_id", "public"."Workflow"."current_span_id", "public"."Workflow"."platform_id", "public"."Workflow"."workflow_definition_id", "public"."Workflow"."surface_id", "public"."Workflow"."input_data", "public"."Workflow"."layer", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."trace_id", "public"."AgentTask"."span_id", "public"."AgentTask"."parent_span_id", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 518
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 407
[00:30:23 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "b719b1bf-b9c5-4cea-bae5-330c8f3bf12c"
    trace_id: "e47661f5-8233-4958-9624-8c2f41bb9fef"
    span_id: "3250780be402a055"
[00:30:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:30:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:30:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:30:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:30:23 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[00:30:23 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "b719b1bf-b9c5-4cea-bae5-330c8f3bf12c"
    trace_id: "e47661f5-8233-4958-9624-8c2f41bb9fef"
    span_id: "3250780be402a055"
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
[DEBUG-STREAM] About to call XREADGROUP {
  streamKey: 'stream:orchestrator:results',
  consumerGroup: 'orchestrator-group',
  consumerName: 'consumer-1763425192572'
}
{"ts":"2025-11-18T00:32:16.457Z","scope":"bootstrap","msg":"Shutting down container","level":"INFO"}
{"ts":"2025-11-18T00:32:16.520Z","scope":"redis-bus","msg":"Bus disconnected (clients managed by suite)","level":"INFO"}
{"ts":"2025-11-18T00:32:16.520Z","scope":"redis-kv","msg":"KV disconnected (client managed by suite)","level":"INFO"}
{"ts":"2025-11-18T00:32:16.524Z","scope":"redis-suite","msg":"Disconnecting Redis suite","level":"INFO"}
[00:32:16 UTC] [32mINFO[39m (orchestrator): [36mShutdown phase update[39m
[00:32:16 UTC] [32mINFO[39m (orchestrator): [36mGraceful shutdown initiated[39m
[00:32:16 UTC] [32mINFO[39m (orchestrator): [36mShutdown phase update[39m
[00:32:16 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-3] Shutting down OrchestratorContainer[39m
[DEBUG-STREAM] XREADGROUP returned { hasResults: false, resultsLength: 0, resultsType: 'object' }
{"ts":"2025-11-18T00:32:17.710Z","scope":"redis-bus","msg":"[PHASE-3] Stream consumer stopped","level":"INFO","streamKey":"stream:orchestrator:results"}
{"ts":"2025-11-18T00:32:17.711Z","scope":"redis-suite","msg":"Redis suite disconnected","level":"INFO"}
{"ts":"2025-11-18T00:32:17.711Z","scope":"bootstrap","msg":"Container shutdown complete","level":"INFO"}
[00:32:17 UTC] [32mINFO[39m (orchestrator): [36m[PHASE-3] Container shutdown complete[39m
[00:32:17 UTC] [32mINFO[39m (orchestrator): [36mActive requests drained successfully[39m
[00:32:17 UTC] [32mINFO[39m (orchestrator): [36mShutdown phase update[39m
[00:32:17 UTC] [32mINFO[39m (orchestrator): [36mNo active pipelines to save[39m
[00:32:17 UTC] [32mINFO[39m (orchestrator): [36mShutdown phase update[39m
[00:32:17 UTC] [32mINFO[39m (orchestrator): [36mCleaning up Pipeline WebSocket handler[39m
[00:32:17 UTC] [32mINFO[39m (orchestrator): [36mWebSocket connections closed[39m
[00:32:17 UTC] [32mINFO[39m (orchestrator): [36mEvent bus disconnected[39m
[00:32:17 UTC] [32mINFO[39m (orchestrator): [36mEvent bus disconnected[39m
[00:32:17 UTC] [32mINFO[39m (orchestrator): [36mDatabase connection closed[39m
[00:32:17 UTC] [32mINFO[39m (orchestrator): [36mShutdown phase update[39m
[00:32:17 UTC] [32mINFO[39m (orchestrator): [36mCleaning up PipelineExecutorService[39m
[00:32:17 UTC] [32mINFO[39m (orchestrator): [36mPipeline executor cleaned up[39m
[00:32:17 UTC] [32mINFO[39m (orchestrator): [36mCleaning up WorkflowService[39m
[00:32:17 UTC] [33mWARN[39m (orchestrator): [36mError during resource cleanup, continuing[39m
[00:32:17 UTC] [32mINFO[39m (orchestrator): [36mShutdown phase update[39m
[00:32:17 UTC] [32mINFO[39m (orchestrator): [36mGraceful shutdown completed[39m
