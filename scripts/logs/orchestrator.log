
> @agentic-sdlc/orchestrator@0.1.0 dev
> tsx watch src/index.ts

‚úÖ Registered schema: workflow (v1.0.0)
‚úÖ Registered schema: agent.task (v1.0.0)
‚úÖ Registered schema: agent.result (v1.0.0)
‚úÖ Registered schema: pipeline.stage (v1.0.0)
‚úÖ Registered schema: event (v1.0.0)
‚úÖ Registered schema: scaffold.task (v1.0.0)
‚úÖ Registered schema: scaffold.result (v1.0.0)
‚úÖ Registered schema: scaffold.requirements (v1.0.0)
‚úÖ Registered schema: validation.task (v1.0.0)
‚úÖ Registered schema: validation.result (v1.0.0)
‚úÖ Registered schema: e2e.task (v1.0.0)
‚úÖ Registered schema: e2e.result (v1.0.0)
‚úÖ Registered schema: e2e.page_object (v1.0.0)
‚úÖ Registered schema: integration.task (v1.0.0)
‚úÖ Registered schema: integration.result (v1.0.0)
‚úÖ Registered schema: deployment.task (v1.0.0)
‚úÖ Registered schema: deployment.result (v1.0.0)
üì¶ @agentic-sdlc/shared-types loaded
üìù Registered schemas: workflow, agent.task, agent.result, pipeline.stage, event, scaffold.task, scaffold.result, scaffold.requirements, validation.task, validation.result, e2e.task, e2e.result, e2e.page_object, integration.task, integration.result, deployment.task, deployment.result
üîñ Version: 1.0.0
prisma:info Starting a postgresql pool with 29 connections.
[12:12:35 UTC] [32mINFO[39m (orchestrator): [36mStarting Agentic SDLC Orchestrator...[39m
[12:12:35 UTC] [32mINFO[39m (orchestrator): [36mDatabase connected successfully[39m
[12:12:35 UTC] [32mINFO[39m (orchestrator): [36müöÄ INITIALIZING AGENT DISPATCHER SERVICE (node-redis v4)[39m
[12:12:35 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ REDIS CLIENTS CREATED[39m
[12:12:35 UTC] [32mINFO[39m (orchestrator): [36m[WF:CONSTRUCTOR:START] WorkflowService instance created[39m
[12:12:35 UTC] [32mINFO[39m (orchestrator): [36m[WF:SETUP_HANDLERS] Registering event handlers[39m
[12:12:35 UTC] [32mINFO[39m (orchestrator): [36m[WF:SUBSCRIBING] Subscribing to TASK_COMPLETED[39m
[12:12:35 UTC] [33mWARN[39m (orchestrator): [36mFailed to load policy gates, using defaults[39m
[12:12:35 UTC] [32mINFO[39m (orchestrator): [36mLoaded default quality gates[39m
[12:12:35 UTC] [32mINFO[39m (orchestrator): [36mPipeline WebSocket handler listening for updates[39m
[12:12:35 UTC] [32mINFO[39m (orchestrator): [36mWebSocket routes registered at /ws/pipelines[39m
=================== SERVER START ERROR ===================
Error: Error: listen EADDRINUSE: address already in use 0.0.0.0:3000
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '0.0.0.0',
  port: 3000
}
Message: listen EADDRINUSE: address already in use 0.0.0.0:3000
Stack: Error: listen EADDRINUSE: address already in use 0.0.0.0:3000
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at node:net:2206:7
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
==========================================================
[12:12:35 UTC] [32mINFO[39m (orchestrator): [36mGraceful shutdown handlers initialized[39m
[12:12:35 UTC] [31mERROR[39m (orchestrator): [36mFailed to start server[39m
7:13:43 AM [tsx] change in ./../shared/types/dist/registry/schema-registry.js Rerunning...
c‚úÖ Registered schema: workflow (v1.0.0)
‚úÖ Registered schema: agent.task (v1.0.0)
‚úÖ Registered schema: agent.result (v1.0.0)
‚úÖ Registered schema: pipeline.stage (v1.0.0)
‚úÖ Registered schema: event (v1.0.0)
‚úÖ Registered schema: scaffold.task (v1.0.0)
‚úÖ Registered schema: scaffold.result (v1.0.0)
‚úÖ Registered schema: scaffold.requirements (v1.0.0)
‚úÖ Registered schema: validation.task (v1.0.0)
‚úÖ Registered schema: validation.result (v1.0.0)
‚úÖ Registered schema: e2e.task (v1.0.0)
‚úÖ Registered schema: e2e.result (v1.0.0)
‚úÖ Registered schema: e2e.page_object (v1.0.0)
‚úÖ Registered schema: integration.task (v1.0.0)
‚úÖ Registered schema: integration.result (v1.0.0)
‚úÖ Registered schema: deployment.task (v1.0.0)
‚úÖ Registered schema: deployment.result (v1.0.0)
üì¶ @agentic-sdlc/shared-types loaded
üìù Registered schemas: workflow, agent.task, agent.result, pipeline.stage, event, scaffold.task, scaffold.result, scaffold.requirements, validation.task, validation.result, e2e.task, e2e.result, e2e.page_object, integration.task, integration.result, deployment.task, deployment.result
üîñ Version: 1.0.0
prisma:info Starting a postgresql pool with 29 connections.
[12:13:43 UTC] [32mINFO[39m (orchestrator): [36mStarting Agentic SDLC Orchestrator...[39m
[12:13:43 UTC] [32mINFO[39m (orchestrator): [36mDatabase connected successfully[39m
[ioredis] Unhandled error event: Error: Connection in subscriber mode, only subscriber commands may be used
    at EventEmitter.sendCommand (/Users/Greg/Projects/apps/zyp/agent-sdlc/node_modules/.pnpm/ioredis@5.8.2/node_modules/ioredis/built/Redis.js:338:28)
    at EventEmitter.info (/Users/Greg/Projects/apps/zyp/agent-sdlc/node_modules/.pnpm/ioredis@5.8.2/node_modules/ioredis/built/utils/Commander.js:90:25)
    at EventEmitter._readyCheck (/Users/Greg/Projects/apps/zyp/agent-sdlc/node_modules/.pnpm/ioredis@5.8.2/node_modules/ioredis/built/Redis.js:655:14)
    at /Users/Greg/Projects/apps/zyp/agent-sdlc/node_modules/.pnpm/ioredis@5.8.2/node_modules/ioredis/built/redis/event_handler.js:82:22
    at <anonymous>
[METRIC] server.started{}: 1
[12:13:43 UTC] [32mINFO[39m (orchestrator): [36müöÄ INITIALIZING AGENT DISPATCHER SERVICE (node-redis v4)[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ REDIS CLIENTS CREATED[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36m[WF:CONSTRUCTOR:START] WorkflowService instance created[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36m[WF:SETUP_HANDLERS] Registering event handlers[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36m[WF:SUBSCRIBING] Subscribing to TASK_COMPLETED[39m
[12:13:44 UTC] [33mWARN[39m (orchestrator): [36mFailed to load policy gates, using defaults[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36mLoaded default quality gates[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36mPipeline WebSocket handler listening for updates[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36mWebSocket routes registered at /ws/pipelines[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36m[EB:REDIS_SUBSCRIBED] Subscribed to Redis channel[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36m[EB:HANDLER_REGISTERED] Handler registered for event[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36m[EB:REDIS_SUBSCRIBED] Subscribed to Redis channel[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36m[EB:HANDLER_REGISTERED] Handler registered for event[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36m[EB:REDIS_SUBSCRIBED] Subscribed to Redis channel[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36m[EB:HANDLER_REGISTERED] Handler registered for event[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36mGraceful shutdown handlers initialized[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36mOrchestrator server listening on 0.0.0.0:3000[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36mAPI documentation available at http://0.0.0.0:3000/documentation[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36mOrchestrator started successfully[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36müîó REDIS PUBLISHER CONNECTED[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36müîó REDIS SUBSCRIBER CONNECTED[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36müîå SETTING UP REDIS SUBSCRIPTION[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ SUCCESSFULLY SUBSCRIBED TO CHANNEL[39m
[12:13:44 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ RESULT LISTENER SET UP[39m
[METRIC] http_requests_total{method="GET",path="/api/workflows"}: 1
(node:97488) [FSTDEP017] DeprecationWarning: You are accessing the deprecated "request.routerPath" property. Use "request.routeOptions.url" instead. Property "req.routerPath" will be removed in `fastify@5`.
(Use `node --trace-deprecation ...` to show where the warning was created)
[METRIC] http_request_duration_ms{method="GET",path="/api/workflows",status_code="404"}: 2
[METRIC] http_responses_total{method="GET",path="/api/workflows",status_code="404"}: 1
[METRIC] http_errors_total{method="GET",path="/api/workflows",status_code="404",error_type="client"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/workflows"}: 85
(node:97488) [FSTDEP020] DeprecationWarning: You are using the deprecated "reply.getResponseTime()" method. Use the "reply.elapsedTime" property instead. Method "reply.getResponseTime()" will be removed in `fastify@5`.
[12:14:02 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "794c22cd-8d58-479e-a1e0-5391c5b2e234"
    trace_id: "trace-1762949642056-hvnltdglt"
[12:14:02 UTC] [33mWARN[39m (orchestrator): [36mRequest completed[39m
    request_id: "794c22cd-8d58-479e-a1e0-5391c5b2e234"
    trace_id: "trace-1762949642056-hvnltdglt"
[METRIC] http_requests_total{method="GET",path="/api/workflows"}: 1
[METRIC] http_request_duration_ms{method="GET",path="/api/workflows",status_code="404"}: 1
[METRIC] http_responses_total{method="GET",path="/api/workflows",status_code="404"}: 1
[METRIC] http_errors_total{method="GET",path="/api/workflows",status_code="404",error_type="client"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/workflows"}: 85
[12:16:46 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "20443c0c-0f58-4104-b866-d24c41ad9a02"
    trace_id: "trace-1762949806545-xldrn877x"
[12:16:46 UTC] [33mWARN[39m (orchestrator): [36mRequest completed[39m
    request_id: "20443c0c-0f58-4104-b866-d24c41ad9a02"
    trace_id: "trace-1762949806545-xldrn877x"
[METRIC] http_requests_total{method="GET",path="/workflows"}: 1
[METRIC] http_request_duration_ms{method="GET",path="/workflows",status_code="404"}: 0
[METRIC] http_responses_total{method="GET",path="/workflows",status_code="404"}: 1
[METRIC] http_errors_total{method="GET",path="/workflows",status_code="404",error_type="client"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/workflows"}: 81
[12:16:51 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "8904dc4d-8fef-472b-aeb0-11e621585780"
    trace_id: "trace-1762949811026-dbtjgyb8n"
[12:16:51 UTC] [33mWARN[39m (orchestrator): [36mRequest completed[39m
    request_id: "8904dc4d-8fef-472b-aeb0-11e621585780"
    trace_id: "trace-1762949811026-dbtjgyb8n"
[METRIC] http_requests_total{method="POST",path="/api/v1/workflows"}: 1
[METRIC] http_request_errors{method="POST",path="/api/v1/workflows",error_type="Error"}: 1
[METRIC] http_request_duration_ms{method="POST",path="/api/v1/workflows",status_code="400"}: 2
[METRIC] http_responses_total{method="POST",path="/api/v1/workflows",status_code="400"}: 1
[METRIC] http_errors_total{method="POST",path="/api/v1/workflows",status_code="400",error_type="client"}: 1
[METRIC] http_response_size_bytes{method="POST",path="/api/v1/workflows"}: 51
[12:20:01 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "430b0bce-b558-4523-87e2-c8f5573b3472"
    trace_id: "trace-1762950001980-x2ahkl8dp"
[12:20:01 UTC] [31mERROR[39m (orchestrator): [36mRequest error[39m
    request_id: "430b0bce-b558-4523-87e2-c8f5573b3472"
    trace_id: "trace-1762950001980-x2ahkl8dp"
[12:20:01 UTC] [33mWARN[39m (orchestrator): [36mRequest completed[39m
    request_id: "430b0bce-b558-4523-87e2-c8f5573b3472"
    trace_id: "trace-1762950001980-x2ahkl8dp"
[METRIC] http_requests_total{method="POST",path="/api/v1/workflows"}: 1
[METRIC] http_request_errors{method="POST",path="/api/v1/workflows",error_type="Error"}: 1
[METRIC] http_request_duration_ms{method="POST",path="/api/v1/workflows",status_code="400"}: 1
[METRIC] http_responses_total{method="POST",path="/api/v1/workflows",status_code="400"}: 1
[METRIC] http_errors_total{method="POST",path="/api/v1/workflows",status_code="400",error_type="client"}: 1
[METRIC] http_response_size_bytes{method="POST",path="/api/v1/workflows"}: 55
[12:20:06 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "095f0bad-5a03-470e-811e-d7c127046fab"
    trace_id: "trace-1762950006930-cxm4e51um"
[12:20:06 UTC] [31mERROR[39m (orchestrator): [36mRequest error[39m
    request_id: "095f0bad-5a03-470e-811e-d7c127046fab"
    trace_id: "trace-1762950006930-cxm4e51um"
[12:20:06 UTC] [33mWARN[39m (orchestrator): [36mRequest completed[39m
    request_id: "095f0bad-5a03-470e-811e-d7c127046fab"
    trace_id: "trace-1762950006930-cxm4e51um"
[METRIC] http_requests_total{method="POST",path="/api/v1/workflows"}: 1
prisma:query BEGIN
prisma:query INSERT INTO "public"."Workflow" ("id","type","name","description","requirements","status","current_stage","priority","progress","version","stage_outputs","created_at","updated_at","created_by") VALUES ($1,CAST($2::text AS "public"."WorkflowType"),$3,$4,$5,CAST($6::text AS "public"."WorkflowStatus"),$7,CAST($8::text AS "public"."Priority"),$9,$10,$11,$12,$13,$14) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query INSERT INTO "public"."WorkflowEvent" ("id","workflow_id","event_type","payload","timestamp","trace_id") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id"
prisma:query INSERT INTO "public"."WorkflowStage" ("status","retry_count","id","workflow_id","name") VALUES (CAST($1::text AS "public"."StageStatus"),$2,$3,$4,$5), (CAST($6::text AS "public"."StageStatus"),$7,$8,$9,$10), (CAST($11::text AS "public"."StageStatus"),$12,$13,$14,$15), (CAST($16::text AS "public"."StageStatus"),$17,$18,$19,$20), (CAST($21::text AS "public"."StageStatus"),$22,$23,$24,$25), (CAST($26::text AS "public"."StageStatus"),$27,$28,$29,$30), (CAST($31::text AS "public"."StageStatus"),$32,$33,$34,$35)
prisma:query COMMIT
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query INSERT INTO "public"."AgentTask" ("id","task_id","workflow_id","agent_type","status","priority","payload","assigned_at","retry_count","max_retries","timeout_ms") VALUES ($1,$2,$3,CAST($4::text AS "public"."AgentType"),CAST($5::text AS "public"."TaskStatus"),CAST($6::text AS "public"."Priority"),$7,$8,$9,$10,$11) RETURNING "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms"
[METRIC] workflow.creation{type="app"}: 59
[METRIC] workflows.created{type="app"}: 1
[METRIC] http_request_duration_ms{method="POST",path="/api/v1/workflows",status_code="200"}: 61
[METRIC] http_responses_total{method="POST",path="/api/v1/workflows",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="POST",path="/api/v1/workflows"}: 244
[12:20:32 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "4e3220c0-9c77-4187-ad4e-cce872e7a54b"
    trace_id: "trace-1762950032419-ysblmgwf8"
[12:20:32 UTC] [32mINFO[39m (orchestrator): [36mCreating workflow - Full request details[39m
[12:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:32 UTC] [32mINFO[39m (orchestrator): [36mWorkflow created[39m
[12:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:32 UTC] [32mINFO[39m (orchestrator): [36mWorkflow state transition[39m
[12:20:32 UTC] [32mINFO[39m (orchestrator): [36m[EB:PUBLISHED] Event published to Redis[39m
[12:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:32 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #26 CAS] Workflow updated successfully (CAS check passed)[39m
[12:20:32 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #26] Workflow status updated successfully[39m
[12:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:32 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:32 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Agent envelope created[39m
[12:20:32 UTC] [32mINFO[39m (orchestrator): [36m[EB:PUBLISHED] Event published to Redis[39m
[12:20:32 UTC] [32mINFO[39m (orchestrator): [36müìù REGISTERING RESULT HANDLER[39m
[12:20:32 UTC] [32mINFO[39m (orchestrator): [36müì§ PUBLISHING TASK TO AGENT CHANNEL[39m
[12:20:32 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ TASK PUBLISHED TO REDIS[39m
[12:20:32 UTC] [32mINFO[39m (orchestrator): [36mTask dispatched to agent[39m
[12:20:32 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Envelope dispatched to agent[39m
[12:20:32 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "4e3220c0-9c77-4187-ad4e-cce872e7a54b"
    trace_id: "trace-1762950032419-ysblmgwf8"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "stage_outputs" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."AgentTask" SET "status" = CAST($1::text AS "public"."TaskStatus"), "completed_at" = $2 WHERE ("public"."AgentTask"."task_id" = $3 AND 1=1) RETURNING "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query INSERT INTO "public"."AgentTask" ("id","task_id","workflow_id","agent_type","status","priority","payload","assigned_at","retry_count","max_retries","timeout_ms") VALUES ($1,$2,$3,CAST($4::text AS "public"."AgentType"),CAST($5::text AS "public"."TaskStatus"),CAST($6::text AS "public"."Priority"),$7,$8,$9,$10,$11) RETURNING "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms"
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36müì® RAW MESSAGE RECEIVED FROM REDIS[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ MESSAGE IS FOR ORCHESTRATOR:RESULTS CHANNEL - PROCESSING[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36müîç PARSING AGENT RESULT MESSAGE[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ SUCCESSFULLY PARSED JSON MESSAGE[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36müîî RECEIVED AGENT RESULT MESSAGE[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ HANDLER FOUND - Executing callback[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36mHandling agent result[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36mTask completed - determining stage[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #26 CAS] Workflow updated successfully (CAS check passed)[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #30] Stage output stored[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36m[WF:HANDLE_COMPLETION:ENTRY] handleTaskCompletion invoked[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #25 P1.2] Collision-proof eventId generated[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #25 P1.3] Distributed lock acquired[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #25 P2.1] Truth table entry - event and context state[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36m[WF:TASK_MARKED_PROCESSED] Task marked as processed[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36mStage completed[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mComputing next stage from current stage[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36mStage transition computed[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36mSESSION #24 FIX: Event ID tracked for deduplication[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Evaluating state entered (nextStage pre-computed)[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service executing[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service completed[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Transitioning to next stage (ABSOLUTE assignment)[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Context updated in memory (ABSOLUTE)[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #26 CAS] Workflow updated successfully (CAS check passed)[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Database persisted[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36mStage transition detected in database[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36mWorkflow state after stage completion[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36mCreating task for next stage[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Agent envelope created[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36m[EB:PUBLISHED] Event published to Redis[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36müìù REGISTERING RESULT HANDLER[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36müì§ PUBLISHING TASK TO AGENT CHANNEL[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ TASK PUBLISHED TO REDIS[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36mTask dispatched to agent[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Envelope dispatched to agent[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #25 HARDENING] Event ID tracked for deduplication[39m
[12:20:35 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #25 P1.3] Distributed lock released[39m
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "stage_outputs" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[12:20:36 UTC] [32mINFO[39m (orchestrator): [36müì® RAW MESSAGE RECEIVED FROM REDIS[39m
[12:20:36 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ MESSAGE IS FOR ORCHESTRATOR:RESULTS CHANNEL - PROCESSING[39m
[12:20:36 UTC] [32mINFO[39m (orchestrator): [36müîç PARSING AGENT RESULT MESSAGE[39m
[12:20:36 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ SUCCESSFULLY PARSED JSON MESSAGE[39m
[12:20:36 UTC] [32mINFO[39m (orchestrator): [36müîî RECEIVED AGENT RESULT MESSAGE[39m
[12:20:36 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ HANDLER FOUND - Executing callback[39m
[12:20:36 UTC] [32mINFO[39m (orchestrator): [36mHandling agent result[39m
[12:20:36 UTC] [32mINFO[39m (orchestrator): [36mTask completed - determining stage[39m
[12:20:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:36 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #26 CAS] Workflow updated successfully (CAS check passed)[39m
[12:20:36 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #30] Stage output stored[39m
[12:20:36 UTC] [32mINFO[39m (orchestrator): [36m[WF:HANDLE_COMPLETION:ENTRY] handleTaskCompletion invoked[39m
[12:20:36 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #25 P1.2] Collision-proof eventId generated[39m
[12:20:36 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #25 P1.3] Distributed lock acquired[39m
[12:20:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:36 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:36 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #25 P2.1] Truth table entry - event and context state[39m
[12:20:36 UTC] [33mWARN[39m (orchestrator): [36m[SESSION #25 P1.5] Stage mismatch detected - defensive gate triggered[39m
[12:20:36 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #25 P1.3] Distributed lock released[39m
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "stage_outputs" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."AgentTask" SET "status" = CAST($1::text AS "public"."TaskStatus"), "completed_at" = $2 WHERE ("public"."AgentTask"."task_id" = $3 AND 1=1) RETURNING "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "stage_outputs" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query INSERT INTO "public"."AgentTask" ("id","task_id","workflow_id","agent_type","status","priority","payload","assigned_at","retry_count","max_retries","timeout_ms") VALUES ($1,$2,$3,CAST($4::text AS "public"."AgentType"),CAST($5::text AS "public"."TaskStatus"),CAST($6::text AS "public"."Priority"),$7,$8,$9,$10,$11) RETURNING "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms"
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36müì® RAW MESSAGE RECEIVED FROM REDIS[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ MESSAGE IS FOR ORCHESTRATOR:RESULTS CHANNEL - PROCESSING[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36müîç PARSING AGENT RESULT MESSAGE[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ SUCCESSFULLY PARSED JSON MESSAGE[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36müîî RECEIVED AGENT RESULT MESSAGE[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ HANDLER FOUND - Executing callback[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36mHandling agent result[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36mTask completed - determining stage[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #26 CAS] Workflow updated successfully (CAS check passed)[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #30] Stage output stored[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[WF:HANDLE_COMPLETION:ENTRY] handleTaskCompletion invoked[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #25 P1.2] Collision-proof eventId generated[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #25 P1.3] Distributed lock acquired[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #25 P2.1] Truth table entry - event and context state[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[WF:TASK_MARKED_PROCESSED] Task marked as processed[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36mStage completed[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mComputing next stage from current stage[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36mStage transition computed[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36mSESSION #24 FIX: Event ID tracked for deduplication[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Evaluating state entered (nextStage pre-computed)[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service executing[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Invoked service completed[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Transitioning to next stage (ABSOLUTE assignment)[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Context updated in memory (ABSOLUTE)[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #26 CAS] Workflow updated successfully (CAS check passed)[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36mSESSION #23 FIX: Database persisted[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36müì® RAW MESSAGE RECEIVED FROM REDIS[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ MESSAGE IS FOR ORCHESTRATOR:RESULTS CHANNEL - PROCESSING[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36müîç PARSING AGENT RESULT MESSAGE[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ SUCCESSFULLY PARSED JSON MESSAGE[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36müîî RECEIVED AGENT RESULT MESSAGE[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ HANDLER FOUND - Executing callback[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36mHandling agent result[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36mTask completed - determining stage[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #26 CAS] Workflow updated successfully (CAS check passed)[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #30] Stage output stored[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[WF:HANDLE_COMPLETION:ENTRY] handleTaskCompletion invoked[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #25 P1.2] Collision-proof eventId generated[39m
[12:20:38 UTC] [33mWARN[39m (orchestrator): [36m[SESSION #25 P1.3] Failed to acquire distributed lock, another worker may be processing[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36mStage transition detected in database[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36mWorkflow state after stage completion[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36mCreating task for next stage[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Building validation envelope[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Agent envelope created[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[EB:PUBLISHED] Event published to Redis[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36müìù REGISTERING RESULT HANDLER[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36müì§ PUBLISHING TASK TO AGENT CHANNEL[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ TASK PUBLISHED TO REDIS[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36mTask dispatched to agent[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #36] Envelope dispatched to agent[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #25 HARDENING] Event ID tracked for deduplication[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #25 P1.3] Distributed lock released[39m
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "stage_outputs" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:query UPDATE "public"."Workflow" SET "stage_outputs" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
prisma:error 
Invalid `this.prisma.workflow.update()` invocation in
/Users/Greg/Projects/apps/zyp/agent-sdlc/packages/orchestrator/src/repositories/workflow.repository.ts:116:50

  113 const currentVersion = existing.version;
  114 
  115 try {
‚Üí 116   const updated = await this.prisma.workflow.update(
An operation failed because it depends on one or more records that were required but not found. Record to update not found.
prisma:query UPDATE "public"."AgentTask" SET "status" = CAST($1::text AS "public"."TaskStatus") WHERE ("public"."AgentTask"."task_id" = $2 AND 1=1) RETURNING "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms"
prisma:query UPDATE "public"."AgentTask" SET "status" = CAST($1::text AS "public"."TaskStatus") WHERE ("public"."AgentTask"."task_id" = $2 AND 1=1) RETURNING "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms"
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."status" = CAST($1::text AS "public"."TaskStatus") ORDER BY "public"."AgentTask"."priority" DESC, "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."status" = CAST($1::text AS "public"."TaskStatus") ORDER BY "public"."AgentTask"."priority" DESC, "public"."AgentTask"."assigned_at" ASC OFFSET $2
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."Workflow" SET "current_stage" = $1, "version" = ("public"."Workflow"."version" + $2), "updated_at" = $3 WHERE ("public"."Workflow"."id" = $4 AND "public"."Workflow"."version" = $5) RETURNING "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by"
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36müì® RAW MESSAGE RECEIVED FROM REDIS[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ MESSAGE IS FOR ORCHESTRATOR:RESULTS CHANNEL - PROCESSING[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36müîç PARSING AGENT RESULT MESSAGE[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ SUCCESSFULLY PARSED JSON MESSAGE[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36müîî RECEIVED AGENT RESULT MESSAGE[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ HANDLER FOUND - Executing callback[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36mHandling agent result[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36müì® RAW MESSAGE RECEIVED FROM REDIS[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ MESSAGE IS FOR ORCHESTRATOR:RESULTS CHANNEL - PROCESSING[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36müîç PARSING AGENT RESULT MESSAGE[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ SUCCESSFULLY PARSED JSON MESSAGE[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36müîî RECEIVED AGENT RESULT MESSAGE[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m‚úÖ HANDLER FOUND - Executing callback[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36mHandling agent result[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #26 CAS] Workflow updated successfully (CAS check passed)[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #30] Stage output stored[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [33mWARN[39m (orchestrator): [36m[SESSION #26 CAS] Update rejected - version mismatch (concurrent update detected)[39m
[12:20:38 UTC] [31mERROR[39m (orchestrator): [36mFailed to store stage output[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [31mERROR[39m (orchestrator): [36mStage failed[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #26 CAS] Workflow updated successfully (CAS check passed)[39m
[12:20:38 UTC] [32mINFO[39m (orchestrator): [36m[SESSION #26] Workflow status updated successfully[39m
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 8
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 208
[12:20:47 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "03e80ca3-5435-4165-9115-529a401cc450"
    trace_id: "trace-1762950047861-l2yanocbi"
[12:20:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:47 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:47 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "03e80ca3-5435-4165-9115-529a401cc450"
    trace_id: "trace-1762950047861-l2yanocbi"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 208
[12:20:49 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "cd4be9b7-3b28-44d9-9267-ea6c1e9fcc38"
    trace_id: "trace-1762950049892-7x9tlj4kx"
[12:20:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:49 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:49 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "cd4be9b7-3b28-44d9-9267-ea6c1e9fcc38"
    trace_id: "trace-1762950049892-7x9tlj4kx"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 208
[12:20:51 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "0bcf9341-9a17-4d30-9032-37cb16411c82"
    trace_id: "trace-1762950051923-54uj1hxqz"
[12:20:51 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:51 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:51 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:51 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:51 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "0bcf9341-9a17-4d30-9032-37cb16411c82"
    trace_id: "trace-1762950051923-54uj1hxqz"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 208
[12:20:53 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "096d8022-7abb-42fc-be9e-ceda9a2ce62e"
    trace_id: "trace-1762950053948-ksckgvtox"
[12:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:53 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:53 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "096d8022-7abb-42fc-be9e-ceda9a2ce62e"
    trace_id: "trace-1762950053948-ksckgvtox"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 208
[12:20:55 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "8829dc1c-50e4-461a-b19e-e2a8eae701a6"
    trace_id: "trace-1762950055978-f7j5k1uqf"
[12:20:55 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:55 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:55 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:55 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:55 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "8829dc1c-50e4-461a-b19e-e2a8eae701a6"
    trace_id: "trace-1762950055978-f7j5k1uqf"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 6
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 208
[12:20:58 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "e06979e0-8788-4620-8b7e-bda002b909a6"
    trace_id: "trace-1762950058011-gmns4aqqe"
[12:20:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:58 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:20:58 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "e06979e0-8788-4620-8b7e-bda002b909a6"
    trace_id: "trace-1762950058011-gmns4aqqe"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 4
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 208
[12:21:00 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "1abe1134-4e5f-4e2e-a61b-ec352ca17c6c"
    trace_id: "trace-1762950060041-gs0sdpl7n"
[12:21:00 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:00 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:00 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:00 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:00 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "1abe1134-4e5f-4e2e-a61b-ec352ca17c6c"
    trace_id: "trace-1762950060041-gs0sdpl7n"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 208
[12:21:02 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "e39231c2-ef99-4b0f-9a8e-633fc9bd79ef"
    trace_id: "trace-1762950062070-pu3lr7wrd"
[12:21:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:02 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:02 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "e39231c2-ef99-4b0f-9a8e-633fc9bd79ef"
    trace_id: "trace-1762950062070-pu3lr7wrd"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 208
[12:21:04 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "ba966676-e21f-49cd-91ac-977fbe20489f"
    trace_id: "trace-1762950064103-amnr74smb"
[12:21:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:04 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:04 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "ba966676-e21f-49cd-91ac-977fbe20489f"
    trace_id: "trace-1762950064103-amnr74smb"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 208
[12:21:06 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "378f8251-1484-4e8a-b9ab-cd92831f8469"
    trace_id: "trace-1762950066138-81ek56lnu"
[12:21:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:06 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:06 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "378f8251-1484-4e8a-b9ab-cd92831f8469"
    trace_id: "trace-1762950066138-81ek56lnu"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 208
[12:21:08 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "f0ea819b-de6a-493c-80d1-3158689bdabe"
    trace_id: "trace-1762950068169-qzyia31cm"
[12:21:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:08 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:08 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "f0ea819b-de6a-493c-80d1-3158689bdabe"
    trace_id: "trace-1762950068169-qzyia31cm"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 208
[12:21:10 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "9097226f-7ebb-4013-b182-395030cadcb9"
    trace_id: "trace-1762950070201-n0qachwnw"
[12:21:10 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:10 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:10 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:10 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:10 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "9097226f-7ebb-4013-b182-395030cadcb9"
    trace_id: "trace-1762950070201-n0qachwnw"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 208
[12:21:12 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "4d22289b-bac8-46d7-aef9-41a6d6d33334"
    trace_id: "trace-1762950072234-i2yd6khib"
[12:21:12 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:12 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:12 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:12 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:12 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "4d22289b-bac8-46d7-aef9-41a6d6d33334"
    trace_id: "trace-1762950072234-i2yd6khib"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 5
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 208
[12:21:14 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "495ccde4-1c48-4d36-8e5e-4c35500380c6"
    trace_id: "trace-1762950074267-9m5ob0i17"
[12:21:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:14 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:14 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "495ccde4-1c48-4d36-8e5e-4c35500380c6"
    trace_id: "trace-1762950074267-9m5ob0i17"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 208
[12:21:16 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "711fa0fa-043f-4a31-bab7-eac389faaad8"
    trace_id: "trace-1762950076293-kexkwbm4f"
[12:21:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:16 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:16 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "711fa0fa-043f-4a31-bab7-eac389faaad8"
    trace_id: "trace-1762950076293-kexkwbm4f"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
[METRIC] http_request_errors{method="GET",path="/api/v1/workflows/:id",error_type="Error"}: 1
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="400"}: 1
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="400"}: 1
[METRIC] http_errors_total{method="GET",path="/api/v1/workflows/:id",status_code="400",error_type="client"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 100
[12:21:34 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "80885ab6-405f-4946-886b-29ffe40bbd1f"
    trace_id: "trace-1762950094682-dy1821muc"
[12:21:34 UTC] [31mERROR[39m (orchestrator): [36mRequest error[39m
    request_id: "80885ab6-405f-4946-886b-29ffe40bbd1f"
    trace_id: "trace-1762950094682-dy1821muc"
[12:21:34 UTC] [33mWARN[39m (orchestrator): [36mRequest completed[39m
    request_id: "80885ab6-405f-4946-886b-29ffe40bbd1f"
    trace_id: "trace-1762950094682-dy1821muc"
[METRIC] http_requests_total{method="GET",path="/api/v1/workflows/:id"}: 1
prisma:query SELECT 1
prisma:query SELECT "public"."Workflow"."id", "public"."Workflow"."type"::text, "public"."Workflow"."name", "public"."Workflow"."description", "public"."Workflow"."requirements", "public"."Workflow"."status"::text, "public"."Workflow"."current_stage", "public"."Workflow"."priority"::text, "public"."Workflow"."progress", "public"."Workflow"."version", "public"."Workflow"."stage_outputs", "public"."Workflow"."created_at", "public"."Workflow"."updated_at", "public"."Workflow"."completed_at", "public"."Workflow"."created_by" FROM "public"."Workflow" WHERE ("public"."Workflow"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."WorkflowStage"."id", "public"."WorkflowStage"."workflow_id", "public"."WorkflowStage"."name", "public"."WorkflowStage"."status"::text, "public"."WorkflowStage"."started_at", "public"."WorkflowStage"."completed_at", "public"."WorkflowStage"."agent_id", "public"."WorkflowStage"."retry_count" FROM "public"."WorkflowStage" WHERE "public"."WorkflowStage"."workflow_id" IN ($1) ORDER BY "public"."WorkflowStage"."name" ASC OFFSET $2
prisma:query SELECT "public"."WorkflowEvent"."id", "public"."WorkflowEvent"."workflow_id", "public"."WorkflowEvent"."event_type", "public"."WorkflowEvent"."payload", "public"."WorkflowEvent"."timestamp", "public"."WorkflowEvent"."trace_id" FROM "public"."WorkflowEvent" WHERE "public"."WorkflowEvent"."workflow_id" IN ($1) ORDER BY "public"."WorkflowEvent"."timestamp" DESC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."AgentTask"."id", "public"."AgentTask"."task_id", "public"."AgentTask"."workflow_id", "public"."AgentTask"."agent_type"::text, "public"."AgentTask"."status"::text, "public"."AgentTask"."priority"::text, "public"."AgentTask"."payload", "public"."AgentTask"."result", "public"."AgentTask"."assigned_at", "public"."AgentTask"."started_at", "public"."AgentTask"."completed_at", "public"."AgentTask"."retry_count", "public"."AgentTask"."max_retries", "public"."AgentTask"."timeout_ms" FROM "public"."AgentTask" WHERE "public"."AgentTask"."workflow_id" IN ($1) ORDER BY "public"."AgentTask"."assigned_at" DESC LIMIT $2 OFFSET $3
[METRIC] http_request_duration_ms{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 7
[METRIC] http_responses_total{method="GET",path="/api/v1/workflows/:id",status_code="200"}: 1
[METRIC] http_response_size_bytes{method="GET",path="/api/v1/workflows/:id"}: 208
[12:21:39 UTC] [32mINFO[39m (orchestrator): [36mIncoming request[39m
    request_id: "4ac24bd4-0cfd-465f-b94e-996d09a75128"
    trace_id: "trace-1762950099793-q03pcs1kq"
[12:21:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:39 UTC] [34mDEBUG[39m (orchestrator): [36mDatabase query[39m
[12:21:39 UTC] [32mINFO[39m (orchestrator): [36mRequest completed[39m
    request_id: "4ac24bd4-0cfd-465f-b94e-996d09a75128"
    trace_id: "trace-1762950099793-q03pcs1kq"
[13:28:25 UTC] [33mWARN[39m (orchestrator): [36mAuto-removing expired result handler[39m
8:51:25 AM [tsx] Previous process hasn't exited yet. Force killing...
